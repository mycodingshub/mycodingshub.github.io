<!doctype html>
<html lang="ko" data-bs-theme="auto">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<script 
  src="/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js"
  integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg=">
</script>


<link rel="stylesheet" href="/main.86b7305f5a96b7dd3a46fa6277d87b125af3bf13f48c4cfcc269be84fa9e8fb75375d45a5fe9056ce9190644b7a6e5f13f917f12d853ed38bb76d8856898f755.css" integrity="sha512-hrcwX1qWt906Rvpid9h7ElrzvxP0jEz8wmm+hPqej7dTddRaX+kFbOkZBkS3puXxP5F/EthT7Ti7dtiFaJj3VQ==" crossorigin="anonymous">

<noscript><style>img.lazyload { display: none; }</style></noscript><title>타입스크립트 5.5의 강력한 기능 타입 가드 추론(type predicate inference)</title>
<meta name="description" content="타입스크립트 5.5에 도입될 신 기능, 타입 가드 추론(type predicate inference)" />
<link rel="canonical" href="https://mycodingshub.github.io/blog/2024-05-01-typescript-5-5-new-feature-type-predicate-inference/" />
<meta name="robots" content="index, follow" />

<meta property="og:type" content="article" />
<meta property="og:title" content="타입스크립트 5.5의 강력한 기능 타입 가드 추론(type predicate inference)" />
<meta property="og:description" content="타입스크립트 5.5에 도입될 신 기능, 타입 가드 추론(type predicate inference)" />
<meta property="og:url" content="https://mycodingshub.github.io/blog/2024-05-01-typescript-5-5-new-feature-type-predicate-inference/" />
<meta property="og:site_name" content="Home" />
<meta property="og:image" content="https://mycodingshub.github.io/cover.png" />
<meta property="og:locale" content="en" />
<meta property="article:published_time" content="2024-05-01T12:29:18Z" />
<meta property="article:modified_time" content="2024-05-01T12:29:18Z" />
<meta property="article:tag" content="typescript" />
<meta property="article:tag" content="type guard" />
<meta property="article:tag" content="type predicate" />
<meta property="article:tag" content="type predicate inference" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="타입스크립트 5.5의 강력한 기능 타입 가드 추론(type predicate inference)" />
<meta name="twitter:description" content="타입스크립트 5.5에 도입될 신 기능, 타입 가드 추론(type predicate inference)" />
<meta name="twitter:image" content="https://mycodingshub.github.io/cover.png" />

<meta name="author" content="cpro95@gmail.com" />

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"타입스크립트 5.5의 강력한 기능 타입 가드 추론(type predicate inference)\"",
  "description": "\"타입스크립트 5.5에 도입될 신 기능, 타입 가드 추론(type predicate inference)\"",
  "datePublished": "\"2024-05-01T12:29:18Z\"",
  "dateModified": "\"2024-05-01T12:29:18Z\"",
  "author": {
    "@type": "Person",
    "name": "\"cpro95@gmail.com\""
  },
  "image": "\"https://mycodingshub.github.io/cover.png\"",
  "url": "\"https://mycodingshub.github.io/blog/2024-05-01-typescript-5-5-new-feature-type-predicate-inference/\"",
  "publisher": {
    "@type": "Organization",
    "name": "\"Home\""
  }
}
</script>




<script async src="https://www.googletagmanager.com/gtag/js?id=G-C7SBETWEJ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C7SBETWEJ0');
</script>


<script
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7748316956330968"
  crossOrigin="anonymous"
></script>


</head>

  
  <body class="single section blog" data-bs-spy="scroll" data-bs-target="#toc" data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll="true" tabindex="0">
    <div class="sticky-top">
<header class="navbar navbar-expand-sm">
  <div class="container-lg">
  <div class="d-flex flex-grow-1 justify-content-between">
    <div class="d-flex flex-row navbar-nav justify-content-between align-items-start gap-2">
    
    <a class="nav-link fw-bold fs-4" href="/">Home</a>

    
    
            <a class="nav-link fs-4  active" href="https://mycodingshub.github.io/blog/" aria-current="true">Blog</a>
          
        
            <a class="nav-link fs-4 " href="https://mycodingshub.github.io/life/">Life</a>
          
        
    </div>
    <div class="d-flex flex-row justify-content-between align-items-center">
      
      
      <button type="button" id="searchToggleMobile" class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      
      <button type="button" id="searchToggleDesktop" class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      <button id="buttonColorMode" class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type="button" aria-label="Toggle theme">
        <svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
        </svg>
        <svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0m-5 0h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
        </svg>
      </button>
      </div>
        
        
        
        
        </div>
    </div>

    
    </div>
</header>
</div>

<div class="modal" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 visually-hidden" id="searchModalLabel">Search</h1>
        <button type="button" class="btn-close visually-hidden" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="search-input flex-grow-1 d-none">
          <form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search">
            <label for="query" class="visually-hidden">Search</label>
            <div class="d-flex">
              <input type="search" id="query" name="query" class="search-text form-control form-control-lg" placeholder="Search" aria-label="Search" maxlength="128" autocomplete="off">
              <button type="button" class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-body">
        <p class="search-loading status message d-none mt-3 text-center">Loading search index…</p>
        <p class="search-no-recent message d-none mt-3 text-center">No recent searches</p>
        <p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class="query-no-results">Query here</span></strong>"</p>
        <div id="searchResults" class="search-results"></div>
        <template>
          <article class="search-result list-view">
            <div class="card my-3">
              <div class="card-body">
                <header>
                  <h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href="#">Title here</a></h2>
                  <div class="submitted d-none"><time class="created-date">Date here</time></div>
                </header>
                <div class="content">Summary here</div>
              </div>
            </div>
          </article>
        </template>
      </div>
      <div class="modal-footer">
        <ul class="list-inline me-auto d-none d-md-block">
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd><span class="DocSearch-Label">to select</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd><span class="DocSearch-Label">to navigate</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd><span class="DocSearch-Label">to close</span></li>
        </ul>
        <p class="d-md-none">Search by <a class="text-decoration-none" href="https://github.com/nextapps-de/flexsearch">FlexSearch</a></p>
      </div>
    </div>
  </div>
</div>


    <div class="wrap container-lg" role="document">
      <div class="content">
      
        
<article>
  <div class="row justify-content-center">
    <div class="col-md-12 col-lg-12">
      
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-7748316956330968"
        data-ad-slot="2971373181"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      <div class="blog-header">
        <h1>타입스크립트 5.5의 강력한 기능 타입 가드 추론(type predicate inference)</h1>
        <p>
  <small>May 1, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>4&nbsp;minutes</span></small>
</p>

      </div>
    </div>
      <div class="col-md-12 col-lg-12">
      
      <p>안녕하세요?</p>
<p>오늘은 타입스크립트 5.5 버전이 베타 버전이 되면서 트위터 상에서 큰 반향을 불러일으키고 있는 새로운 기능인 타입 가드 추론에 대해 알아보겠습니다.</p>
<p>** 목 차 **</p>
<ul>
<li><a href="#%ed%83%80%ec%9e%85%ec%8a%a4%ed%81%ac%eb%a6%bd%ed%8a%b8-55%ec%9d%98-%ea%b0%95%eb%a0%a5%ed%95%9c-%ea%b8%b0%eb%8a%a5-%ed%83%80%ec%9e%85-%ea%b0%80%eb%93%9c-%ec%b6%94%eb%a1%a0type-predicate-inference">타입스크립트 5.5의 강력한 기능 타입 가드 추론(type predicate inference)</a>
<ul>
<li><a href="#%ed%83%80%ec%9e%85-%ec%b2%b4%ed%81%ac-%eb%b0%a9%eb%b2%95">타입 체크 방법</a></li>
<li><a href="#is-%ec%97%b0%ec%82%b0%ec%9e%90%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%9c-%ed%83%80%ec%9e%85-%ea%b0%80%eb%93%9ctype-predicate%ec%9d%98-%eb%93%b1%ec%9e%a5">is 연산자를 이용한 타입 가드(type predicate)의 등장</a></li>
<li><a href="#%ed%95%a8%ec%88%98%ec%9d%98-%ea%b5%ac%ed%98%84%ec%97%90-%eb%a7%9e%ec%a7%80-%ec%95%8a%eb%8a%94-%ed%83%80%ec%9e%85%ea%b0%80%eb%93%9c-%eb%ac%b8%ec%a0%9c%ec%a0%90">함수의 구현에 맞지 않는 타입가드 문제점</a></li>
<li><a href="#type-predicate-inference">type predicate inference</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="타입-체크-방법">타입 체크 방법</h2>
<p>우리가 타입스크립트를 사용하는 이유가 강력한 타입 적용인데요.</p>
<p>좀 더 쉬운 예를 들면서 이야기를 진행해 보겠습니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// const value: string | number
</span></span></span></code></pre></div>
  </figure>
</div>
<p>위 코드에서 보면 value 값이 문자열인지 숫자인지 체크하고 싶으면 간단하게 다음과 같이 if 문을 사용하면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>위와 같이 if 문을 이용하면 타입스크립트는 아주 간단하게 value 타입 추론할 수 있습니다.</p>
<p>if 문 안에 있는 <code>console.log(value)</code> 구문에서 value 위에 마우스를 갖다 놓으면 아마 다음과 같이 보일 겁니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">string</span></span></span></code></pre></div>
  </figure>
</div>
<p>타입스크립트는 value 가 string 인지 아는 거죠.</p>
<p>이런 방식을 타입스크립트에서는 &lsquo;타입 좁힘&rsquo; 또는 &lsquo;타입 축소&rsquo;라고 부릅니다.</p>
<p>그러면 위와 같이 if 문을 사용하면 완벽하게 type narrowing이 작동되는데요.</p>
<p>그러면 아예 타입 체크하는 &lsquo;isString&rsquo; 함수를 만들면 어떻게 될까요?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="c1">// string | number
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>위 코드와 같이 타입 축소(좁힘)가 작동되지 않고 있습니다.</p>
<p>좀 더 어려운 말로는 isString 함수가 타입 가드(type predicate)인지 타입스크립트가 인지하지 못한다는 겁니다.</p>
<p>if 문 안에 확실하게 <code>typeof value === 'string'</code> 코드가 있었을 때는 타입스크립트가 타입 추론을 완벽하게 했었는데, isString 이라는 함수를 만들었더니 타입 좁힘이 이루어 지지 않고 있는겁니다.</p>
<hr>
<h2 id="is-연산자를-이용한-타입-가드type-predicate의-등장">is 연산자를 이용한 타입 가드(type predicate)의 등장</h2>
<p>아까와 같은 문제가 생기면 이제는 타입스크립트에서는 타입 가드를 이용할 수 있는데요.</p>
<p>다음과 같이 하면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">unknown</span><span class="p">)</span><span class="o">:</span> <span class="nx">value</span> <span class="nx">is</span> <span class="nx">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>  <span class="c1">// const value: string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>위와 같이 isString 함수 뒤에 함수의 리턴 타입을 적는 게 아니라 is 연산자를 이용해서 타입 가드를 작성해 넣었습니다.</p>
<p>type predicate 즉, 타입을 서술했다는 뜻인데요.</p>
<p>&ldquo;value 타입은 string입니다&quot;라고 서술한 겁니다.</p>
<p>이게 타입스크립트에서는 &lsquo;타입 가드&rsquo; 라고 합니다.</p>
<p>is 연산자를 이용한 &lsquo;타입 가드&rsquo;가 있으면 filter 메서드에서도 제대로 작동합니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">unknown</span><span class="p">)</span><span class="o">:</span> <span class="nx">value</span> <span class="nx">is</span> <span class="nx">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;hello&#34;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;world&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">strings</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">isString</span><span class="p">);</span></span></span></code></pre></div>
  </figure>
</div>
<p>&ldquo;value is string&rdquo; 부분이 없으면 strings는 아래와 같이 나올 텐데요.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">strings</span><span class="o">:</span> <span class="p">(</span><span class="nx">string</span> <span class="o">|</span> <span class="nx">number</span><span class="p">)[]</span></span></span></code></pre></div>
  </figure>
</div>
<p>&ldquo;value is string&rdquo; 부분을 추가하고 이제 strings 위에 마우스를 갖다 대면 다음과 같이 나옵니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">strings</span><span class="o">:</span> <span class="nx">string</span><span class="p">[]</span></span></span></code></pre></div>
  </figure>
</div>
<p>타입 가드가 완벽하게 작동하고 있네요.</p>
<hr>
<h2 id="함수의-구현에-맞지-않는-타입가드-문제점">함수의 구현에 맞지 않는 타입가드 문제점</h2>
<p>그러나 이 방식도 약간은 귀찮은 면이 있는데요.</p>
<p>더 나쁜 점은 타입가드가 함수의 구현과 전혀 상반될 수 있다는 겁니다.</p>
<p>반환 유형을 value is number로 변경해도 TypeScript는 불평하지 않습니다.</p>
<p>심각한 문제인 거죠.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">unknown</span><span class="p">)</span><span class="o">:</span> <span class="nx">value</span> <span class="nx">is</span> <span class="nx">number</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&#34;string&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;hello&#34;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;world&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">strings</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">isString</span><span class="p">);</span></span></span></code></pre></div>
  </figure>
</div>
<p>이제 strings 위에 마우스를 갖다 대면 아래와 같이 나옵니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">strings</span><span class="o">:</span> <span class="nx">number</span><span class="p">[]</span></span></span></code></pre></div>
  </figure>
</div>
<p>우리가 구현한 함수의 원래 취지와 전혀 상반된 행동을 하는데도 타입스크립트는 아무런 문제점을 제기하지 않고 있습니다.</p>
<p>사실 타입스크립트가 AI가 아닌 이상 위와 같은 문제점을 인식할 수 없는 거죠.</p>
<p>하지만 타입스크립트 5.5에서는 이 문제를 해결할 수 있는 type predicate inference가 도입되었습니다.</p>
<p>타입스크립트 개발 contributor이신 &ldquo;Dan Vanderkam&quot;님께서 요청하신 PR이 이제 5.5 베타버전에 포함되었습니다.</p>
<hr>
<h2 id="type-predicate-inference">type predicate inference</h2>
<p>영어로 썼는데 번역해 보면 타입 프레디컷 인피어런스 즉, 타입 서술자 추론입니다.</p>
<p>타입 가드 추론이라고도 불릴 수 있는데요.</p>
<p>아까 우리가 제기한 문제점인 함수의 구현과 전혀 상반된 타입을 추론한 걸 이제는 AI처럼 함수 body 안에 있는 코드를 감안해서 타입을 추론한다는 겁니다.</p>
<p>그러면 이제 타입 가드를 할 필요가 없는데요.</p>
<p>아까 우리가 계속 타입 가드로 넣었던 is 연산자를 이용한 &lsquo;value is string&rsquo; 문구를 쓸 필요가 없어지는 겁니다.</p>
<p>테스트를 위해 빈 폴더에 &rsquo;npm init -y&rsquo;로 빈 프로젝트를 만들어 주고 타입스크립트 베타버전을 설치해 보겠습니다</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">mkdir</span> <span class="nx">typescript</span><span class="o">-</span><span class="mf">5.5</span><span class="o">-</span><span class="nx">test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">cd</span> <span class="nx">typescript</span><span class="o">-</span><span class="mf">5.5</span><span class="o">-</span><span class="nx">test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">npm</span> <span class="nx">init</span> <span class="o">-</span><span class="nx">y</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">D</span> <span class="nx">typescript</span><span class="err">@</span><span class="nx">beta</span></span></span></code></pre></div>
  </figure>
</div>
<p>위와 같이 설치하면 package.json 파일에 아래와 같이 설치될 겁니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="s2">&#34;devDependencies&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;typescript&#34;</span><span class="o">:</span> <span class="s2">&#34;^5.5.0-beta&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>이제 main.ts 파일을 만들고 아래와 같이 &lsquo;value is string&rsquo; 문구를 삭제해 보겠습니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">strings</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">isString</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// const strings: (string | number)[]
</span></span></span></code></pre></div>
  </figure>
</div>
<p>역시나 에러가 발생하는데요.</p>
<p>Visual Studio Code가 타입스크립트 5.5 베타버전을 사용하지 않아서입니다.</p>
<p>&ldquo;Cmd + Shipt + P&rdquo; 버튼을 눌러 아래 그림과 같이 쓰면 됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEipg830Fcztl-Jb_SK023wkY8PkhvYY5QEFHR0TdFzaZbJfT0Wj4iVkOHlf_RpViMIKnmcF-Mx4uNTaP35JzPcdAS98YQPaJaMaCrhcnj-2U8fLoMpX5W0RUlzU7rU796Rti6ay0BZvhKTTnAb8Og5-oV4U4l2Q-NFIKjBmc1j-rrOXdwMF4tnHK9GVVls"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">&gt;typescript: Select typescript version</span></span></code></pre></div>
  </figure>
</div>
<p>그러면 현재 버전과 베타버전이 보이는데요.</p>
<p>아래와 같이 베타버전을 고르면 됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhsAoSxonzd92AE4v0Xj3uJey9yqJwOT5zwAIcQfQDoGXMzEWf-QmwuQJVjy4Ki7_f6zWOs3jDibAi_-vkWSLInw30Acjtsojp40omLGwXWYQ33otG33jrzyWfSlnkXqExGCdVMqqXXbVlsmSbt-rvBcr5GKgPRzHxYfr7vrdI-hOoF528lrFmkUQiNjiw"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>이제 타입스크립트 5.5 베타버전이 적용되었기 때문에 아래와 같이 다시 strings 위에 마우스를 갖다 대면 아래와 같이 나옵니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhOUe5QsQ9o3-xhheMNAQFo3iW0GwGRyV8n40F6I3VOBCmQ9V2srEl3B3X3Y7ifkAzxx4S-D8K3l_FZjs3z0-8GsKuE9cHXJQoSI9TcM7UVwFc-VwOoWQTKijHkOTfpiVNdIprrzSxB8rkfodJNHppngdgfrNuklkUrTSs7xWaIVmWotOTaU6AVUlOsRT4"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>위와 같이 strings가 is 연산자를 이용한 타입가드 &ldquo;value is string&quot;이 있었을 때와같이 정확하게 작동합니다.</p>
<p>더 이상 is 연산자를 이용한 타입가드에서 타입을 &ldquo;value is number&quot;와 같이 잘못 넣을 경우처럼 위험한 상황도 없어지고 오로지 함수 body 안의 코드에 의해 유추한 타입이 적용되어 지는데요.</p>
<p>타입스크립트 역사에 있어 아주 위대한 순간이 아닐 수 없습니다.</p>
<p>이제 개발자가 직접 타입가드 없이 복잡한 타입 축소(좁힘) 코드를 아래와 같이 작성할 수 있게 되는 겁니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">isObjAndHasIdProperty</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;id&#39;</span> <span class="k">in</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">    <span class="k">typeof</span> <span class="nx">value</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">isObjAndHasIdProperty</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="c1">// number
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>정말 타입스크립트 역사에서 큰 전환점이 될 것으로 기대가 되는군요.</p>
<p>그럼.</p>

      <div class="tag-list-single">
        <a class="btn btn-light" href="/tags/typescript/" role="button">typescript</a>
        <a class="btn btn-light" href="/tags/type-guard/" role="button">type guard</a>
        <a class="btn btn-light" href="/tags/type-predicate/" role="button">type predicate</a>
        <a class="btn btn-light" href="/tags/type-predicate-inference/" role="button">type predicate inference</a>
        </div>
      
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-format="autorelaxed"
          data-ad-client="ca-pub-7748316956330968"
          data-ad-slot="4495825428"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>
</article>

      
      </div>
    </div>
    
    
<div class="bg-light">
    <section class="section section-related container">
      <div class="row justify-content-center">
        <div class="col-md-12 col-lg-12">
          <h2 class="section-title text-center">Related posts</h2>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2024-11-09-typescript-intermediate-type-exercises/">TypeScript 중급자를 위한 실전 타입 문제 및 해답</a></h2>
                  <p>TypeScript 중급 레벨을 위한 실전 문제 모음으로, 다양한 타입 관련 문제를 풀어보며 타입스크립트의 이해도를 높여보세요. 함수 타입, 제네릭, 선택적 프로퍼티 등 실제 개발에서 자주 마주치는 문제들을 해결해보세요.</p>
                  <p>
  <small>November 9, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>22&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2024-11-08-typescript-advanced-types-union-conditional-mapped/">TypeScript 타입 시스템 마스터하기 - 유니언, 조건부, 매핑 타입 완벽 해설</a></h2>
                  <p>TypeScript 타입 시스템의 핵심, 유니언, 조건부, 매핑 타입을 활용한 고급 테크닉을 배우고 실용적인 타입 활용 전략을 익히세요. 표준 라이브러리 활용법과 함수 오버로드, this 타입, 커스텀 타입 가드 등으로 TypeScript 타입 마스터가 되어 생산성을 높여보세요.</p>
                  <p>
  <small>November 8, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>23&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2024-02-20-understanding-typescript-covariant-and-contravariant/">타입스크립트 변성 5분 만에 이해하기(공변성, 반변성, 양변성)</a></h2>
                  <p>타입스크립트 공변성, 반변성, 양변성 쉽게 이해하기</p>
                  <p>
  <small>February 20, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>5&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          </div>
      </div>
    </section>
    <script src="https://utteranc.es/client.js"
      repo="cpro95/utterances_mycodings_fly_dev"
      issue-term="pathname"
      theme="github-light"
      label="blog-comment"
      crossorigin="anonymous"
    async>
    </script>
  </div>
  
    <footer class="footer text-muted">
  <div class="container-lg">
    <div class="row">
      <div class="col-lg-8 text-center text-lg-start">
        <ul class="list-inline">
          <li class="list-inline-item"><a class="text-muted" href="/about/">about</a></li>
        </ul>
      </div>
      <div class="col-lg-8 text-center text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item">Copyright (c) All Right Reserved.</li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    

<script async
  src="/js/app.19b73e0182301dd61c9211c2f6890104740e2eb9eb12fe4ba8d4f31435b22ed6.js"
  integrity="sha256-Gbc&#43;AYIwHdYckhHC9okBBHQOLrnrEv5LqNTzFDWyLtY=">
</script>





<script async
  src="/js/flexsearch.5dd6433c29c3e043627f046054aed58ff3790f58fdb8423f45125bbafdcad335.js"
  integrity="sha256-XdZDPCnD4ENifwRgVK7Vj/N5D1j9uEI/RRJbuv3K0zU=">
</script>
<script async
  src="/js/search-modal.96e662d8f691fe25c859a3437074b485f2d7bed0bca612725028c6cf4322e2f2.js"
  integrity="sha256-luZi2PaR/iXIWaNDcHS0hfLXvtC8phJyUCjGz0Mi4vI=">
</script>

    <div class="d-inline-flex fixed-bottom-right pb-4 pe-4">
  <button id="toTop" type="button" class="btn btn-primary rounded-circle ms-auto p-2"><span class="visually-hidden">Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 15l6 -6l6 6"></path></svg></button>
</div>

    
  </body>
</html>
