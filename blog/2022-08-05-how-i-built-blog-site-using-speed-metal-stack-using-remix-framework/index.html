<!doctype html>
<html lang="ko" data-bs-theme="auto">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<script 
  src="/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js"
  integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg=">
</script>


<link rel="stylesheet" href="/main.86b7305f5a96b7dd3a46fa6277d87b125af3bf13f48c4cfcc269be84fa9e8fb75375d45a5fe9056ce9190644b7a6e5f13f917f12d853ed38bb76d8856898f755.css" integrity="sha512-hrcwX1qWt906Rvpid9h7ElrzvxP0jEz8wmm+hPqej7dTddRaX+kFbOkZBkS3puXxP5F/EthT7Ti7dtiFaJj3VQ==" crossorigin="anonymous">

<noscript><style>img.lazyload { display: none; }</style></noscript><title>Remix Speed Metal Stack을 이용한 블로그 사이트 만들기</title>
<meta name="description" content="Remix Speed Metal Stack을 활용하여 블로그 사이트 만들고 Fly.io에 배포까지 한 번에!" />
<link rel="canonical" href="https://mycodingshub.github.io/blog/2022-08-05-how-i-built-blog-site-using-speed-metal-stack-using-remix-framework/" />
<meta name="robots" content="index, follow" />

<meta property="og:type" content="article" />
<meta property="og:title" content="Remix Speed Metal Stack을 이용한 블로그 사이트 만들기" />
<meta property="og:description" content="Remix Speed Metal Stack을 활용하여 블로그 사이트 만들고 Fly.io에 배포까지 한 번에!" />
<meta property="og:url" content="https://mycodingshub.github.io/blog/2022-08-05-how-i-built-blog-site-using-speed-metal-stack-using-remix-framework/" />
<meta property="og:site_name" content="Home" />
<meta property="og:image" content="https://mycodingshub.github.io/cover.png" />
<meta property="og:locale" content="en" />
<meta property="article:published_time" content="2022-08-05T05:45:42Z" />
<meta property="article:modified_time" content="2022-08-05T05:45:42Z" />
<meta property="article:tag" content="blog" />
<meta property="article:tag" content="remix" />
<meta property="article:tag" content="github-action" />
<meta property="article:tag" content="speed-metal-stack" />
<meta property="article:tag" content="fly.io" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Remix Speed Metal Stack을 이용한 블로그 사이트 만들기" />
<meta name="twitter:description" content="Remix Speed Metal Stack을 활용하여 블로그 사이트 만들고 Fly.io에 배포까지 한 번에!" />
<meta name="twitter:image" content="https://mycodingshub.github.io/cover.png" />

<meta name="author" content="cpro95@gmail.com" />

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"Remix Speed Metal Stack을 이용한 블로그 사이트 만들기\"",
  "description": "\"Remix Speed Metal Stack을 활용하여 블로그 사이트 만들고 Fly.io에 배포까지 한 번에!\"",
  "datePublished": "\"2022-08-05T05:45:42Z\"",
  "dateModified": "\"2022-08-05T05:45:42Z\"",
  "author": {
    "@type": "Person",
    "name": "\"cpro95@gmail.com\""
  },
  "image": "\"https://mycodingshub.github.io/cover.png\"",
  "url": "\"https://mycodingshub.github.io/blog/2022-08-05-how-i-built-blog-site-using-speed-metal-stack-using-remix-framework/\"",
  "publisher": {
    "@type": "Organization",
    "name": "\"Home\""
  }
}
</script>




<script async src="https://www.googletagmanager.com/gtag/js?id=G-C7SBETWEJ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C7SBETWEJ0');
</script>


<script
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7748316956330968"
  crossOrigin="anonymous"
></script>


</head>

  
  <body class="single section blog" data-bs-spy="scroll" data-bs-target="#toc" data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll="true" tabindex="0">
    <div class="sticky-top">
<header class="navbar navbar-expand-sm">
  <div class="container-lg">
  <div class="d-flex flex-grow-1 justify-content-between">
    <div class="d-flex flex-row navbar-nav justify-content-between align-items-start gap-2">
    
    <a class="nav-link fw-bold fs-4" href="/">Home</a>

    
    
            <a class="nav-link fs-4  active" href="https://mycodingshub.github.io/blog/" aria-current="true">Blog</a>
          
        
            <a class="nav-link fs-4 " href="https://mycodingshub.github.io/life/">Life</a>
          
        
    </div>
    <div class="d-flex flex-row justify-content-between align-items-center">
      
      
      <button type="button" id="searchToggleMobile" class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      
      <button type="button" id="searchToggleDesktop" class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      <button id="buttonColorMode" class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type="button" aria-label="Toggle theme">
        <svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
        </svg>
        <svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0m-5 0h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
        </svg>
      </button>
      </div>
        
        
        
        
        </div>
    </div>

    
    </div>
</header>
</div>

<div class="modal" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 visually-hidden" id="searchModalLabel">Search</h1>
        <button type="button" class="btn-close visually-hidden" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="search-input flex-grow-1 d-none">
          <form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search">
            <label for="query" class="visually-hidden">Search</label>
            <div class="d-flex">
              <input type="search" id="query" name="query" class="search-text form-control form-control-lg" placeholder="Search" aria-label="Search" maxlength="128" autocomplete="off">
              <button type="button" class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-body">
        <p class="search-loading status message d-none mt-3 text-center">Loading search index…</p>
        <p class="search-no-recent message d-none mt-3 text-center">No recent searches</p>
        <p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class="query-no-results">Query here</span></strong>"</p>
        <div id="searchResults" class="search-results"></div>
        <template>
          <article class="search-result list-view">
            <div class="card my-3">
              <div class="card-body">
                <header>
                  <h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href="#">Title here</a></h2>
                  <div class="submitted d-none"><time class="created-date">Date here</time></div>
                </header>
                <div class="content">Summary here</div>
              </div>
            </div>
          </article>
        </template>
      </div>
      <div class="modal-footer">
        <ul class="list-inline me-auto d-none d-md-block">
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd><span class="DocSearch-Label">to select</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd><span class="DocSearch-Label">to navigate</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd><span class="DocSearch-Label">to close</span></li>
        </ul>
        <p class="d-md-none">Search by <a class="text-decoration-none" href="https://github.com/nextapps-de/flexsearch">FlexSearch</a></p>
      </div>
    </div>
  </div>
</div>


    <div class="wrap container-lg" role="document">
      <div class="content">
      
        
<article>
  <div class="row justify-content-center">
    <div class="col-md-12 col-lg-12">
      
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-7748316956330968"
        data-ad-slot="2971373181"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      <div class="blog-header">
        <h1>Remix Speed Metal Stack을 이용한 블로그 사이트 만들기</h1>
        <p>
  <small>August 5, 2022<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>13&nbsp;minutes</span></small>
</p>

      </div>
    </div>
      <div class="col-md-12 col-lg-12">
      
      <p>안녕하세요?</p>
<p>오늘은 제 블로그 사이트인 <a href="https://mycodingshub.github.io/">mycodingshub.github.io</a>를 어떻게 만들게 됐는지 소개해 드리려고 합니다.</p>
<p>일단 아래 그림은 제 블로그 메인 화면인데요.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgtlf54oM9IfJJeaYqj0tB9NHGEYWtAYiGic9-M5ULVjd1S_AEmHmbI8e4sqyAT3wwxshulEX-IyRNAxSJDfmsf0fLq8mn29Ef4YTsB3tF6ZiJ4knqRfeW6iuFpk0OBFsbO89mMdP8CDcL40-Sm72IOm0UfoDwU6CzLy9HxKCb6D7mYZEm4V3FvYhWb=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>아래 그림은 주소가 &ldquo;/blog&quot;인 화면에서 다크 모드를 적용한 그림입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEi9GIWMx9WnUWSnK2dyeU7bZcFfiGxOrA1DmKzRUFcloFJQuWw57AZ4FN4XiveaWO_lgY6jARNGPdp2Ya5wCAA83Oravie0BXTrNfvquqZFo0Y2Z1feuHd4v9qP-iLq1v2wCiYhvI0FJwaHfp1ao4pBxGi8ISALyb0uvpeX82CuU7z2LpKciMJFlFyG=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>개인적으로 티스토리를 이용했었지만 좀 더 나만의 블로그를 만들고 싶어 여러 가지를 고민하다가 Remix로 만든 <a href="https://kentcdodds.com/">kentcdodds.com</a> 사이트를 참고해서 만든 Remix Speed Metal Stack을 발견했습니다.</p>
<p>처음에 한번 설치해 보고 너무 어려워서 실망했었는데요.</p>
<p>좀 더 코드를 뜯어보고 연구한 끝에 성공했습니다.</p>
<h2 id="remix-speed-metal-stack">Remix Speed Metal Stack</h2>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEh_a1w0Ce5lr4sO9BpzJCXGc66UE6gTMDGDny8F1YiQXXzoWuvPMl43OgDcvX8sJRIBAukJDj6Z8DaMR7HAqaz1LqgfSPj7C9qCJU4tpDQI1xKsazYYWh_B56QyULvySktEj6AeOLd-p8Peo0Ky5fKwmK5RzIzhoHfFc2DvAuGcD0u_V7fVa5aBWpHw=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>리믹스 프레임워크는 서버 사이드와 클라이언트 사이드 쪽 개발을 동시에 할 수 있는 풀 스택 개발 프레임워크인데요.</p>
<p>일단 속도가 엄청 빠릅니다.</p>
<p>그리고, 실제 서버 사이드 쪽 개발도 병행하기 때문에 실제 웹 호스팅에 Deploy 할 수 있게 끔 풀 스택을 공유하고 그걸 Stack라고 개발자들 사이에서 Github에 올리고 공유합니다.</p>
<p>처음에 나온 게 Indie-Stack과 Blue-Stack이었던 거 같은데요.</p>
<p>개인적으로 Indie Stack은 제 사이트인 <a href="https://mymovies.fly.dev">mymovies.fly.dev</a>를 만드는데 쓰였습니다.</p>
<p>그럼 Speed Metal Stack에 대해 설명해 보면,</p>
<p>Github Action을 통해 자동으로 Fly.io에 빌드 배포하는 형식인데요.</p>
<p>그런데 블로그 사이트가 글 한건 추가했다고 전체 다 빌드하는 일은 너무 시간 낭비 아니겠습니까?</p>
<p>그래서 Kent C. Dodds님께서 만든 게 본인의 사이트인데요.</p>
<p>그걸 모티브로 해서 만든 게 Speed Metal Stack입니다.</p>
<p>일단 아래 그림이 전체적인 프로세스 구조입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjy9NXU44OsFo94A35zbHCfgn18TCoVXYfD9AjM1wtAxUxJOHE8x06Z7SxjcI3TVdhbwMjUxfJUlwWfpouqZZhNV9S0FzSAwKH701_30ZHoTbNsAe_rNlzjhAi6FlbkFgODe66xDv1SoXcDBD-GZ5g__MBwgSbt8fUmO_gMEHt-71g9vnrQCxg9F17K=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Git의 commit 관련 정보와 blog content 디렉터리가 수정되었는지에 대해 검사해서,</p>
<p>Blog Site를 새로 빌드해야 된다면 새로 빌드하고,</p>
<p>아니면 글만 추가됐으면 해당 변경된 글 정보를 Git commit 정보로 읽어서 글만 마크다운으로 컴파일해서 Fly.io의 sqlite3 DB에 저장합니다.</p>
<p>물론, 코드를 조금 수정하면 PostGreSQL이나 외부 DB에 저장할 수 있습니다.</p>
<p>이런 형식을 쓰기 때문에 Gastby나 Hugo 같은 정적 사이트 제너레이터처럼 글 한번 만들었다고 전부 다 빌드(컴파일) 다시 하는 경우는 발생하지 않습니다.</p>
<p>그래서 일단 로컬 쪽에서 Speed Metal Stack을 이용해서 전체적인 블로그 사이트를 본인이 원하는 형태로 만들고 나서 최종적으로 Github에 올리면 처음 한 번은 Build &amp; Deploy가 되지만 그 이후에는 글만 추가하기 때문에 아주 빠르게 블로그에 글을 올릴 수 있습니다.</p>
<hr>
<h2 id="speed-metal-stack-설치하기">Speed Metal Stack 설치하기</h2>
<p>일단 아래와 같이 설치하면 아래 그림처럼 쭉쭉 설치해 나갈 수 있습니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx create-remix --template Girish21/speed-metal-stack</span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEi4TVkU-iCoLbotETQE1LwlJyGNv9glLcqiXitAXVP6t84z95GDTCmTBGIeJyDgyQoCqZrk-K-GV3dBFtdP-y-WC5JOkWahTJzGqdAD_yRqInDd3GXyn97WncUPO4Qjtje1yYs9g6Ay1ZhfX8x1FZtEW0dIvNLZjg31kS_bJrb3mEE13TvRNtRZeTLw=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림을 보시면 앱 이름과 그다음 Typescript로 개발할 것인지를 묻고 있습니다.</p>
<p>시간이 조금 지나면 npm install과 함께 설치가 완료되는데요.</p>
<p>Speed Metal Stack과 같은 풀 스택 프레임워크는 그냥 &ldquo;npm run dev&quot;를 하면 안 됩니다.</p>
<p>DB 부분을 먼저 설치해야 하는데요.</p>
<p>그래서 위 그림에서도 다음과 같은 순서로 실행하라고 합니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run setup
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">npm run build
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">npm run dev</span></span></code></pre></div>
  </figure>
</div>
<p>setup을 통해 Prisma를 통해 DB 부분을 설정하고, build를 통해 Remix 프레임워크를 한번 빌드합니다.</p>
<p>그리고 나서 dev를 통해서 개발 서버를 돌릴 수 있습니다.</p>
<p>일단 &ldquo;npm run setup&quot;을 실행하면 아래와 같이 나옵니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEh69CDhuOTU78YfaPD9p3Axjw55S-G_9oZleqFAriHgPm94K2zpO5zV38GCdmDTGW4l08NZrDlxeSTE6623CCIkFgMVsXwh1YTRtOz0EB0yqV8gAkiTubi_b-zFUJLUQZU9JVTwK7d3HnkHU7xW8aYPdO3cnXSpLCdocgyaspx24C_JRFj0DytOY7r6=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Prisma migrate와 blog 한 개를 만드는데요.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Enter a name <span class="k">for</span> the new migration: … </span></span></code></pre></div>
  </figure>
</div>
<p>위와 같이 나오면 그냥 아무렇게나 자신만의 마이그레이션 이름을 적으면 됩니다.</p>
<p>그리고 두 번째로 다음과 같이 나오면요.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">? What is the title of the blog?</span></span></code></pre></div>
  </figure>
</div>
<p>블로그 제목이고 그다음이 키워드, 그리고 그다음이 블로그 설명인데요.</p>
<p>여기서 엔터를 누르면 Vim으로 넘어갑니다. (제 맥북 기준)</p>
<p>여기서 Vim을 잘 모르시면 당황하시는데요.</p>
<p>&ldquo;i&rdquo; 키를 눌러 Insert 모드로 바꾸고 나서 블로그 설명을 쭉 입력합니다.</p>
<p>그리고 다시 &lsquo;ESC&rsquo;를 여러 번 눌러서 조작 모드로 돌아온 다음, (실제 ESC 한 번만 눌러도 됩니다.)</p>
<p>&ldquo;:wq&quot;를 통해 저장하고 종료하면 Vim을 나올 수 있습니다.</p>
<p>그리고 중요한 게 다음과 같이 나오면 무조건 &ldquo;No&quot;를 선택 바랍니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgItSenKugOVsPF5qD5ZEHNyiWd29fn1MSZYk1j8IPDnVQ2_pBsN9qx-_Ch_S8D9nsscdqf2_sQ1VbYAaeZynrEVgaSgwK2iU2CATutV4vLsVfRYh9FRbmHJGkTgc0aqSz8P9-95Pk5rylOog7yIM0LEcj9jHKOcWDvL-fkex439F3Pimuh4eDQe82W=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>&ldquo;Yes&quot;를 선택하면 해당 블로그를 사이트에 React 컴포넌트로 조작할 수 있는데요.</p>
<p>실제로 해보면 너무 어렵습니다.</p>
<p>그러면 실제 아래 디렉터리에 해당 블로그가 mdx 형식의 마크다운으로 저장됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg9h-foojNamt9va1hsfL_vRQF4c3Zb8CUJ1U-wkVGVlOaiF-GcBCynaIuiTqNzR5Fyw-Y--rNYNgReEo9WGi3AnjpUuosz0chgsaOMQJgh_OM97JvTZzjmOHVSyD4R2SsSr2itWvsfiwp0UJJ5HVT-6EmVvREoofpHUoSPhKUHHJ_bGQB3Bls30Kg5=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>파일 이름은 slug라고 하는 마크다운을 이용한 블로그 개발 시 사용하는 용어가 있습니다.</p>
<p>제목을 붙여 이어서 https 주소에 대한 경로를 유니크하게 만드는데요.</p>
<p>그래서 처음에 제목을 적을 때 날짜와 좀 더 긴 이름을 넣으면 됩니다.</p>
<p>그러면 맨 처음 만들었던 slug가 경로로 잡히니까요?</p>
<p>아까 위에서 만들어졌던 test.mdx 파일을 지우고 다시 만들어 볼까요?</p>
<p>다시 프로젝트 초기 폴더 위치에서 다음과 같이 입력하면 블로그 새로 만들기 배치파일이 실행됩니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run new:blog</span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhmeo_KR8NxuYCqAqS1oQApbo9B0PLG7N66y-rbealM3RrnFfHemQ67xj8X1CpH6AloeuKYjrCTVBDGT5SLnhBp0nvxsWU6KS6u9-Hf40earhxRuqrKAWPcp0c6KviwpoDSYpCRqKMMtbt8NUqtazx5SfyJCmK82pPT4U6f0tPftJdbrpdYvZ6ml12D=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림을 보시면 제가 입력한 title을 가지고 slug를 만들었습니다.</p>
<p>앞에 날짜를 적은 거는 파일 정렬용으로 넣은 겁니다.</p>
<p>이제 VS Code를 이용해서 우리가 만든 MDX 파일을 볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEito67ohumnbWKnvrhqRvZXlFNZ8v_2s-BNc8bpC_vfo9GUFbdBp4f_qe8ZwUJ5gMx5C23cQeD6Vm1ddJwHFoVV0iOd3-ZvITkGiJd0L_Dkm36ip1STExnucmX06IT6m23FgA__osaZthxFHDR7Y6HrJ2pNHBDqe1lPafZts1h7gWK_CEyKbmY-IseF=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>다른 정적 사이트 생성기로 마크다운을 접해 보신 분은 쉽게 이해할 수 있는데요.</p>
<p>여기서 팁을 드리자면 slug는 건드리면 안 됩니다.</p>
<p>DB에 유니크하게 저장하기 때문에 웬만하면 고치지 마십시오.</p>
<p>그리고 나머지는 고쳐도 됩니다.</p>
<p>그리고 마지막에 # 하나로 시작하는 게 있는데 여기를 전체 제목으로 다시 한번 고치고 블로그를 써 내려가면 됩니다.</p>
<p>아래 그림처럼 한번 해보십시오.</p>
<p>여기서 한 가지 팁이라면 마지막에 # 하나로 시작하는 라인에 제목을 넣고 그다음 줄에 무슨 말이든 넣어야 마크다운으로 컴파일돼서 DB에 저장됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjduAwAkpw7yBf9LUmaasZBWATjC6kdnkqf4Q8wEjmi_C-vGUZtEd9c38q_Kfv88b54Pwhak2J-6osfqmyeyrILJe3MyYzLW2np8OgXg5buI62s3UC71PziXRxQo6i9Gg2ulB8FeroZJqqKtXbZHUnpI2aulOHgD2EYTEDXBxUyvhCTdXCjCMGbWkjH=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위와 같이 slug만 건들지 말고 저장합시다.</p>
<p>그리고 터미널에서 다음과 같이 개발 서버를 돌려봅시다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run dev</span></span></code></pre></div>
  </figure>
</div>
<p>꼭 위에서 얘기했듯이 &ldquo;npm run setup&rdquo;, &ldquo;npm run build&rdquo; 순서대로 한 번은 실행해야 됩니다.</p>
<p>저 같은 경우는 아까 test.mdx를 지운 결과인지 한 번은 prisma.content.delete 관련 에러가 나면서 꺼졌는데 다시 &ldquo;npm run dev&quot;를 통해 실행하니까 아주 잘 실행되었습니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjAgoPF27G9kJQ6iTKkuf4mhRCHQLsTr11nXsfrtkIRkV5FYmjIVi8SX6nBaUz7zXqrR4RC7FsDh7ZZVYKp3ncFurqdHRmA01f_oFrBLl8IGmXC8VRXtmzcG0qe-rj1N18yLwXnDdsV45Kf3Ox52lhoAxfs0IT-kGx_AsJij6KDpBRdeXRTAi6WRQp5=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjn0BZ2Oc0GqeyhbpQRsufTp4ch39gXrblHzultLBMEm1VLzp23YX67trDWDM18R8ezSKhezF0FrE-rwS9ZIhYpr-2UR5qXpJNFi9K1MKvIGq2nEPjFrfRsIeOPnW38VeePn_LYsMWlgS1jvrBzC6yt4AX27YvnwMwtXLQWbZ1F8prMIPo1AOvPCm_s=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위와 같이 블로그의 메인 화면이 나옵니다.</p>
<p>제가 만들었던 첫번째 블로그의 글 제목과 설명이 나오네요.</p>
<p>한번 클릭해 볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjbZSf38h5G3q6dAhK3UUBb9LESmUe1jWQW6bJ2UqNprVsReCNyicc8nL2tnvGIEbX7nqDwBV5SnXt4whW5Cwz08goie9ZPL3auId4YzPfsMmmPOIrok6txScRH_8pEqSVms8zUjDdYAbG4ZmV2DGU1Q7VPdm2bPhfyijoO45flBaFbfAXFpSO_Kj8v=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>아까 제가 입력했던 곳까지 잘 나오고 있습니다.</p>
<p>이제 전체적인 시스템은 이해하셨나요?</p>
<p>&ldquo;npm run new:blog&rdquo; 명령어로 블로그를 추가하고 그다음 git commit만 하고 github에 푸시만 하면 알아서 서버에 저장되고 반영됩니다.</p>
<p>그럼 DB에는 어떻게 저장되어 있는지 확인해 볼까요?</p>
<p>일단 터미널 창을 하나 더 만들어서 아래와 같이 Prisma Studio를 실행합시다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx prisma studio</span></span></code></pre></div>
  </figure>
</div>
<p>위와 같이 실행하면 자동으로 웹페이지가 뜨면서 현재 &ldquo;Content&rdquo; 테이블 내용을 아래와 같이 보여줍니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg6uuY1UXpHAdwSHr9zlP5SFq5fX37XF-flTsDlvaiYu2Znl3IX0WI2sUueEOb0XTaCqFOjkltCHSCzAO33FKgLSoYF3OzVEBqHysDgkWgeVAuzSOcQbK3Ym1r9eYPj6pkdZ0lVetJfe86iowZj4ZrejEtjRBBUg6vv0NSPoinURdTtk92YiN6W3VqT=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>테이블 구조는 speed metal stack의 폴더 구조에서 prisma 폴더에서 schema.prisma 파일을 보시면 됩니다.</p>
<p>실제 우리가 쓰는 마크다운의 내용은 아래 그림처럼 Code 필드에 저장되는데요.</p>
<p>마크다운을 React 코드로 변환하는 역할을 하는 게 mdx-bundler 패키지입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEj4vFXLSoniyA6gESEOwqYyA7RseYjRVf41Icvk5UyTPR7NePVwux4yghsYtuDxHTbvt0Om8Suva7s9plhtMhLjNCtRAyanfDhmN6wOIb-5uCgcVvR8qhBvUSHRcoHksYKmWPajfIBnQWyQo3ru2ZFQw8UAjAbj4yc49sfdHUe1lPRsnCMCXDqNfRqT=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>그럼 실제 마크다운을 수정해 볼까요?</p>
<p>개발 서버를 돌리고 있기 때문에 자동으로 반영됩니다.</p>
<p>왜냐하면 아래 그림처럼 특정 프로그램이 마크다운 파일의 변화를 감지하고 있고,</p>
<p>변화가 있다면 스스로 컴파일하고 다시 DB에 저장되고 그게 다시 웹페이지에 반영되기 때문입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEiw94dWZunf47GXDhCWZm-HrT5Hrr_ESxqU1g1R8O7rdjbj9A8GBMuHEww2mQ1Spp6a4sDCHqPGf1WKzLiPe6Lzm55HsbadWu2nKbXR4T5FOtCAaLDb97-GAf4bUr5ISFY2pc4-16aY15ltdnrl3U9AdfRp3czsRiJp505I8aqMNOt6yIdosfN9hLfN=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Speed Metal Stack의 폴더 트리 구조에서 &ldquo;others&rdquo; 폴더로 가보시면 관련 파일이 있습니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg767jSrCfiX6OlInLwBJYtaf4qVc4kE1UGKVWx9nbt_dqFIWtufNysFjAIfaulQ1C1wQaF9wGqFVh0z0ri63IF6iQPO8Riq-zdvrqALqNRwPTyLQMpbw2RVjQBpyQrJj0uVxw5A2edtVNVx4KLLn1t_LKqf7sVLMTvGRNQnREaz-J1-dXppyD4HJmk=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>이름만 봐도 쉽게 알 수 있는 파일입니다.</p>
<p>이 파일들은 실제 NodeJS로 백엔드에서 실행되는 서버입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEiz3903e5GM8EAvamc7ePLuoRee-r9wuLr27kWHQ-CUpQSvZsoPJ4P1t7Ivbm6_1D1QmSqDAx1-aSoL4FioMlpG4ANrlBoLRGSLbTc8ang5r9Ir149sK-pRgTREqTc3vltyZ09pMmIgjaI7akh7nOfT1WNKm1CXOcW5SEEyvJDWDQgqjsT_nGmAiLPT=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림처럼 웹페이지도 리프레시되었습니다.</p>
<p>이제 작동원리에 대해 알아보았으니까 블로그 사이트의 전체적인 구조에 대해 알아보겠습니다.</p>
<hr>
<h2 id="speed-metal-stack의-리믹스-프레임워크-구조">Speed Metal Stack의 리믹스 프레임워크 구조</h2>
<p>일단 폴더 트리에서 app 폴더에 있는 게 리믹스 프레임워크입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEiV0aUKv8K4b6E6IkBGlsP0REzlSH8IYPoDi7G-YSGS1YRrIjPtzQI_eqOyd4X8RJTiCEbMyraDnCuE4zaTdsBTXn1P7cNaqjtTnZAGQGPVlVUZ81-JzOw-TdoysmZFDQRTDkrMNsEHI1WN3XlHKw1FZyO3qGaimVqmaOsQa-mVLLz2bGPQ5TLQ8NfI=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>가장 중요한 게 routes 폴더입니다.</p>
<p>주요 라우팅은 다섯 개 가 있는데요.</p>
<p>healthcheck.ts는 fly.io 서버용이라서 가만 나 두면 됩니다.</p>
<p>그러면 네 가지인데요.</p>
<p>index.tsx야 홈페이지의 첫 번째 화면이고, blog.tsx파일이 보입니다.</p>
<p>라우팅이 /blog에 해당되는 파일입니다.</p>
<p>그리고 동적 라우팅인 blog.$slug.tsx 파일도 보이는데요.</p>
<p>제 블로그에는 제 스스로 디자인해서 레이아웃을 조금 바꿨습니다.</p>
<p>이건 스스로 하시면 될 거 같고요.</p>
<p>blog.rss[.]xml.ts 파일이 있는데요.</p>
<p>경로가 blog/rss.xml 파일로 들어가면 아래 그림처럼 제 블로그 글 목록이 쭉 나옵니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEj8uD9Mv2ClfF4gT-iDtsh3QkfJir_k-f6bmpiI9MLvaUoXaRAvrd8eCFhj4OBa1Ksy4-HJA0e6VNu7bDuBk3Z4HWuHTSwomlLWjFPVFsvbVY5pez9KyjNpdVe9dRx54Pj8-cuBqXBXZkBAO4hqdKXvFYV8CDYPB3nSZHec9hco398dqwNSHNAf5VhC=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>검색엔진에 제출하는 용도입니다.</p>
<p>그런데 우리나라 다음이나 네이버에서 쓰는 sitemap.xml 파일은 없네요.</p>
<p>그래서 제가 하나 만들었습니다.</p>
<p>routes 폴더에 sitemap[.]xml.ts 파일 이름으로 아래와 같이 만듭시다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">type</span> <span class="p">{</span> <span class="nx">LoaderFunction</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@remix-run/server-runtime&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">invariant</span> <span class="nx">from</span> <span class="s1">&#39;tiny-invariant&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">getMdxListItems</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;~/utils/mdx.server&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">getDomainUrl</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;~/utils/misc&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">loader</span><span class="o">:</span> <span class="nx">LoaderFunction</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">({</span> <span class="nx">request</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">posts</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">getMdxListItems</span><span class="p">({</span> <span class="nx">contentDirectory</span><span class="o">:</span> <span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="nx">page</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">itemsPerPage</span><span class="o">:</span> <span class="mi">100000</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">blogUrl</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">getDomainUrl</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span><span class="si">}</span><span class="sb">/blog`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">sitemap</span> <span class="o">=</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;urlset xmlns=&#34;http://www.sitemaps.org/schemas/sitemap/0.9&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;url&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;loc&gt;https://mycodingshub.github.io/&lt;/loc&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;lastmod&gt;2022-07-23T13:02:06+00:00&lt;/lastmod&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;priority&gt;1.00&lt;/priority&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;/url&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;url&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;loc&gt;https://mycodingshub.github.io/blog&lt;/loc&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;lastmod&gt;2022-07-23T13:02:06+00:00&lt;/lastmod&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;priority&gt;0.80&lt;/priority&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;/url&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">        </span><span class="si">${</span><span class="nx">posts</span>
</span></span><span class="line"><span class="cl">            <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">post</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kr">const</span> <span class="nx">frontMatter</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="nx">frontmatter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="nx">invariant</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="k">typeof</span> <span class="nx">frontMatter</span><span class="p">.</span><span class="nx">title</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="sb">`</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">slug</span><span class="si">}</span><span class="sb"> should have a title in fronte matter`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">invariant</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="k">typeof</span> <span class="nx">frontMatter</span><span class="p">.</span><span class="nx">description</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="sb">`</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">slug</span><span class="si">}</span><span class="sb"> should have a description in fronte matter`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">invariant</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="k">typeof</span> <span class="nx">post</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="sb">`</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">slug</span><span class="si">}</span><span class="sb"> should have a timestamp`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;url&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;loc&gt;</span><span class="si">${</span><span class="nx">blogUrl</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">slug</span><span class="si">}</span><span class="sb">&lt;/loc&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;lastmod&gt;</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">()</span><span class="si">}</span><span class="sb">&lt;/lastmod&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;/url&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">                `</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="si">}</span><span class="sb">)
</span></span></span><span class="line"><span class="cl"><span class="sb">            .join(&#39;\n&#39;)}
</span></span></span><span class="line"><span class="cl"><span class="sb">&lt;/urlset&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">  `</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nx">sitemap</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/xml&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;Content-Length&#39;</span><span class="o">:</span> <span class="nb">String</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">sitemap</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>원래 있던 blog.rss[.]xml.ts 파일을 참고로 만들었습니다.</p>
<p>이제 sitemap.xml 파일을 볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhG9FdU0ucSIc1VqlMZjreRyJKbjUuft3Y08_vxfU2tqXIstOzxzVUHWWCkZ1Hftsq18UI1_0IkTAIktyZx6I-x79I3Y2CxsMooWykUfDf8X97DSAiVJ4klBrPTIxkDVFYh4UiBxzBRvdkTe8ObVqT0Mhz_yio0DT0_Tz2vH-MLJaiwWjho4Sk5HQle=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>이제 sitemap.xml 파일까지 자동으로 만드는 블로그 시스템이 완성되었습니다.</p>
<p>그럼 이제 배포만 해야 되는데요.</p>
<h2 id="github-action과-배포">Github Action과 배포</h2>
<p>이제 블로그 시스템을 본인이 만족하는 디자인으로 개편했으면 Fly.io 사이트에 배포해야 하는데요.</p>
<p>Fly.io는 좀 신경 써야 할게 많습니다.</p>
<p>일단 <a href="https://fly.io/app/sign-in">fly.io</a>에 가입해야겠죠.</p>
<p>아래 그림처럼 Github 아이디만 있으면 연동됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgyOstrNCuXDq-uaUxrRmMdl-NjGzXVUsNkByAgtPKKb9kHLOowoVQdoizWTlbhDqZ72aH8JW_rp5OwOOFC4E-DkhsL6R6b5_DuKWV_O261tItHfXGAiikiU_vcPTpLG0VCh_-4XtbLkfIeQPMeKYukwNUspzJokGFi6-pPMUONjeQ7HDNM5MgCCdPt=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>가입하고 나서 아래와 같이 &ldquo;flyctl&quot;이라는 fly.io 커맨드 라인 명령어를 설치해야 하는데요.</p>
<p>일단 설치했다고 가정하고 다음과 같이 터미널 커맨드 라인에서 아래와 같이 입력하여 fly.io에 로그인한 상태로 만듭시다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjKM5afE9OTnZjK-N4q93dqKMxrrIRpkfpVtz4HBuWPmSR8kebalLbdj_ay164azMx7AZFzdoAZNrLR0gq0udGhcCQGAvYcwAguHWp3iSvlNh4Sj75DvTEChMN918amd4X_kxacal_oXON5f7XY30gh2llt5cGITI8f1aab2MNsDPNEMeEt5c8PcVXs=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>일단 Deploy를 진행합시다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEghE6V4LetAVzd5N_sfwD-HJWP0DADn602tznU1GimWkMh_8RzFAZ7NxPLnPFqRPSBJraIhH_1iS1jc9lmExxYHzn4P8ho32DDzrFqTi2foUpX8GyXsY0JtkwBXUFEL6_sjb3DsQjNTtITjepKTVoT35kx_G4GXyt59mNjBxADE1vudWsv5Z9iPtpmw=s16000"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>위 그림처럼 flyctl 명령어를 통해 YOUR_APP_NAME을 만들어야 하는데요.</p>
<p>YOUR_APP_NAME은 나중에 인터넷 주소가 되기 때문에 나만의 이름으로 유니크 한걸 만들어야 합니다.</p>
<p>일단 fly.toml 파일을 엽니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">kill_signal</span> <span class="o">=</span> <span class="s2">&#34;SIGINT&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">kill_timeout</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="nx">processes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">app</span> <span class="o">=</span> <span class="s2">&#34;speed-metal-stack-3fd7&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">env</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">DATABASE_URL</span> <span class="o">=</span> <span class="s2">&#34;file:/data/sqlite.db&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">PORT</span> <span class="o">=</span> <span class="s2">&#34;8080&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">experimental</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">allowed_public_ports</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">auto_rollback</span> <span class="o">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">cmd</span> <span class="o">=</span> <span class="s2">&#34;start_with_migrations.sh&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">entrypoint</span> <span class="o">=</span> <span class="s2">&#34;sh&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">mounts</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="nx">destination</span> <span class="o">=</span> <span class="s2">&#34;/data&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">source</span> <span class="o">=</span> <span class="s2">&#34;data&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">services</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="nx">internal_port</span> <span class="o">=</span> <span class="mi">8_080</span>
</span></span><span class="line"><span class="cl"><span class="nx">processes</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&#34;app&#34;</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">protocol</span> <span class="o">=</span> <span class="s2">&#34;tcp&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">script_checks</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="nx">services</span><span class="p">.</span><span class="nx">concurrency</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">hard_limit</span> <span class="o">=</span> <span class="mi">25</span>
</span></span><span class="line"><span class="cl">  <span class="nx">soft_limit</span> <span class="o">=</span> <span class="mi">20</span>
</span></span><span class="line"><span class="cl">  <span class="nx">type</span> <span class="o">=</span> <span class="s2">&#34;connections&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">[[</span><span class="nx">services</span><span class="p">.</span><span class="nx">ports</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">handlers</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&#34;http&#34;</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">port</span> <span class="o">=</span> <span class="mi">80</span>
</span></span><span class="line"><span class="cl">  <span class="nx">force_https</span> <span class="o">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">[[</span><span class="nx">services</span><span class="p">.</span><span class="nx">ports</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">handlers</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&#34;tls&#34;</span><span class="p">,</span> <span class="s2">&#34;http&#34;</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">port</span> <span class="o">=</span> <span class="mi">443</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">[[</span><span class="nx">services</span><span class="p">.</span><span class="nx">tcp_checks</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">grace_period</span> <span class="o">=</span> <span class="s2">&#34;1s&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">interval</span> <span class="o">=</span> <span class="s2">&#34;15s&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">restart_limit</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nx">timeout</span> <span class="o">=</span> <span class="s2">&#34;2s&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">[[</span><span class="nx">services</span><span class="p">.</span><span class="nx">http_checks</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">interval</span> <span class="o">=</span> <span class="mi">10_000</span>
</span></span><span class="line"><span class="cl">  <span class="nx">grace_period</span> <span class="o">=</span> <span class="s2">&#34;5s&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">method</span> <span class="o">=</span> <span class="s2">&#34;get&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">path</span> <span class="o">=</span> <span class="s2">&#34;/healthcheck&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">protocol</span> <span class="o">=</span> <span class="s2">&#34;http&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">timeout</span> <span class="o">=</span> <span class="mi">2_000</span>
</span></span><span class="line"><span class="cl">  <span class="nx">tls_skip_verify</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">  <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>위 파일에서 app 부분이 YOUR_APP_NAME인데요.</p>
<p>원하는 이름으로 유니크하게 만들어야 fly.dev 도메인에서 유니크한 이름이 됩니다.</p>
<p>일단 우리는 그냥 그대로 나 두겠습니다.</p>
<p>그러면 최종적으로 인터넷 주소가 https://speed-metal-stack-3fd7.fly.dev 가 됩니다.</p>
<p>이제 터미널에서 다음과 같이 입력합시다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl auth signup
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">flyctl launch --name speed-metal-stack-3fd7 --copy-config --no-deploy</span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgYuK5iA795ppr89LCcgzZrShMrfjyOzvZJ-qqwV9h1Z-M-Z41G7a7vgPUTkMQEg45F02iFIrnRvnicLFDrQRJMJJw_Z2HH7n1h3RhDooKku2nioA1k9WXvxPhsSaCVA36De_G1SbniCMySI27DUDUL8M2-wdqfYE8ErAGF1LQm1UBeRLjZBeNMZwim=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>signup을 실행하면 브라우저가 뜨고 로그인하라고 뜨는데요.</p>
<p>브라우저에서 github 아이디로 로그인하면 위 그림과 같이 로그인이 성공했다고 나옵니다.</p>
<p>그리고 나서 그다음 명령어를 실행해 볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhknFALcYX-7gGpX5l2w7ThH-5yx4SK_132VZwOw7oS_lrcMimfXeSn9ZV-lnyn-uEKe70oCYtWFC3IphRmSRHlFiw-qE9nmGtrssVd68EaTtYeOGix7NAG559Q747fUgdr4KwbC3RpnDKnCjWYiMgJAK47C82imoStlnHjW4bM9VU9NfDIMnqnW-BO=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위와 같이 나옵니다.</p>
<p>저는 한국이랑 가까운 일본 쪽 서버를 선택했고요.</p>
<p>엔터를 누르면 최종적으로 아래와 같이 나옵니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEj6LWmnCAQV1W_fIOcdyK_aew-3x7K8idnW5ZKg1Rv4fXbkNEWEbnDp24f-FOE3T0rTe4T7TkjzmgaI9wqTBhfHfdyetfaZiIsGVrGEybURDjRhUhqh5KB6Vv2LF11cUNTwbHWFO5z6YS18PVF_Ycf4jEqW3sbhNyN49O4SFK7JhCc6T1cyc48yBbCV=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>이제 Deploy만 남았다고 알려주는데요.</p>
<p>절대 아닙니다.</p>
<p>이제 Github Action 관련 설정을 해야 하는데요.</p>
<p>Fly Auth Token을 받아야 됩니다.</p>
<p>다음과 같이 터미널에 입력합시다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl auth token</span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjPgmDepQj_M35iYkduNFASgJkEPYzYoTfBJKm8acqIfhV57lZAYTRl18qgmzH-j4IsOTXU5qwRjmyR933BjcOrjZIHXR7bKeX7EkZIydRbm_3eAzIjQEu00QozNoe9KRgbNo8G_In6esend9YMyGix-JvZWqa-IiNQfJVptkE7tOnZvPlLZMzjfnCw=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림같이 Fly Auth Token이 발행되었습니다.</p>
<p>문자열을 잘 복사해 놓으십시오.</p>
<p>이제 이 토큰을 Github Action 관련 토큰으로 정리해야 하는데요.</p>
<p>Github 사이트에 가서 Repository 하나를 우리의 폴더 이름이랑 똑같이 만듭시다. (이름은 틀려도 됩니다.)</p>
<p>그리고 나서 아래 그림처럼 새로 만든 github 리포지터리 Settings로 들어갑시다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEixEXv5m6IW76dDH08DZEyPWfsTTq9QKIBBDH2xCpcCQSfPwslzVbF1sQj2TeJrv-7fKV9GW_nGPEU6mZreTndO4kW-XVtKyR50totuDVb0j8GKH3klWSNNvzf0Vr7MTbP5sMhLxtMR45HvYljvpExGrUdg0lkvD9mVOR17lb2YWndL7JKuReXnqC-K=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>아래 그림처럼 Secrets에서 Actions 부분을 선택해서 들어갑니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEinq_7WqpxneSxVDNf9XDWZcmetwFUVxQ4c6dfWtPFZXe_43Sv8mK30QDg5RkCvS-dlYx5Eh2ZnTRG_ngAU3BI1-oUhbRaTSIT-9dR71yYWKTM7hHlCffsTMXzgVG2PpCJ_P025LjUxtXcBdx1qCQTgrwBDdqBMLVMe03wwtZU0gOm-I2iDbWcj18zm=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgT7iiv9GWTxjgQtf1iRzYAn2UrXvLpKeGJaSA3dQ2TH_oxo9b7SaAi_9mQWVuCfLSURJSRgXF3_VCkMaWqTGmnvaqatEPh70j4FQ7w8lUWpH4vKSVcJYprcIzu_y4ADddNamy1CzJUl2D1DQBlwQ4n5RyyC9UpZ1qrhaE8qO2EEogiYfkfRTrxq-He=s16000"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>그리고 나서 우리의 Secrets를 넣어야 합니다.</p>
<p>&ldquo;FLY_API_TOKEN&quot;과 &ldquo;FLY_APP_NAME&quot;입니다.</p>
<p>아래 그림과 같이 입력하고 저장합시다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjn9q-tVG4FsTzwwnUSqout1BukOU7kec8T_Bj14cgSH_XuK7p76DTUQ9BZ3hq2DBufGTQ4ARuYUNPXUai2yCO74bRgqcXxdwFyv_Es6-G7-_Ui86kuf1_pPMRE45ppCji_O7g6anzPwAgT4p-TvgzSTnzGW8W3OomRvkKg7AZocGgG-Ep7yTbACdSc=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjylohj440tBVlP4ovLPDlDmKQcjT5egTKyAmMmQ7EmX58BBxViSh2cdTlTJV5_kLVYnIp_Rwa5saFf04jsqs_D_SNdWpF1mrd_ZFfjAvWnwwF1aEE_qsTMmg2vi2vCfm9hUViGdwuUBcIgKbrxVeo_v3wlJES5eYPNHdf-UFr4kICydkjlyAAbYtr-=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>이제 입력을 다했으면 그다음으로 필요한 게 Github Auth Token인데요.</p>
<p>지금까지 넣은 거는 Github Action이 Fly.io를 제어하는데 필요한 토큰이랑 정보고, Github Api Token은 콘텐츠(블로그)가 업데이트됐다는 정보를 Fly.io가 알아야 하기 때문입니다.</p>
<p>일단 Github 계정에서 Personal Access Token을 만들어야 하는데요.</p>
<p>아래 그림처럼 따라 하시면 됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgMeo-0vtzHILg4omPC1XljZG6lYW_DwsXwmR5a5KBkSIuoZx7spBvAh7OstkeAoHjgSqDKA9XNU-81j-Bj4U_7ZYXHPXYvsZX3pHipCmB48ooSTnsAhMOyT-ujEC_QRByNy2Oi0C6Joy87oxxpMUm1jE2EthsM6d7emO_Q6Nzx7_9rMWdTnfU3O5uk=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg1_z_n-ky0_d1eY5WnUjpxMcEPX236gKm2u7hDikeoDecr9gUHSSRbMfzAij2tU5R1tyeFugF8aM6_gtWlTKWUjQ7TuKsCP2FE0S52RF5drHzYApTPSYDlTKEp-dilebUjXo6vqviw15HvqD9--UxQsX7bn3ovGgXbdLnc5jB4Q7pCHFhdRAtvRrCB=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgHVj8aMG2BeIdk0chcM932KXhiT219ufW4K0lhUxu_mXDeCsoBtvP2U8CHRPw0sLcn38J3kgCMm5ZBdfkaWJQ33oXxCfzUUv46QQqVUIBYUS6vHXxSTJOaj1JfXMDaCcfaJEfNvCPSxIv-jZEFIKuLfaUwX0yP-Zrp5uAGraWU_iyIcyv6bTmyNE-J=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEh7mpgf1-OAYvnVC5mmUnHeODfnRfRmfwXGp_aew8U1lvyS4FCAngLi-FKzqmLqHzTrXc44tCck7pzIhvG8e1zj1x3kVp5SENsaCT7tUVmWjJW-HAuGJ027PD7l9HFpxXiWV8hp1ZXw0pOIwgxVEwaSDmoXalOWybG3uxSiMp2D-v7S6vBrQcx7yXx7=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림처럼 하시고 마지막에 권한 부분에 repo 부분을 체크하시면 됩니다.</p>
<p>맨 밑에 &ldquo;Generate Token&rdquo; 버튼을 누르면 토큰이 나오는데요.</p>
<p>이걸 꼭 어디다 복사하십시오.</p>
<p>한번 보면 사라지니까요.</p>
<p>g_~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>
<p>이제 Github Token을 얻었으니까 Fly.io에 알려줘야 합니다.</p>
<p>다음과 같은 명령어로 알려주면 됩니다.</p>
<p>Speed Metal Stack의 Github 사이트에는 다음과 같이 하라고 나오는데 절대 다음과 같이 하면 안 됩니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl secrets <span class="nb">set</span> <span class="nv">GITHUB_TOKEN</span><span class="o">={</span>GITHUB_TOKEN<span class="o">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>위 명령어에서 <code>{}</code> 부분을 빼고 아래와 같이 입력하시면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl secrets <span class="nb">set</span> <span class="nv">GITHUB_TOKEN</span><span class="o">=</span>g_~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 실행 결과</span>
</span></span><span class="line"><span class="cl">Secrets are staged <span class="k">for</span> the first deployment%</span></span></code></pre></div>
  </figure>
</div>
<p>정상적으로 됐으면 위 코드의 실행결과처럼 나올 겁니다.</p>
<p>이제 SESSION_SECRETS가 필요한데요.</p>
<p>다음과 같이 만들어주면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl secrets <span class="nb">set</span> <span class="nv">SESSION_SECRETS</span><span class="o">=</span><span class="k">$(</span>openssl rand -hex 32<span class="k">)</span></span></span></code></pre></div>
  </figure>
</div>
<p>그다음으로는 Github과 Fly에 똑같이 만들어줘야 하는 게 있는데요.</p>
<p>바로 REFRESH_TOKEN입니다.</p>
<p>이게 있어서 블로그 글이 새로고침이 될 수 있습니다.</p>
<p>일단 다음과 같이 난수를 만들고요.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">openssl rand -hex <span class="m">32</span></span></span></code></pre></div>
  </figure>
</div>
<p>위에서 나온 난수를 아래와 같이 먼저 flyctl로 fly.io에 전달합니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl secrets <span class="nb">set</span> <span class="nv">REFRESH_TOKEN</span><span class="o">={</span>GENERATED_PASSWORD<span class="o">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEiRCR0T351h9q68fefAUdd4tWCRNWExyp0kwk-6HuR9KQcz3goulrfAVAea5K39Yh4msfho2Fj1i0IB5cb7LVByWUZkLwulN7ExeYARhsdVJX-1YH4gJhgTZKFekF7VVYkNQXtCazmx7ri8tAqIK1XjwIv2frEnSjvmQ6E51zbVobXlFpawVaRqbax2=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>여기서도 꼭 <code>{}</code> 는 빼고 입력해야 합니다.</p>
<p>그리고 Github 쪽에서도 아래와 같이 Secret를 추가합니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgD7cTG1c_4A1Keo6bagfXeDLonzPuOs2zpYwA-Udf9ZVEIj7ZpIlpQIKj6SnpsOVtca_SQkiWY5OvCLNM1CQ3Wy-gRFnrDfoDvgN_Q-iQp-UNQQrv7wgEPe39XqE9Gd-endKRkJtII_XgwqMzYAc1IrcTG3n6G_tODkRLaUgHhjscMTOwzH5f0nkJf=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Github 쪽 Secrets는 아래 그림과 같이 총 3개입니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhvLr7eYvA3V9UWxL30XSckqrKQx3XqBhKYcoEZ_0-bgInT5fIWiWbYowndeVYjSc0sMae_ttdACFz2tWwrbJz4Sx49qBwCz-44c4Hm4eE7NrBAQpXnAHenWAeYsZZaz9sXTD3YanEWbx_3SRrPiimYE3CcvkePP0r8E1w6XV-GBerlKOb8aEyZwxMI=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Fly.io 쪽 Secrets는 아래와 같습니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg_znsvUV8fVfOH_cWsGyW4gvVUqMSe7Ql9IRPLbEBeTHjfGRWztI9bk80SI7tXwUt69hlxcCi2aP8lBiNSqoLDWjEp06Fo9bJsniOjhiVLCFyO8LjGoI8UWZTkgrfYHpJuSOQ6SHw99hqZ7IqNE0NZPtwQLbbi5V4kjltO67WheevAJTQKb86YEO9H=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>이제 fly.io의 서버 용량을 정해야 하는데요.</p>
<p>1기가, 2기가인데요.</p>
<p>아래와 같이 터미널에서 실행하시면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl volumes create data --region <span class="o">[</span>REGION<span class="o">]</span> --size <span class="m">1</span></span></span></code></pre></div>
  </figure>
</div>
<p>여기서 [REGION]은 서버 지역인데요.</p>
<p>우리는 도쿄에 설치했으니까 &ldquo;nrt&quot;입니다.</p>
<p>그래서 다음과 같이 입력하시면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">flyctl volumes create data --region nrt --size <span class="m">1</span></span></span></code></pre></div>
  </figure>
</div>
<p>이제 서버는 준비가 되었는데요.</p>
<p>마지막으로 &ldquo;flyctl info&quot;를 실행해 봅시다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhXtltAmeCn4dYhiFKg61tYI12TaEB9oTiG6e396o-FLLS99jAERBx1Jbh3rRi0wJ_ZGSoX799eZ-qMl4jWB4sHVbsLSYEuWgrGxSjMKY2yQpT5Vfr0fCzZwo7QdBd4RO0lYAmqZttewqlpzOEvSDUdcOSaxlaau4HETUHcb5HpiClto2kOpNE3hoBD=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위와 비슷하게 나오면 성공입니다.</p>
<p>그리고 <a href="https://fly.io/dashboard/personal">fly.io dashboard</a>에서 확인해 보시면 아래 그림처럼 우리가 만든 사이트가 보일 겁니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEil0KnVTJb2Rgvoov5ZAiCqq0NQIcw7Po3FvxYlUnbOTIzD4St6Wxdxn6m4QGyRAkZgW4sCLIMKEjzYeCDznIr2LAw984SxTJgqx_E1z68zQeoSi6Sqhr8fg5JNFjWEb5XxnvWWGlz1TkTFzmjdQfARXU3tgmynBMbH1ql0aHPqPSY5D9LCj3nduO4_=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<hr>
<h2 id="github에-푸시해서-flyio에-배포하기">Github에 푸시해서 Fly.io에 배포하기</h2>
<p>Github Action은 자동으로 Fly.io에 배포해주는 유용한 명령어인데요.</p>
<p>우리의 프로젝트 폴더 트리에서 &ldquo;.github/workflows&rdquo; 폴더 밑에 있습니다.</p>
<p>여기서 deploy.yml 파일에서 필요 없는 거는 지우셔도 됩니다.</p>
<p>이제 우리의 폴더 트리를 git으로 만들어야 합니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">➜  speed-metal-stack$ git status
</span></span><span class="line"><span class="cl">fatal: not a git repository <span class="o">(</span>or any of the parent directories<span class="o">)</span>: .git
</span></span><span class="line"><span class="cl">➜  speed-metal-stack$</span></span></code></pre></div>
  </figure>
</div>
<p>실제 git 리포지터리가 아니네요.</p>
<p>git init과 git add, git commit을 합시다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git init
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">git add --all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;first commit&#34;</span></span></span></code></pre></div>
  </figure>
</div>
<p>이제 github과 연결해야 하는데요.</p>
<p>다음과 같이 입력합시다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git remote add origin https://github.com/cpro95/speed-metal-stack-test.git
</span></span><span class="line"><span class="cl">git branch -M main
</span></span><span class="line"><span class="cl">git push -u origin main</span></span></code></pre></div>
  </figure>
</div>
<p>위 명령어를 입력하여 Github에 우리 코드를 푸시하면 자동으로 다음과 같이 Github Action이 작동합니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhVID441kVI85vlfXM5p3Lwq9R10XXarj0HeEth6cq4HKrj5GyyTop9Js7bUD-0fjmsU-IsGKcHEyYU2hSDOibjryIovujh_uDByfMqV72fso8OXJ03WYipFiBrPqSs9GsCdO0b318wFGB9VsrL4Mx2mG61XajoUzTOGcJcwcE4CVmutw0PSnvmQn83=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEj5hoIhM8-yj_Z4YNlYUubj5TmVh4KgMAAyqqNIvPGPNRXtPeOk5Yx_RWTb1Ojf43aeelmZMbQbX3QCAwi4kZYPVZoQC5cuixgCSnOGpsLs-ki3gdhTGnI0MbARzXOu6gJd-8s6mOxsbSFjURjtOImpRZeLZ4ng6x0LrtbGIDZH7ZR2aJPZvjuwnLaG=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgKf2Tn1x01931S3eNTTIfjti-Yuapo2FZlPaoBfdm3RhhyL-308V9Dv4N4-hHiyaHJ7K2WJv6U3-6ZQPCqlOq9kTsgrMs1K9IB96yGNfaeQJR-af-FpdbNZmmrDTWaikj_ufN-QjS7aqP-M8GZItEtrDTLV1igsKtqA3mOO4HDsnnH1FemE_JnoELk=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>실제 콘텐츠 리프레시 부분과 사이트 빌드 부분인데요.</p>
<p>사이트 빌드 부분이 상당히 오래 걸립니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjF1X5AfrFk59_dqkLMqukpFLyrD_GQjpUIbuDDLnh9UqvRvoUEL-z2gz035mBUohezcbaG_uUq3qmGaxgD9HLELg3ZmRv9FEznY1l7KBC9Ylq2Q6Ws0CBzB0rYMXmcEebV9fTgwCE_ATjTsAsneogdrjiM_-4wuFgS6jYRPKOTkDYEB2PlHCL43S4A=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>저 같은 경우 Typescrip 쪽에서 에러가 났는데요.</p>
<p>그래서 &ldquo;.github/workflows/deploy.yml&rdquo; 부분에서 typescript 부분을 지웠습니다.</p>
<p>왜 그런지는 잘 모르겠습니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">deploy:
</span></span><span class="line"><span class="cl">    name: 🚀 Deploy
</span></span><span class="line"><span class="cl">    runs-on: ubuntu-latest
</span></span><span class="line"><span class="cl">    needs: <span class="o">[</span>changes, build, lint, vitest, typecheck<span class="o">]</span></span></span></code></pre></div>
  </figure>
</div>
<p>위와 같이 deploy의 전제조건이 있는데 다음과 같이 생략했습니다.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">deploy:
</span></span><span class="line"><span class="cl">    name: 🚀 Deploy
</span></span><span class="line"><span class="cl">    runs-on: ubuntu-latest
</span></span><span class="line"><span class="cl">    needs: <span class="o">[</span>changes, build, lint<span class="o">]</span></span></span></code></pre></div>
  </figure>
</div>
<p>이렇게 하고 git add와 git commit, git push를 새로 하십시오.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgekhXUTYGkWGPnD8OL_ig5poKvJqjzBN7z40gBUW6XmR-KnBFsaZOfOowmwaqgS5sNQ602d17tWC3jSBNLLp3eyPLK2blMqLRuNmCOHluu2rVCDTBLtVvFyKnJo_KPH6B3vjn71-iYRhzwrNcmG9LLrMq7Jx-bJrsmoZXEbZAH-j5WDNOVS6_2JXOf=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>그러면 github push와 함께 또다시 Github Action이 다시 실행됩니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg9g-Y4XPRgMLmzQRWi5bcloiXC8dNFJJDvc62IoIZ76tQF5iJerhJgcPLGx7-s0DmyS-2cLcwRRm42REvtQ41nT3CLTr8JCgKiiluEsO4OEV6mxqLgObGw9WByNtoGD48BpH3z0LVt0epL20s0KzChvRxdZ6nUAzOKUdV8lI-Wjayl_7n4q1SvTvGy=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>아래 그림을 보시면 아까랑은 필요충분조건이 조금 틀려졌습니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhppcZmR3s2XZM5zH96-RnK03XPNPnF5qD4KUzYRQw1fr2O9AkIEfT1bjRdbOUTlsIBv3N3lDEx6lPJJoUSnrCMPuyrVpk82APy9a-FQTwhUjexkecmaQaQmQY_6pjpJZTDSMwgoOGHv2mca5kkb3XXJzX7jBdCj6mkiMVNua4eehCzmtO9qHFCg0iC=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Build 부분과 Deploy 부분이 상당히 오래 걸립니다.</p>
<p>그래서 Site 전체를 개편하려면 로컬에서 충분히 테스트한 후에 Github Push 하시기 바랍니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEiT9aJHZH8gCPLL2t9HqylwEcbB1yXbYHysuGKYLLo3yjXhh9klH3zixwSZdQH3RCFVIypqxe8oISg6xOLDLaKLQbGbKa7fYQiOpaR6D8SdtY7DdSARA_-Rlg5woXDYZaNOTlYNyi2BKeXDkrtjxpeuQEFVacdHGqGBF0129ATQlO9qPImgO60UHMzY=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>저는 약 4분 넘게 걸려서 배포가 정상적으로 완료되었습니다.</p>
<p>이제 fly.io 대시보드로 가볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjDS4-r5Zpu2P-zFpCzgWz02uL12r98_Bk1FnmtbgWuCVh6ceWEbWwGwkJL0bt5jzhHWMtk3h-XkFYPF4kAeUts91sG9EME4T2-bPnGqVTZyLH0jb0hD0p8kyV9DfJwSN0atbT6LaMQfg80y6E8soMv3i_Hj7gSp8wz9BOYi4uNDFZEpKVjulnJQmOc=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>정상적으로 잘 작동하고 있고 주소도 나와있네요.</p>
<p>한번 연결해 볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhC8Nri11H4S2YR7hoF-Zm7xkUn3LhEtTQl56bZqC1VYzambfgmFF_SnQSLXQ-XAxWnIRaVdDGw5BkyAt0GTChorLHT7v7ryj-wxPUNv5PewtiuL57SfWWKsiToqUFcnVQpoGYgQ9BZeUvPOpAnw2JmSV7IIPr3S1YBHGjx_qWIRyB4tesRXjrKZOt6=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>서버와 아까 작성했던 블로그가 잘 보입니다.</p>
<p>대 성공입니다.</p>
<p>어떤가요?</p>
<p>나만의 마크다운 형식의 블로그 사이트가 생겼네요.</p>
<hr>
<h2 id="에러-수정">에러 수정</h2>
<p>Speed Metal Stack은 서버 사이드 쪽 코드가 많은데요.</p>
<p>Fly.io의 도쿄 서버나 DNS 문제로 인해 blog 콘텐츠가 리프레쉬가 제대로 작동하지 않는 문제가 있습니다.</p>
<p>Github Issues에도 올라와 있고요.</p>
<p>고치고는 있는데 어떤 문제인지 한번 테스트해볼까요?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl"><span class="nx">slug</span><span class="o">:</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="nx">how</span><span class="o">-</span><span class="nx">i</span><span class="o">-</span><span class="nx">built</span><span class="o">-</span><span class="nx">my</span><span class="o">-</span><span class="nx">blog</span><span class="o">-</span><span class="kd">with</span><span class="o">-</span><span class="nx">speed</span><span class="o">-</span><span class="nx">metal</span><span class="o">-</span><span class="nx">stack</span>
</span></span><span class="line"><span class="cl"><span class="nx">title</span><span class="o">:</span> <span class="nx">리믹스</span> <span class="nx">스피드</span> <span class="nx">메탈</span> <span class="nx">스택을</span> <span class="nx">통해</span> <span class="nx">블로그</span> <span class="nx">사이트</span> <span class="nx">만들기</span>
</span></span><span class="line"><span class="cl"><span class="nx">date</span><span class="o">:</span> <span class="mi">2022</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">05</span><span class="nx">T06</span><span class="o">:</span><span class="mi">23</span><span class="o">:</span><span class="mf">11.527</span><span class="nx">Z</span>
</span></span><span class="line"><span class="cl"><span class="nx">description</span><span class="o">:</span> <span class="nx">리믹스</span> <span class="nx">스피드</span> <span class="nx">메탈</span> <span class="nx">스택을</span> <span class="nx">통해</span> <span class="nx">나만의</span> <span class="nx">블로그</span> <span class="nx">사이트</span> <span class="nx">만들기를</span> <span class="nx">만들</span> <span class="nx">수</span> <span class="nx">있습니다</span><span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="nx">meta</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="nx">keywords</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span> <span class="nx">blog</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span> <span class="nx">remix</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span> <span class="nx">speed</span><span class="o">-</span><span class="nx">metal</span><span class="o">-</span><span class="nx">stack</span>
</span></span><span class="line"><span class="cl"><span class="nx">published</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nx">리믹스</span> <span class="nx">스피드</span> <span class="nx">메탈</span> <span class="nx">스택을</span> <span class="nx">통해</span> <span class="nx">블로그</span> <span class="nx">사이트</span> <span class="nx">만들기</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">안녕하세요</span><span class="o">?</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">리믹스</span> <span class="nx">스피드</span> <span class="nx">메탈</span> <span class="nx">스택을</span> <span class="nx">이용한</span> <span class="nx">블로그입니다</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">서버에</span> <span class="nx">잘</span> <span class="nx">올라갔습니다</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">두번</span> <span class="nx">째</span> <span class="nx">테스트입니다</span><span class="p">.</span></span></span></code></pre></div>
  </figure>
</div>
<p>위 코드처럼 맨 처음 작성한 블로그의 마지막에 몇 줄 추가했습니다.</p>
<p>이제 git commit 하고 git push 해볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjkSDn_8eJChSM9D2OCBFuM6CVhFDJxORry3BUiPv5XaZBczC7fDg6eSnWWTd2To295l7ZjSRFJJnaRj3ryi_-Rm6DRuOLjAy30mBFgfoYUxwTh9JrTpa8WYX0lGF4R2zYidVpKs1dCNB8chYheArJ5iNsd_qgP-4dYw-SkDdXjleoM7bUvq2V00P-i=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Github 액션이 다시 일을 하기 시작하는데요.</p>
<p>실제 Deploy 부분은 아래 그림처럼 일은 하지 않습니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgLvZWUN1xp9PwHwMFKwXYhp-d3p8NhjXnxQgnJ72dRchcp2c8eZufGUaYWJkVVTP9_6BZ41VCjM7Zkn5W_CTrQEBEdM-hS7onCiZDJqN3zDZpMqlkEt6p-vem30l7cEo6NIyh_0Ykyo4Dnqy1-_-ioHrfmOnsixmLc4Tec_lLo_HfvybKegnaaJYJl=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>왜냐하면 Site의 Contents만 변경됐기 때문에 사이트 전체를 다시 빌드 및 배포할 필요가 없는 거죠.</p>
<p>그런데 Refresh Contents 부분에서 에러가 납니다.</p>
<p>아래 그림처럼요.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEh1iknnQnp5at2u9bA8piJvWNQrwfwk9eF4WOkRpfE-SpV9SLqdqaLu4V8shivI-GZCyEjYWxjlNCJu46nId4vzSznxcVcKR7m69s2qvldI5l73ckOTbb1viKxvP6ohJA2AkK8jvojK8EBOByDWG9xgE7QUbB3wBVZcXn-3aJZulm2vWWqhqBdvYa64=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림을 보시면 &lsquo;Content refreshed&rsquo;라고 표시되지만 그 아래 에러가 떴습니다.</p>
<p>그럼 실제로 웹사이트에서 반영이 되어 있을까 확인해 볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEizzyMHbES82TiNpKUmpiQXaLj_NLvJnRFhV17MuowQwRFo2DcK7qLmK9qL_tTBlSs8we_qPgUt_RXUo-nkL-mU-KqgbrxBW0WB57SB1awXBLfMR4JlHYehObtAeCYB2i_7iJGryeDZBeyQ4BhPA7txpsoQ9WFxLYioKvBrH7YgYJ4ldm9DxMsSv3bY=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림과 같이 우리 사이트의 새로고침을 여러 번 눌러도 변경이 되어 있지 않습니다.</p>
<p>왜 그런 걸까요?</p>
<p>아까도 얘기했지만 Speed Metal Stack의 서버사이드 부분에서 Fly.io의 DNS 주소를 가져오는 부분이 좀 꼬였습니다.</p>
<p>그래서 제가 좀 손을 봤는데요.</p>
<p>폴더 트리에서 &lsquo;app/routes/_content/refresh-content.ts&rsquo; 파일을 아래와 같이 고치시면 됩니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">type</span> <span class="p">{</span> <span class="nx">ActionFunction</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@remix-run/server-runtime&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">json</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@remix-run/server-runtime&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// import * as dns from &#39;dns&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">getRequiredEnvVar</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;~/utils/misc&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">action</span><span class="o">:</span> <span class="nx">ActionFunction</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">({</span> <span class="nx">request</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">getRequiredEnvVar</span><span class="p">(</span><span class="s1">&#39;REFRESH_TOKEN&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;Not Authorised&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">status</span><span class="o">:</span> <span class="mi">401</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">request</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// const address = `global.${getRequiredEnvVar(&#39;FLY_APP_NAME&#39;)}.internal`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// const ipv6s = await dns.promises.resolve6(address)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// const urls = ipv6s.map(ip =&gt; `http://[${ip}]:${getRequiredEnvVar(&#39;PORT&#39;)}`)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">queryParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryParams</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;_data&#39;</span><span class="p">,</span> <span class="s1">&#39;routes/_content/update-content&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// const fetches = urls.map(url =&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   fetch(`${url}/_content/update-content?${queryParams}`, {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//     method: &#39;POST&#39;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//     body,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//     headers: {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//       auth: getRequiredEnvVar(&#39;REFRESH_TOKEN&#39;),
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//       &#39;content-type&#39;: &#39;application/json&#39;,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//       &#39;content-length&#39;: Buffer.byteLength(body).toString(),
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//     },
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   }),
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// )
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// const response = await Promise.all(fetches)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="sb">`https://</span><span class="si">${</span><span class="nx">getRequiredEnvVar</span><span class="p">(</span><span class="s1">&#39;FLY_APP_NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">.fly.dev/_content/update-content?</span><span class="si">${</span><span class="nx">queryParams</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">body</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">auth</span><span class="o">:</span> <span class="nx">getRequiredEnvVar</span><span class="p">(</span><span class="s1">&#39;REFRESH_TOKEN&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;content-type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;content-length&#39;</span><span class="o">:</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">toString</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>위 코드를 잘 보시면 주석 처리한 부분이 원래 있던 코드고요.</p>
<p>마지막에 제가 입력한 코드가 있습니다.</p>
<p>DNS 주소를 불러오는데서 에러가 발생해서 그냥 우리의 앱 이름과 fly.dev를 통해 강제로 라우팅 해줬습니다.</p>
<p>이제 다시 git add와 git commit, 그리고 git push를 해서 Github 액션이 일을 다 끝날 때까지 기다려볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEh0RiCbvoafKQ3H9IT6T9WyABRTLyTQU-TKBW94OsfMB4BbHs2gxyaeTByKtYoWYbdisKImUWbyf76q3KwCxG1uz-YcLEMC91TWNAKc14CJ1XX77t6ZBA83TVfTBvM94fvyVhqCvGXUbiIPJhJHKBYWEfihsOgD2f7g7b2AtNw-8NVxd6rVlekuIHB6=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>Github 액션이 빌드와 배포를 다 하면 이제 우리의 홈페이지로 가서 새로고침을 해볼까요?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgLvJMcc1Kk4lFsAYEYIBI4glHDGbKK33QLIv30RMv8ZQzX-sXr4yQldMUhjuMgxqVunvj65NFRVkxlcbytwo8WzWTGvAUC7y-uHM57EjTeOcRXPaYgL0RxK--2oTh0YfVIaNtLljGOG2dBY-0N3VUPg4Pe8uBk4p8l5ylwYGcVcZoXnhO4PcoQVDr9=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>위 그림과 같이 Github 액션의 Refresh Content 부분에서도 에러가 안 나오고 있습니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg4W4xUxoHAaaHpqLDb3f1pnX7B8O0vySLaEZPOpyDaSV56nN-CJj_bJuL2JZnmKIKmvuVDEiEsu97lN5aHKmZOcX7cwYqY4-YkOB448LsNnQaBOmrqaf-G2zNZ3FLFLxy-Inb1jZcLSkGiFFSDm68iIVYZr-_4dPR_I01aRCIS5rQK2fAML1BQ-IBK=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>이제 정상적으로 Refresh Content가 작동하고 있습니다.</p>
<p>참고로 아래 그림처럼 git push 없이 Github 액션들을 재 실행할 수 있으니 참고 바랍니다.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg_cDmTlPWMC5T00-KqygjD_sB4nPVc2KJv5JbT-R4vnu1IPkncZr9XNERyjD10XkoqVXwAaYGkL5f73P0BgYr2noYgfXHkJ_5Mq7ryNlUhokZF5BrImuzQt1ccGxKkjrNi6IfUSgNSy6stvdQvulPCBUlttO2L8jACGLEAZB5ia5l8z1W5bcuk7PSN=s16000"
         alt="mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack"
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    <figcaption>mycodingshub.github.io-howto-make-blog-site-with-remix-speed-metal-stack</figcaption>
  </figure></p>
<p>지금까지 리믹스의 Speed Metal Stack을 이용한 블로그 사이트 만들기 편이었습니다.</p>
<p>감사합니다.</p>

      <div class="tag-list-single">
        <a class="btn btn-light" href="/tags/blog/" role="button">blog</a>
        <a class="btn btn-light" href="/tags/remix/" role="button">remix</a>
        <a class="btn btn-light" href="/tags/github-action/" role="button">github-action</a>
        <a class="btn btn-light" href="/tags/speed-metal-stack/" role="button">speed-metal-stack</a>
        <a class="btn btn-light" href="/tags/fly.io/" role="button">fly.io</a>
        </div>
      
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-format="autorelaxed"
          data-ad-client="ca-pub-7748316956330968"
          data-ad-slot="4495825428"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>
</article>

      
      </div>
    </div>
    
    
<div class="bg-light">
    <section class="section section-related container">
      <div class="row justify-content-center">
        <div class="col-md-12 col-lg-12">
          <h2 class="section-title text-center">Related posts</h2>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2022-08-06-add-page-nav-and-search-form-and-keywords-in-remix-speed-metal-stack/">Remix Speed Metal Stack 블로그에 페이지 내비게이션, 검색창, 키워드 달기</a></h2>
                  <p>Remix Speed Metal Stack 블로그에 페이지 내비게이션과 검색창 추가, 주요 키워드 방식 검색 추가</p>
                  <p>
  <small>August 6, 2022<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>13&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2022-07-12-new-blog-site-open/">새로운 블로그 사이트 오픈</a></h2>
                  <p>Remix Framework을 이용한 새로운 블로그 사이트 오픈</p>
                  <p>
  <small>July 12, 2022<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>1&nbsp;minute</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2023-01-16-insert-before-and-after-article-link-to-blog-page/">Remix Speed Metal Stack 블로그에 다음 글 이전 글 링크 추가하기</a></h2>
                  <p>Remix Speed Metal Stack 블로그에 다음 글 이전 글 링크 추가하기, 글 목록 링크도 추가하기</p>
                  <p>
  <small>January 16, 2023<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>6&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          </div>
      </div>
    </section>
    <script src="https://utteranc.es/client.js"
      repo="cpro95/utterances_mycodings_fly_dev"
      issue-term="pathname"
      theme="github-light"
      label="blog-comment"
      crossorigin="anonymous"
    async>
    </script>
  </div>
  
    <footer class="footer text-muted">
  <div class="container-lg">
    <div class="row">
      <div class="col-lg-8 text-center text-lg-start">
        <ul class="list-inline">
          <li class="list-inline-item"><a class="text-muted" href="/about/">about</a></li>
        </ul>
      </div>
      <div class="col-lg-8 text-center text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item">Copyright (c) All Right Reserved.</li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    

<script async
  src="/js/app.19b73e0182301dd61c9211c2f6890104740e2eb9eb12fe4ba8d4f31435b22ed6.js"
  integrity="sha256-Gbc&#43;AYIwHdYckhHC9okBBHQOLrnrEv5LqNTzFDWyLtY=">
</script>





<script async
  src="/js/flexsearch.5dd6433c29c3e043627f046054aed58ff3790f58fdb8423f45125bbafdcad335.js"
  integrity="sha256-XdZDPCnD4ENifwRgVK7Vj/N5D1j9uEI/RRJbuv3K0zU=">
</script>
<script async
  src="/js/search-modal.96e662d8f691fe25c859a3437074b485f2d7bed0bca612725028c6cf4322e2f2.js"
  integrity="sha256-luZi2PaR/iXIWaNDcHS0hfLXvtC8phJyUCjGz0Mi4vI=">
</script>

    <div class="d-inline-flex fixed-bottom-right pb-4 pe-4">
  <button id="toTop" type="button" class="btn btn-primary rounded-circle ms-auto p-2"><span class="visually-hidden">Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 15l6 -6l6 6"></path></svg></button>
</div>

    
  </body>
</html>
