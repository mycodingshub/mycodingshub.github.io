<!doctype html>
<html lang="ko" data-bs-theme="auto">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<script 
  src="/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js"
  integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg=">
</script>


<link rel="stylesheet" href="/main.86b7305f5a96b7dd3a46fa6277d87b125af3bf13f48c4cfcc269be84fa9e8fb75375d45a5fe9056ce9190644b7a6e5f13f917f12d853ed38bb76d8856898f755.css" integrity="sha512-hrcwX1qWt906Rvpid9h7ElrzvxP0jEz8wmm+hPqej7dTddRaX+kFbOkZBkS3puXxP5F/EthT7Ti7dtiFaJj3VQ==" crossorigin="anonymous">

<noscript><style>img.lazyload { display: none; }</style></noscript><title>TanStack Query V5 ê¸°ë³¸ ì‚¬ìš©ë²•</title>
<meta name="description" content="(êµ¬)React Qeuryì˜ ìµœì‹  ë²„ì „ì¸ TanStack Query ì‚¬ìš©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤." />
<link rel="canonical" href="https://mycodingshub.github.io/blog/2024-01-27-how-to-use-tanstack-query-complete-understanding/" />
<meta name="robots" content="index, follow" />

<meta property="og:type" content="article" />
<meta property="og:title" content="TanStack Query V5 ê¸°ë³¸ ì‚¬ìš©ë²•" />
<meta property="og:description" content="(êµ¬)React Qeuryì˜ ìµœì‹  ë²„ì „ì¸ TanStack Query ì‚¬ìš©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤." />
<meta property="og:url" content="https://mycodingshub.github.io/blog/2024-01-27-how-to-use-tanstack-query-complete-understanding/" />
<meta property="og:site_name" content="Home" />
<meta property="og:image" content="https://mycodingshub.github.io/cover.png" />
<meta property="og:locale" content="en" />
<meta property="article:published_time" content="2024-01-27T08:29:22Z" />
<meta property="article:modified_time" content="2024-01-27T08:29:22Z" />
<meta property="article:tag" content="tanstack query" />
<meta property="article:tag" content="tanstack-query" />
<meta property="article:tag" content="react" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="TanStack Query V5 ê¸°ë³¸ ì‚¬ìš©ë²•" />
<meta name="twitter:description" content="(êµ¬)React Qeuryì˜ ìµœì‹  ë²„ì „ì¸ TanStack Query ì‚¬ìš©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤." />
<meta name="twitter:image" content="https://mycodingshub.github.io/cover.png" />

<meta name="author" content="cpro95@gmail.com" />

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"TanStack Query V5 ê¸°ë³¸ ì‚¬ìš©ë²•\"",
  "description": "\"(êµ¬)React Qeuryì˜ ìµœì‹  ë²„ì „ì¸ TanStack Query ì‚¬ìš©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.\"",
  "datePublished": "\"2024-01-27T08:29:22Z\"",
  "dateModified": "\"2024-01-27T08:29:22Z\"",
  "author": {
    "@type": "Person",
    "name": "\"cpro95@gmail.com\""
  },
  "image": "\"https://mycodingshub.github.io/cover.png\"",
  "url": "\"https://mycodingshub.github.io/blog/2024-01-27-how-to-use-tanstack-query-complete-understanding/\"",
  "publisher": {
    "@type": "Organization",
    "name": "\"Home\""
  }
}
</script>




<script async src="https://www.googletagmanager.com/gtag/js?id=G-C7SBETWEJ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C7SBETWEJ0');
</script>


<script
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7748316956330968"
  crossOrigin="anonymous"
></script>


</head>

  
  <body class="single section blog" data-bs-spy="scroll" data-bs-target="#toc" data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll="true" tabindex="0">
    <div class="sticky-top">
<header class="navbar navbar-expand-sm">
  <div class="container-lg">
  <div class="d-flex flex-grow-1 justify-content-between">
    <div class="d-flex flex-row navbar-nav justify-content-between align-items-start gap-2">
    
    <a class="nav-link fw-bold fs-4" href="/">Home</a>

    
    
            <a class="nav-link fs-4  active" href="https://mycodingshub.github.io/blog/" aria-current="true">Blog</a>
          
        
            <a class="nav-link fs-4 " href="https://mycodingshub.github.io/life/">Life</a>
          
        
    </div>
    <div class="d-flex flex-row justify-content-between align-items-center">
      
      
      <button type="button" id="searchToggleMobile" class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      
      <button type="button" id="searchToggleDesktop" class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      <button id="buttonColorMode" class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type="button" aria-label="Toggle theme">
        <svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
        </svg>
        <svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0m-5 0h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
        </svg>
      </button>
      </div>
        
        
        
        
        </div>
    </div>

    
    </div>
</header>
</div>

<div class="modal" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 visually-hidden" id="searchModalLabel">Search</h1>
        <button type="button" class="btn-close visually-hidden" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="search-input flex-grow-1 d-none">
          <form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search">
            <label for="query" class="visually-hidden">Search</label>
            <div class="d-flex">
              <input type="search" id="query" name="query" class="search-text form-control form-control-lg" placeholder="Search" aria-label="Search" maxlength="128" autocomplete="off">
              <button type="button" class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-body">
        <p class="search-loading status message d-none mt-3 text-center">Loading search indexâ€¦</p>
        <p class="search-no-recent message d-none mt-3 text-center">No recent searches</p>
        <p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class="query-no-results">Query here</span></strong>"</p>
        <div id="searchResults" class="search-results"></div>
        <template>
          <article class="search-result list-view">
            <div class="card my-3">
              <div class="card-body">
                <header>
                  <h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href="#">Title here</a></h2>
                  <div class="submitted d-none"><time class="created-date">Date here</time></div>
                </header>
                <div class="content">Summary here</div>
              </div>
            </div>
          </article>
        </template>
      </div>
      <div class="modal-footer">
        <ul class="list-inline me-auto d-none d-md-block">
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd><span class="DocSearch-Label">to select</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd><span class="DocSearch-Label">to navigate</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd><span class="DocSearch-Label">to close</span></li>
        </ul>
        <p class="d-md-none">Search by <a class="text-decoration-none" href="https://github.com/nextapps-de/flexsearch">FlexSearch</a></p>
      </div>
    </div>
  </div>
</div>


    <div class="wrap container-lg" role="document">
      <div class="content">
      
        
<article>
  <div class="row justify-content-center">
    <div class="col-md-12 col-lg-12">
      
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-7748316956330968"
        data-ad-slot="2971373181"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      <div class="blog-header">
        <h1>TanStack Query V5 ê¸°ë³¸ ì‚¬ìš©ë²•</h1>
        <p>
  <small>January 27, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>20&nbsp;minutes</span></small>
</p>

      </div>
    </div>
      <div class="col-md-12 col-lg-12">
      
      <p>ì•ˆë…•í•˜ì„¸ìš”?</p>
<p>ì˜¤ëŠ˜ì€ TanStack Query V5ì— ëŒ€í•´ ì‚´í´ë³¼ ê±´ë°ìš”.</p>
<p>TanStack QueryëŠ” ë²„ì „ 3ê¹Œì§€ React Queryë¼ê³  ë¶ˆë ¸ì§€ë§Œ ë²„ì „ 4ê°€ ë˜ë©´ì„œ ì´ë¦„ì´ TanStack Queryê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì „ ë²„ì „ì—ì„œ ì‚¬ìš©ë˜ì—ˆë˜ React QueryëŠ” ì´ë¦„ì— Reactê°€ í¬í•¨ëœ React ì „ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜€ëŠ”ë°ìš”.</p>
<p>ë²„ì „ ì—…í•˜ë©´ì„œ TanStack Queryê°€ ë˜ì–´ Reactë¿ë§Œ ì•„ë‹ˆë¼ Solid, Vue, Svelte ë“±ì—ì„œë„ ì´ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ì´ë¦„ì´ ë°”ë€ ê±´ë°ìš”.</p>
<p>ê¸°ëŠ¥ì€ React Queryë‘ ê¸°ë³¸ì ìœ¼ë¡œ ê°™ìŠµë‹ˆë‹¤.</p>
<p>ì œê°€ ì˜ˆì „ì— ì‘ì„±í•œ React Query ê°•ì¢ŒëŠ” React Query ê¸°ëŠ¥ì„ ê±°ì˜ ì „ë¶€ ì‚´í´ë³¸ ê±°ë¼ í•œ ë²ˆ ê¼­ ë³´ì‹œëŠ”ê²Œ ì¢‹ì„ ë“¯ ì‹¶ìŠµë‹ˆë‹¤.</p>
<p>ì˜ˆì „ ê°•ì˜ <a href="https://mycodingshub.github.io/blog/2023-09-17-how-to-use-react-query-and-usequery">ë§í¬</a>ì…ë‹ˆë‹¤.</p>
<p>ì˜¤ëŠ˜ì€ V5 ê¸°ì¤€í•˜ì— TanStack Queryì˜ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ê¸°ëŠ¥ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>** ëª© ì°¨ **</p>
<ul>
<li>
<ol>
<li><a href="#backend">backend ì„œë²„ êµ¬ì¶•</a></li>
</ol>
</li>
<li>
<ol start="2">
<li><a href="#Prisma">Prisma ì„¤ì •</a></li>
</ol>
</li>
<li>
<ol start="3">
<li><a href="#PrismaClinet">Prisma Clinetë¡œ ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰</a></li>
</ol>
</li>
<li>
<ol start="4">
<li><a href="#Frontend">Frontend ì„¤ì •</a></li>
</ol>
</li>
<li>
<ol start="5">
<li><a href="#Todo">Todo ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°</a></li>
</ol>
</li>
<li>
<ol start="6">
<li><a href="#data">data ì–»ê¸°</a></li>
</ol>
</li>
<li>
<ol start="7">
<li><a href="#useQuery">useQuery í›…ì˜ ë¦¬í„´ ê°’ í™•ì¸í•´ ë³´ê¸°</a></li>
</ol>
</li>
<li>
<ol start="8">
<li><a href="#errormessage">ì—ëŸ¬ ë©”ì‹œì§€(error message)ë¥¼ ì„œë²„ ì¸¡ ë©”ì‹œì§€ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°</a></li>
</ol>
</li>
<li>
<ol start="9">
<li><a href="#axios">axiosë¥¼ ì‚¬ìš©í•œ ê²½ìš°</a></li>
</ol>
</li>
<li>
<ol start="10">
<li><a href="#TanStackQuery">TanStack Query ê¸°ëŠ¥ì€?</a></li>
</ol>
</li>
<li>
<ol start="11">
<li><a href="#WindowFocusRefetching">Window Focus Refetching</a></li>
</ol>
</li>
<li>
<ol start="12">
<li><a href="#refetchInterval">refetchInterval ì„¤ì •</a></li>
</ol>
</li>
<li>
<ol start="13">
<li><a href="#staleTime">staleTime ì„¤ì •</a></li>
</ol>
</li>
<li>
<ol start="14">
<li><a href="#gcTime">gcTime  ì„¤ì •</a></li>
</ol>
</li>
<li>
<ol start="15">
<li><a href="#gcTime0">gcTime ì„¤ì •ì„ 0ìœ¼ë¡œ í•˜ê¸°</a></li>
</ol>
</li>
<li>
<ol start="16">
<li><a href="#Devtools">Devtools ì„¤ì •</a></li>
</ol>
</li>
<li>
<ol start="17">
<li><a href="#staleTime-1">staleTimeì„ ì„¤ì •í•œ ê²½ìš°</a></li>
</ol>
</li>
<li>
<ol start="18">
<li><a href="#gcTime0-1">gcTimeì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ë©´</a></li>
</ol>
</li>
<li>
<ol start="19">
<li><a href="#useQuery-1">ì—¬ëŸ¬ useQuery ì„¤ì •</a></li>
</ol>
</li>
</ul>
<hr>
<h2 id="1-backend-ì„œë²„-êµ¬ì¶•">1. <a name='backend'></a>backend ì„œë²„ êµ¬ì¶•</h2>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir tanstack-test
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> tanstack-test
</span></span><span class="line"><span class="cl">mkdir backend
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> backend
</span></span><span class="line"><span class="cl">npm init -y
</span></span><span class="line"><span class="cl">npm install express nodemon
</span></span><span class="line"><span class="cl">touch index.js</span></span></code></pre></div>
  </figure>
</div>
<p>backend í´ë”ì˜ package.json íŒŒì¼ì—ì„œ scripts ë¶€ë¶„ì„ ì•„ë˜ì™€ ê°™ì´ ë°”ê¿‰ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;scripts&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;nodemon index.js&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span><span class="err">,</span></span></span></code></pre></div>
  </figure>
</div>
<p>express ì„œë²„ ê¸°ë³¸ ì„¤ì •ì„ í•´ ë³¼ê¹Œìš”?</p>
<p>index.js íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ê³ ì¹©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;express&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">&#34;Hello World!&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server running on port </span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ì œ express ì„œë²„ë¥¼ êµ¬ë™í•´ ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run start
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&gt; backend@1.0.0 start
</span></span><span class="line"><span class="cl">&gt; nodemon index.js
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>nodemon<span class="o">]</span> 3.0.3
</span></span><span class="line"><span class="cl"><span class="o">[</span>nodemon<span class="o">]</span> to restart at any time, enter <span class="sb">`</span>rs<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>nodemon<span class="o">]</span> watching path<span class="o">(</span>s<span class="o">)</span>: *.*
</span></span><span class="line"><span class="cl"><span class="o">[</span>nodemon<span class="o">]</span> watching extensions: js,mjs,cjs,json
</span></span><span class="line"><span class="cl"><span class="o">[</span>nodemon<span class="o">]</span> starting <span class="sb">`</span>node index.js<span class="sb">`</span>
</span></span><span class="line"><span class="cl">Server running on port <span class="m">3000</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ìƒ ì—†ì´ ì˜ ë©ë‹ˆë‹¤.</p>
<hr>
<h2 id="2-prisma-ì„¤ì •">2. <a name='Prisma'></a>Prisma ì„¤ì •</h2>
<p>express ì„œë²„ì—ì„œ sqlite DBë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•´ì„œ ê¼­ prismaê°€ í•„ìš”í•œ ê±´ ì•„ë‹Œë°, prismaë¥¼ ì´ìš©í•˜ë©´ ì•„ì£¼ ì‰½ê²Œ DB ì œì–´ë¥¼ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>
<p>ê°œë°œ ì„œë²„ë¥¼ ë„ê³  ì•„ë˜ì™€ ê°™ì´ prismaë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install prisma</span></span></code></pre></div>
  </figure>
</div>
<p>prisma ì„¤ì¹˜ê°€ ëë‚¬ìœ¼ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¡œ prismaë¥¼ ì´ˆê¸°í™” í•´ì•¼ í•©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx prisma init --datasource-provider sqlite</span></span></code></pre></div>
  </figure>
</div>
<p>ë‚´ë¶€ì ìœ¼ë¡œ sqliteë¥¼ ì“°ê¸° ìœ„í•´ ìœ„ì™€ ê°™ì´ &lsquo;&ndash;datasource-provider&rsquo; ì˜µì…˜ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ prisma í´ë”ê°€ ìƒê¸°ë©´ì„œ ê·¸ ë°‘ì— schema.prisma ê¸°ë³¸ íŒŒì¼ì´ ìƒê¸°ëŠ”ë°ìš”.</p>
<p>ê·¸ë¦¬ê³  &lsquo;.env&rsquo; íŒŒì¼ë„ ìë™ìœ¼ë¡œ ìƒê¸°ëŠ”ë°ìš”.</p>
<p>&lsquo;DATABASE_URL&rsquo; í™˜ê²½ë³€ìˆ˜ë¥¼ ìœ„í•´ì„œ ê·¸ëŸ° ê²ë‹ˆë‹¤.</p>
<p>ìµœì¢…ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì„ ê²ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// This is your Prisma schema file,
</span></span></span><span class="line"><span class="cl"><span class="c1">// learn more about it in the docs: https://pris.ly/d/prisma-schema
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">generator</span> <span class="nx">client</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">provider</span> <span class="o">=</span> <span class="s2">&#34;prisma-client-js&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">datasource</span> <span class="nx">db</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">provider</span> <span class="o">=</span> <span class="s2">&#34;sqlite&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">url</span>      <span class="o">=</span> <span class="nx">env</span><span class="p">(</span><span class="s2">&#34;DATABASE_URL&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì˜¤ëŠ˜ ë§Œë“¤ì–´ ë³¼ê²Œ Todo ì•±ì´ê¸° ë•Œë¬¸ì— Todo Modelì„ ì¶”ê°€í•´ ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// This is your Prisma schema file,
</span></span></span><span class="line"><span class="cl"><span class="c1">// learn more about it in the docs: https://pris.ly/d/prisma-schema
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">generator</span> <span class="nx">client</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">provider</span> <span class="o">=</span> <span class="s2">&#34;prisma-client-js&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">datasource</span> <span class="nx">db</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">provider</span> <span class="o">=</span> <span class="s2">&#34;sqlite&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">url</span>      <span class="o">=</span> <span class="nx">env</span><span class="p">(</span><span class="s2">&#34;DATABASE_URL&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">model</span> <span class="nx">Todo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span>          <span class="nx">Int</span> <span class="err">@</span><span class="nx">id</span> <span class="err">@</span><span class="k">default</span><span class="p">(</span><span class="nx">autoincrement</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span>        <span class="nb">String</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isCompleted</span> <span class="nb">Boolean</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>nameê³¼ isCompleted í•­ëª©ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<p>sqliteëŠ” Boolean íƒ€ì…ì„ ì§€ì›í•˜ì§€ëŠ” ì•Šì§€ë§Œ Prismaê°€ ì•Œì•„ì„œ Boolean íƒ€ì…ì„ ì²˜ë¦¬í•´ ì¤„ ê²ë‹ˆë‹¤.</p>
<p>ì´ì œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì´ ëë‚¬ê¸° ë•Œë¬¸ì— ì‹¤ì œ DBë¥¼ êµ¬ì¶•í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx prisma db push
</span></span><span class="line"><span class="cl">Environment variables loaded from .env
</span></span><span class="line"><span class="cl">Prisma schema loaded from prisma/schema.prisma
</span></span><span class="line"><span class="cl">Datasource <span class="s2">&#34;db&#34;</span>: SQLite database <span class="s2">&#34;dev.db&#34;</span> at <span class="s2">&#34;file:./dev.db&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SQLite database dev.db created at file:./dev.db
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ğŸš€  Your database is now in sync with your Prisma schema. Done in 11ms
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Running generate... <span class="o">(</span>Use --skip-generate to skip the generators<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">added <span class="m">1</span> package, and audited <span class="m">104</span> packages in 5s
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">14</span> packages are looking <span class="k">for</span> funding
</span></span><span class="line"><span class="cl">  run <span class="sb">`</span>npm fund<span class="sb">`</span> <span class="k">for</span> details
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">found <span class="m">0</span> vulnerabilities
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">âœ” Generated Prisma Client <span class="o">(</span>v5.8.1<span class="o">)</span> to ./node_modules/@prisma/client in 40ms</span></span></code></pre></div>
  </figure>
</div>
<p>í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ Prisma Studioë¥¼ êµ¬ë™í•˜ê² ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx prisma studio</span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhcLE1HS7p6KDNNEogakX2_qbnjw9bwwIXirm_IIDfeSeGNpozASwKkIJyX0sxGgLCI7Pb_KguNZuzsEaBw3-arQZ4MAHx_BS82Weo3vlZ6jetD9OUwk9-le8rSlImQpCKpn5c-DXok4Z36vTPs1gyrU5fYT71BaK6gklAfIAER2nB8UcoyHYmMz8dgoSw"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEj2AiRJT35pPIEx3WIB_bmHmauKFNT_9qPElM35P7bsgvyuIChuty6OQ_rsES0lQMKyMLhp-0g-BLR_lqL1t_36QKTrSB35nj61JTSePBsrqtpDR2VECqvJed5FB-Np6J634Ie8_d4BnCDKfymR7-8w_G9Tz3bGEyIBQhPoxGRH-aT4OiBaTNnVY2cDb-M"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ Prismaë¥¼ ì´ìš©í•œ DB êµ¬ì¶•ì´ ì™„ë£Œë˜ì—ˆë„¤ìš”.</p>
<p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Prisma Studioì—ì„œ ë”ë¯¸ ë°ì´í„°ë¥¼ ëª‡ ê°œ ì¶”ê°€í•´ ë´…ì‹œë‹¤.</p>
<p>&lsquo;Add record&rsquo; ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhaL35m3IEBwm_GWymjZlG5TslXwwiIzX4Hj-Da2ZtfkuaPaVlxiqCRy_qKKTK_0TVV7RFNg0ETqjEwnk7PiI7CZxyv0aFyKyvLyTUaAu1rdnRliCw0dZ4B5NOn6xBiaQH10P4T6Cj9HUA5a32eIRGhHxLP1Gjv2O4beUwq5wIO7vieb25XfulGLE4R2pI"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ì™€ ê°™ì´ ë”ë¯¸ ë°ì´í„°ë„ ë§Œë“¤ê³  ê¸°ë³¸ì ì¸ DB ì„¸íŒ…ì€ ëë‚¬ë„¤ìš”.</p>
<hr>
<h2 id="3-prisma-clinetë¡œ-ë°ì´í„°ë² ì´ìŠ¤-ê²€ìƒ‰">3. <a name='PrismaClinet'></a>Prisma Clinetë¡œ ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰</h2>
<p>ì´ì œ express ì„œë²„ì—ì„œ prisma clientë¥¼ í†µí•´ ì•„ê¹Œ ìš°ë¦¬ê°€ ë§Œë“  ë”ë¯¸ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” json APIë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ë‹¤ì‹œ index.js íŒŒì¼ì„ ì—´ì–´ &lsquo;/todos&rsquo; ë¼ìš°íŒ…ì„ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;express&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">PrismaClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@prisma/client&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">prisma</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrismaClient</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">&#34;Hello World!&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/todos&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">findMany</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server running on port </span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ ì½”ë“œë¥¼ ë³´ë©´ PrismaClient ê°ì²´ë¥¼ import í–ˆëŠ”ë°ìš”.</p>
<p>ì´ê±¸ ë”°ë¡œ ì„¤ì¹˜í•´ì•¼ í•˜ë‚˜ ì˜ë¬¸ì´ ë“œëŠ”ë°ìš”.</p>
<p>ì‚¬ì‹¤ ì•„ê¹Œ &rsquo;npx prisma db push&rsquo; ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ì•Œì•„ì„œ PrismaClient ê°ì²´ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì•„ê¹Œ í„°ë¯¸ë„ í™”ë©´ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ë¬¸êµ¬ë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">âœ” Generated Prisma Client <span class="o">(</span>v5.8.1<span class="o">)</span> to ./node_modules/@prisma/client in 40ms</span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ PrismaClientë„ ì•Œì•„ì„œ ë§Œë“¤ì–´ì£¼ê³  ìˆì£ .</p>
<p>PrismaClinetê°€ ìƒê²¼ìœ¼ë©´ todo í…Œì´ë¸”ì—ì„œ findMany í•¨ìˆ˜ë¡œ ìë£Œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸í•´ ë³¼ê¹Œìš”?</p>
<p>ì•„ë‹ˆë©´ í„°ë¯¸ë„ì—ì„œ curl ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>express ì„œë²„ë¥¼ êµ¬í˜„í•˜ëŠ” &rsquo;npm run start&rsquo; ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œì¼œ ë†“ê³  í„°ë¯¸ë„ì„ í•˜ë‚˜ ë” ì˜¤í”ˆí•œ ë‹¤ìŒ ì•„ë˜ì™€ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl http://localhost:3000/todos
</span></span><span class="line"><span class="cl"><span class="o">[{</span><span class="s2">&#34;id&#34;</span>:1,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;learn tanstack query&#34;</span>,<span class="s2">&#34;isCompleted&#34;</span>:false<span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;id&#34;</span>:2,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;learn react&#34;</span>,<span class="s2">&#34;isCompleted&#34;</span>:false<span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;id&#34;</span>:3,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;learn astrojs&#34;</span>,<span class="s2">&#34;isCompleted&#34;</span>:false<span class="o">}]</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì–´ë–¤ê°€ìš”? ìš°ë¦¬ê°€ ë§Œë“  express ì„œë²„ê°€ ì•„ì£¼ ì˜ ëŒì•„ê°€ê³  ìˆê³ , Prismaë¥¼ ì´ìš©í•œ DB ì œì–´ë„ ì˜ ë˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="4-frontend-ì„¤ì •">4. <a name='Frontend'></a>Frontend ì„¤ì •</h2>
<p>ì´ì œ ìš°ë¦¬ê°€ ì´ ê¸€ì„ ëª©ì ì¸ TanStack Queryë¥¼ ì´ìš©í•  í”„ë¡ íŠ¸ì—”ë“œë¥¼ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ë‹¹ì—°íˆ Reactë¥¼ ì‚¬ìš©í•  ê±´ë°ìš”.</p>
<p>backend í´ë” í•œ ì¹¸ ì•ìœ¼ë¡œ ì˜¬ë¼ê°€ì„œ frontend í´ë”ë¥¼ ë§Œë“­ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">pwd</span>
</span></span><span class="line"><span class="cl">/Users/cpro95/Codings/Javascript/blog/tanstack-test/backend
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">npm create vite@latest
</span></span><span class="line"><span class="cl">âœ” Project name: â€¦ frontend
</span></span><span class="line"><span class="cl">âœ” Select a framework: â€º React
</span></span><span class="line"><span class="cl">âœ” Select a variant: â€º JavaScript
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> frontend
</span></span><span class="line"><span class="cl">npm i
</span></span><span class="line"><span class="cl">npm run dev</span></span></code></pre></div>
  </figure>
</div>
<p>React ê°œë°œì„œë²„ê¹Œì§€ ëŒë ¤ë´¤ëŠ”ë°ìš”.</p>
<p>ì´ì œ TanStack Queryë¥¼ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i @tanstack/react-query</span></span></code></pre></div>
  </figure>
</div>
<p>ì˜¤ëŠ˜ ê¸°ì¤€ ì•„ë˜ì™€ ê°™ì€ ë²„ì „ì´ ì„¤ì¹˜ë˜ì—ˆë„¤ìš”.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;dependencies&#34;</span><span class="err">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;@tanstack/react-query&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.17.19&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react&#34;</span><span class="p">:</span> <span class="s2">&#34;^18.2.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;react-dom&#34;</span><span class="p">:</span> <span class="s2">&#34;^18.2.0&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span><span class="err">,</span></span></span></code></pre></div>
  </figure>
</div>
<hr>
<h2 id="5-todo-ì»´í¬ë„ŒíŠ¸-ë§Œë“¤ê¸°">5. <a name='Todo'></a>Todo ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°</h2>
<p>ë¦¬ì•¡íŠ¸ì˜ src í´ë” ë°‘ì— components í´ë”ë¥¼ ë§Œë“¤ê³  Todo.jsx íŒŒì¼ì„ ë§Œë“­ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Todo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Todo</span> <span class="nx">List</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Todo</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ì œ ì´ Todo ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ App.jsx íŒŒì¼ì„ ê³ ì³ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Todo</span> <span class="nx">from</span> <span class="s2">&#34;./components/Todo&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;./App.css&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">Todo</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>ëª¨ë“  ê±¸ ë‹¤ ì§€ìš°ê³  ìœ„ì™€ ê°™ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>
<p>ëŒ€ì‹  ê¸°ì¡´ì— ìˆë˜ App.css íŒŒì¼ì€ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ìµœì†Œí•œì˜ CSSë¥¼ ìœ„í•´ì„œìš”.</p>
<p>ê°œë°œ ì„œë²„ë¥¼ ëŒë ¤ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run dev</span></span></code></pre></div>
  </figure>
</div>
<p>ViteëŠ” ê°œë°œ ì„œë²„ í¬íŠ¸ê°€ ë””í´íŠ¸ ê°’ìœ¼ë¡œ 5173ì…ë‹ˆë‹¤.</p>
<p>ì™œ 5173ì¼ê¹Œìš”?</p>
<p>5173ì„ ì˜¤ë«ë™ì•ˆ ë³´ì‹œë©´ vite ê¸€ìì™€ ë¹„ìŠ·í•´ì„œ 5173 ë²ˆí˜¸ë¥¼ ê³¨ëë‹¤ê³  í•©ë‹ˆë‹¤.</p>
<p>ë¸Œë¼ìš°ì €ë¥¼ ë³´ì‹œë©´ í™”ë©´ í•œê°€ìš´ë° &lsquo;Todo List&rsquo; ë¬¸êµ¬ê°€ ë³´ì¼ ê²ë‹ˆë‹¤.</p>
<p>í”„ë¡ íŠ¸ì—”ë“œ ì¤€ë¹„ê°€ ë‹¤ ëë‚¬ë„¤ìš”.</p>
<p>ë³¸ê²©ì ìœ¼ë¡œ TanStack Queryë¥¼ ì‚¬ìš©í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="6-data-ì–»ê¸°">6. <a name='data'></a>data ì–»ê¸°</h2>
<p>Todo ì»´í¬ë„ŒíŠ¸ì—ì„œ TanStack Queryë¥¼ ì´ìš©í•´ì„œ Express ì„œë²„ì˜ Todo ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ë°ì´í„°ë¥¼ ì–»ê¸° ìœ„í•´ì„œëŠ” useQuery í›…ì„ ì´ìš©í•´ì•¼ í•˜ëŠ”ë°ìš”.</p>
<p>ì•„ê¹Œ components í´ë” ë°‘ì— ë§Œë“¤ì—ˆë˜ Todo.jsx íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@tanstack/react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchTodos</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;http://localhost:3000/todos&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Todo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;todos&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Todo</span> <span class="nx">List</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">todos</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">todo</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">todo</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">todo</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">))}</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Todo</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>TanStack Queryì—ì„œëŠ” import í•œ useQuery Hookì„ ì´ìš©í•˜ì—¬ ì„œë²„ì— ëŒ€í•œ Queryë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<p>useQueryì˜ ì¸ìˆ˜ì—ëŠ” ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ queryKeyì™€ queryFnì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<p>queryKeyëŠ” ìœ ë‹ˆí¬í•œ í‚¤ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ ìºì‹œì™€ ì¿¼ë¦¬ë¥¼ ê³µìœ í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>queryFnì€ Promiseë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<p>ë³´í†µ fetch í•¨ìˆ˜ë¥¼ ë”°ë¡œ ì‘ì„±í•˜ì—¬ í•¨ìˆ˜ ì´ë¦„ì„ ì ìŠµë‹ˆë‹¤.</p>
<p>ë‹¹ì—°íˆ async/awaitë¥¼ ì´ìš©í•´ì„œ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ì‘ì„±í•´ì•¼ê² ì£ .</p>
<p>ìš°ë¦¬ì˜ ê²½ìš° fetchTodos í•¨ìˆ˜ê°€ ê·¸ê²ë‹ˆë‹¤.</p>
<p>queryKey, qeuryFn ì´ì™¸ì—ë„ ì—¬ëŸ¬ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤ë§Œ ì´ 2ê°œê°€ useQuery ì„¤ì •ì— ìˆì–´ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” í•„ìˆ˜ì˜µì…˜ì…ë‹ˆë‹¤.</p>
<p><a href="https://tanstack.com/query/latest/docs/react/reference/useQuery">ê³µì‹ ë¬¸ì„œ</a>ì—ì„œ ì¢€ ë” ë‹¤ë¥¸ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.</p>
<p>useQueryì—ì„œ ë¦¬í„´ë˜ëŠ” ê°ì²´ë¥¼ ë³´í†µ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ í•´ì„œ data ê°’ì„ ì–»ëŠ”ë°ìš”.</p>
<p>ë˜ ES6ì˜ alias ê¸°ëŠ¥ ì¦‰, ë³„ì¹­ ê¸°ëŠ¥ì„ ì´ìš©í•´ì„œ dataë€ ì´ë¦„ì„ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ëŠ” ìœ„ì—ì„œ dataë¼ëŠ” ì´ë¦„ì„ ë³„ì¹­ìœ¼ë¡œ todosë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ë‚˜ì¤‘ì— ì•„ì‹œê² ì§€ë§Œ useQeuryë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“¤ë©´ dataë¼ëŠ” ë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œ ìƒê¸°ê²Œ ë˜ì–´ í—·ê°ˆë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ê¼­ ë³„ì¹­ì„ ì§€ì •í•˜ëŠ”ê²Œ ê´€ë¡€ì…ë‹ˆë‹¤.</p>
<p>ë­, useQueryë¥¼ í•œ ê°œë§Œ ì‚¬ìš©í•œë‹¤ë©´ ê·¸ëƒ¥ dataë€ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ ë¸Œë¼ìš°ì €ë¥¼ ë³´ì‹œë©´ ë¹ˆ í™”ë©´ë§Œ ë‚˜ì˜¤ëŠ”ë°ìš”.</p>
<p>í¬ë¡¬ ê°œë°œì°½ì˜ ì½˜ì†”ë¡œ ê°€ë³´ë©´ ì—ëŸ¬ë©”ì‹œì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Uncaught Error: No QueryClient set, use QueryClientProvider to <span class="nb">set</span> one</span></span></code></pre></div>
  </figure>
</div>
<p>QueryClientProviderë¥¼ ì„¤ì¹˜í•˜ë¼ëŠ” ì–˜ê¸°ë„¤ìš”.</p>
<p>ì´ì œ main.jsx íŒŒì¼ì— QueryClientProvider ê´€ë ¨ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s2">&#34;react-dom/client&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s2">&#34;./App.jsx&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// import &#39;./index.css&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">QueryClient</span><span class="p">,</span> <span class="nx">QueryClientProvider</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@tanstack/react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">queryClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QueryClient</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">createRoot</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;root&#34;</span><span class="p">)).</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">StrictMode</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">QueryClientProvider</span> <span class="nx">client</span><span class="o">=</span><span class="p">{</span><span class="nx">queryClient</span><span class="p">}</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/QueryClientProvider&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/React.StrictMode&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ ì„¸íŒ…ì´ TanStack Queryë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê°€ì¥ ìµœì†Œí•œì˜ ì„¤ì •ì´ ë©ë‹ˆë‹¤.</p>
<p>ì´ì œ ë‹¤ì‹œ ë¸Œë¼ìš°ì €ë¥¼ ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Access to fetch at <span class="s1">&#39;http://localhost:3000/todos&#39;</span> from origin <span class="s1">&#39;http://localhost:5173&#39;</span> has been blocked by CORS policy: No <span class="s1">&#39;Access-Control-Allow-Origin&#39;</span> header is present on the requested resource. If an opaque response serves your needs, <span class="nb">set</span> the request<span class="s1">&#39;s mode to &#39;</span>no-cors<span class="err">&#39;</span> to fetch the resource with CORS disabled.</span></span></code></pre></div>
  </figure>
</div>
<p>ì—­ì‹œë‚˜ cors ì—ëŸ¬ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>
<p>ì™œëƒí•˜ë©´ ë³´ì•ˆì„ ìœ„í•´ Express ì„œë²„ì˜ í¬íŠ¸ì™€ React ê°œë°œ ì„œë²„ì˜ í¬íŠ¸ê°€ í‹€ë¦¬ë©´ CORS ì •ì±…ì„ ìœ„ë°˜í–ˆë‹¤ê³  ë‚˜ì˜µë‹ˆë‹¤.</p>
<p>express ì„œë²„ì— corsì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ ëª‡ ê°€ì§€ë¥¼ ë³´ì™„í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ë°±ì—”ë“œ ì„œë²„ë¥¼ ì ì‹œ ì¢…ë£Œí•˜ê³  ë‹¤ìŒê³¼ ê°™ì´ cors íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install cors</span></span></code></pre></div>
  </figure>
</div>
<p>ê·¸ë¦¬ê³  backend í´ë”ì˜ index.js íŒŒì¼ì— corsë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì½”ë“œë¥¼ ëª‡ ê°œ ì¶”ê°€í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;express&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">PrismaClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@prisma/client&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">prisma</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PrismaClient</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">&#34;Hello World!&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/todos&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">findMany</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server running on port </span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì—ì„œ ë³´ì‹œë©´ cors íŒ¨í‚¤ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  app.use í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ corsë¥¼ ì‹¤í–‰í•œ ê²ë‹ˆë‹¤.</p>
<p>ì´ì œ ë‹¤ì‹œ ë°±ì—”ë“œ ê°œë°œ ì„œë²„ë¥¼ ëŒë¦½ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm run start</span></span></code></pre></div>
  </figure>
</div>
<p>ì´ì œ ë‹¤ì‹œ ë¸Œë¼ìš°ì €ë¥¼ ë³´ì‹œë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¬ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhEwHzTKigevX6VDqt4KcPNvWlVJWM2LUNQpRfQAtqbXM_PKnq3GHOG__CMprcBKvBuGiIiGXaix88OXB0t3_sAyDLu8MVV5aCOK8l_9_ACzRVsLsnzhlz7L2Cd01jFSue3aGEZ6gu1XIT4FyAGwU6CMY_oTQ_CVdFfhmxNYn0jZ6ie0x7Kb2mMoObQ2j0"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ useQueryë¥¼ ì´ìš©í•´ì„œ ë°ì´í„°ë¥¼ ì–»ê³  ê·¸ê±¸ í™”ë©´ì— ì˜ ë¿Œë ¤ì£¼ê³  ìˆë„¤ìš”.</p>
<p>ì§€ê¸ˆê¹Œì§€ì˜ ì„¤ì •ì´ useQueryì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ì‘ì„±ë°©ë²•ì…ë‹ˆë‹¤.</p>
<hr>
<h2 id="7-usequery-í›…ì˜-ë¦¬í„´-ê°’-í™•ì¸í•´-ë³´ê¸°">7. <a name='useQuery'></a>useQuery í›…ì˜ ë¦¬í„´ ê°’ í™•ì¸í•´ ë³´ê¸°</h2>
<p>ì§€ê¸ˆê¹Œì§€ ë§Œë“  ìš°ë¦¬ ì½”ë“œëŠ” useQuery í›…ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ë¦¬ì•¡íŠ¸ ì½”ë“œìƒì—ì„œ useEffect í›… ì•ˆì— fetch í•¨ìˆ˜ë‚˜ axios íŒ¨í‚¤ì§€ë¥¼ ì´ìš©í•´ì„œ ì‰½ê²Œ express ë°±ì—”ë“œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ ì™œ useQuery í›…ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ë” ì¢‹ì€ì§€ ì‚´í´ë³¼ê¹Œìš”?</p>
<p>ë¨¼ì €, ìš°ë¦¬ê°€ ì‚¬ìš©í•œ data ê°ì²´ ë§ê³  useQuery í›…ì¸ ë°˜í™˜í•˜ëŠ” ê°ì²´ëŠ” ì¢€ ë” ë§ì€ë°ìš”.</p>
<p><a href="https://tanstack.com/query/v5/docs/framework/react/reference/useQuery">ê³µì‹ ë¬¸ì„œ</a>ì—ì„œ í™•ì¸í•´ ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">dataUpdatedAt</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">errorUpdateCount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">errorUpdatedAt</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">failureCount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">failureReason</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fetchStatus</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isFetched</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isFetchedAfterMount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isFetching</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isInitialLoading</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isLoading</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isLoadingError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPaused</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPlaceholderData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPreviousData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isRefetchError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isRefetching</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isStale</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isSuccess</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetch</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">remove</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">status</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKey</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryFn</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cacheTime</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">enabled</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">networkMode</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">initialData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">initialDataUpdatedAt</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">keepPreviousData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">meta</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">notifyOnChangeProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onSettled</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onSuccess</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">placeholderData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKeyHashFn</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchInterval</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchIntervalInBackground</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchOnMount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchOnReconnect</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchOnWindowFocus</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">retry</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">retryOnMount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">retryDelay</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">select</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">staleTime</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">structuralSharing</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">suspense</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useErrorBoundary</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ ì½”ë“œë¥¼ ë³´ì‹œë©´ ì–´ë§ˆì–´ë§ˆí•œ ê¸°ëŠ¥ì´ ìˆë‹¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ê°€ ì‚¬ìš©í•œ data ê°ì²´ëŠ” ê·¸ëƒ¥ ë¹™ì‚° ìœ„ì˜ ì¼ê°ì¼ ë¿ì´ì£ .</p>
<p>ì´ˆë³´ìê°€ TanStack Queryë¥¼ ë°°ìš¸ ë•Œ ë¨¼ì € ë°°ìš°ëŠ” ê²Œ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë°”ë¡œ ìœ„ ë°˜í™˜ê°’ì¤‘ì— data, isPending, isError, error ê°ì²´ì…ë‹ˆë‹¤.</p>
<p>isError, error ì‚¬ìš©ë²•ì€ ì¶”ì¸¡í•˜ì‹  ëŒ€ë¡œ ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤.</p>
<p>isPendingì€ Queryê°€ ì•„ì§ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šì€ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ê³  ìˆëŠ”ë°ìš”.</p>
<p>ì´ ê°’ì„ ì´ìš©í•˜ë©´ ìœ ì €ì—ì„œ &lsquo;Loadin&hellip;.&rsquo; ë¬¸êµ¬ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆì–´ UIì ìœ¼ë¡œ ê¼­ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê°’ì…ë‹ˆë‹¤.</p>
<p>ì•„ë˜ ì½”ë“œê°€ useQuery í›…ì„ ì´ìš©í•œ ê°€ì¥ ì •í˜•í™”ëœ ì½”ë“œì¸ë°ìš”.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@tanstack/react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchTodos</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;http://localhost:3000/todos&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Todo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;todos&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">isPending</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nb">Error</span><span class="o">:</span> <span class="p">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Todo</span> <span class="nx">List</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">todos</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">todo</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">todo</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">todo</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">))}</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Todo</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ í•˜ë©´ useQueryê°€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ë³´ì—¬ì£¼ëŠ” &lsquo;Loadin&hellip;&lsquo;ë¬¸êµ¬ì™€ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ë³´ì—¬ì£¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ê¹Œì§€ ë‹¤ì–‘í•˜ê²Œ ëŒë°œì ì¸ ìƒí™©ì„ ëŒ€ì²˜í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<p>express ì„œë²„ì˜ &lsquo;/todos&rsquo; ë¼ìš°íŒ… ì²˜ë¦¬ ë¶€ë¶„ì— 3ì´ˆê°„ ì‰¬ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ ë³´ë©´ isPendingì˜ ì‘ë™ ë°©ì‹ì„ ì´í•´í•  ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/todos&#39;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">3000</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">findMany</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjuRXCzfMS1z9x_D845y_zXA8tBhXgdBYDI08PIqfAVUUbQwt28rygO12nv_NMn0eA58Y611voCSbW89I-59C6oEJmGN6Sh1mRrqYt0M9uCWUNTdwPTckKfo5Bsip1e9OUXwahfarus-3j-g97jAkamq7LLCwJNI-MRSWNBwrgPeIDZ6B0-Q1NXAY_vFLM"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ 3ì´ˆ ë™ì•ˆ &lsquo;Loading&hellip;&rsquo; ë¬¸êµ¬ê°€ í™”ë©´ì— í‘œì‹œë  ê²ë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ ê°•ì œë¡œ ì—ëŸ¬ë¥¼ ì¼ìœ¼ì¼œì„œ ì—ëŸ¬ ë°œìƒ ì‹œ ì‘ë™ë˜ëŠ” ë°©ì‹ì„ ì´í•´í•´ ë³¼ê¹Œìš”?</p>
<p>ë‹¤ì‹œ ë°±ì—”ë“œ ì„œë²„ì˜ &lsquo;/todos&rsquo; ë¼ìš°íŒ… ë¶€ë¶„ì„ ì•„ë˜ì™€ ê°™ì´ ê³ ì¹©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/todos&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// await new Promise((resolve) =&gt; setTimeout(resolve, 3000));
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// const todos = await prisma.todo.findMany();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// return res.json(todos);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;ê°•ì œ ì„œë²„ ì—ëŸ¬&#34;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ ê°•ì œë¡œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼°ìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë¦¬ê³  ë¦¬í„´í•˜ëŠ” json ê°ì²´ì— message í•­ëª©ì„ ì¶”ê°€í–ˆê³ , ì´ message í•­ëª©ì´ useQueryì˜ error ê°ì²´ì— message í•­ëª©ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì´ì œ ë¸Œë¼ìš°ì €ë¥¼ ë³´ë©´ todos?.map is not a function ì´ë¼ëŠ” ì—ëŸ¬ê°€ ë‚˜ì˜¤ëŠ”ë°ìš”.</p>
<p>todosë¥¼ console.log í•´ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;todos&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">isPending</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nb">Error</span><span class="o">:</span> <span class="p">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ console.log(todos) ì½”ë“œë¥¼ ë„£ì—ˆìŠµë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgZkHtcsz9PXfiTwAKcPAw_b06IIiyd_lF6dSefT4AsNP-57HKrxQN2pyxbxFiXMrg8ZtpItB9wYNgCYj6V-l0ycksuInenFYQnBb_Elk__Te1rois1Um3SA1CD_NqE_Y95il1XAMw3InQvJzBzVST0X7x28r9GCxzETwsCF48-G_vGHadvjopue4Xs5Ug"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì‹¤í–‰ ê²°ê³¼ Todo.jsx íŒŒì¼ì—ì„œ console.logí•œ ê°’ì´ ë‚˜ì˜¤ê³  ìˆëŠ”ë°ìš”.</p>
<p>ë°”ë¡œ ìš°ë¦¬ê°€ ì›í•œ error ê°ì²´ê°€ todos ê°ì²´ì— ë“¤ì–´ê°€ ë²„ë ¸ë„¤ìš”.</p>
<p>ì´ëŸ¬ë‹ˆ isError ì²´í¬ë„ ì•ˆë˜ê³ , todos ê°’ë„ ì²´í¬ê°€ ì•ˆ ë˜ëŠ” ê²ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ê°€ ë°±ì—”ë“œ express ì„œë²„ì—ì„œ ê°•ì œë¡œ ì—ëŸ¬ ì½”ë“œë¥¼ ë¦¬í„´í–ˆëŠ”ë°ìš”.</p>
<p>ë¦¬ì•¡íŠ¸ì˜ fetchTodos í•¨ìˆ˜ì—ì„œ fetch í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ìš”ì²­ì„ ìˆ˜í–‰í•˜ëŠ”ë°, ì´ë•Œ ìš”ì²­ì´ ì„±ê³µí–ˆëŠ”ì§€, ì‹¤íŒ¨í–ˆëŠ”ì§€ response ê°ì²´ì˜ ok ì†ì„±ì„ ì´ìš©í•´ì„œ ì²´í¬í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>fetch í•¨ìˆ˜ì—ì„œ 400, 500 ë“± status code ê°’ì´ ê·¸ëŒ€ë¡œ ë˜ëŒë ¤ì§€ëŠ”ì§€ response.okë¡œ í™•ì¸í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>status code ê°€ 200ì´ë©´ response.ok ê°’ì€ true ê°’ì´ ë˜ê³ , statuc codeê°€ 400, 500ì´ë©´ response.ok ê°’ì€ false ê°’ì´ ë©ë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì´ fetchTodos í•¨ìˆ˜ë¥¼ ë°”ê¿”ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchTodos</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;http://localhost:3000/todos&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤.</p>
<p>ì‹¤í–‰í•´ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°ìš”.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhKilJgYPnfcqaACn5ssHo_F_FxwXE0RgjW5OdMdPPY2utWDRyNVcEoY7nlAapsSS_srf5f6NbLOQ9V7D5lDq-18xcxeavUF0QEr39CaMi5PxhDP2qLBjPIgwkc_KiW9ndTwZZ2Kl6u_GB-2MIT4Lg4850fyZgZxMETMBJyYIc0WFcy9u8c2q7zGqwffrU"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì™œ ì´ë ‡ê²Œ ìš”ì²­ì„ ëª‡ ë²ˆ ë” ìˆ˜í–‰í•˜ëƒë©´, TanStack Queryê°€ ìì²´ì ìœ¼ë¡œ ì—ëŸ¬ ë°œìƒ ì‹œ ëª‡ ë²ˆì˜ ì‹œë„ë¥¼ ë” í•©ë‹ˆë‹¤.</p>
<p>ëª‡ ë²ˆì¸ì§€ëŠ” ê³µì‹ ë¬¸ì„œì—ì„œ í•œë²ˆ ì°¾ì•„ë³´ì‹œë©´ 3ë²ˆì¸ë°ìš”.</p>
<p>ì´ ì¬ì‹œë„ íšŸìˆ˜ë„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë‹¤ë§Œ ë””í´íŠ¸ ê°’ì´ 3ì´ë¼ëŠ”ê±°ì£ .</p>
<p>ì¬ì‹œë„ íšŸìˆ˜ë¥¼ ëŠ˜ë¦¬ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ retry ê°’ì„ ì£¼ë©´ ë©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Todo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todos&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">retry</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìµœì¢…ì ìœ¼ë¡œ 3ë²ˆì˜ ì¬ì‹œë„ëì— ì—ëŸ¬ì½”ë“œë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ëŠ” ê²ë‹ˆë‹¤.</p>
<hr>
<h2 id="8-ì—ëŸ¬-ë©”ì‹œì§€error-messageë¥¼-ì„œë²„-ì¸¡-ë©”ì‹œì§€-ê·¸ëŒ€ë¡œ-ì‚¬ìš©í•˜ê¸°">8. <a name='errormessage'></a>ì—ëŸ¬ ë©”ì‹œì§€(error message)ë¥¼ ì„œë²„ ì¸¡ ë©”ì‹œì§€ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°</h2>
<p>ì•„ê¹Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ì‹œë©´ ì„œë²„ì—ì„œ ì„¤ì •í•œ ë©”ì‹œì§€ê°€ ì•„ë‹™ë‹ˆë‹¤.</p>
<p>ê·¸ëƒ¥ ë¦¬ì•¡íŠ¸ ì½”ë“œì—ì„œ ì‘ì„±í•œ ì—ëŸ¬ ë©”ì‹œì§€ì¸ë°ìš”.</p>
<p>ì„œë²„ ì¸¡ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ê·¸ëŒ€ë¡œ ë³´ì—¬ì£¼ê³  ì‹¶ìœ¼ë©´ response.json() í•¨ìˆ˜ë‚˜ response.text() í•¨ìˆ˜ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì•„ê¹Œ ì „ì— ë§Œë“  express ì„œë²„ì˜ ì—ëŸ¬ ì½”ë“œ ë¦¬í„´ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ì œëŒ€ë¡œ ì„¤ì •í–ˆë„¤ìš”.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;ê°•ì œ ì„œë²„ ì—ëŸ¬&#34;</span> <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ê·¸ëŸ¬ë©´ ë¦¬ì•¡íŠ¸ ì½”ë“œìƒì—ì„œ í•´ë‹¹ jsonì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ë‹¤ì‹œ fetchTodos í•¨ìˆ˜ë¥¼ ëœ¯ì–´ ê³ ì³ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchTodos</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;http://localhost:3000/todos&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ ì½”ë“œì™€ ê°™ì´ res.okê°€ false ì¼ ê²½ìš° ì•„ì˜ˆ res.json() ëª…ë ¹ì–´ë¡œ json ë¬¸êµ¬ë¥¼ ì²˜ë¦¬í•˜ê²Œ ë” í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ ë‹¤ì‹œ ë¸Œë¼ìš°ì €ë¥¼ ë³´ì‹œë©´ ìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ì—ì„œ ë¦¬í„´ í•œ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ê·¸ëŒ€ë¡œ ë³´ì¼ ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjeTUSpB_wAKzP38tW3OMsXq6Sx5rQ2ZuRIprjgbMANWvZCCNy-a_Hg_a6FHcpGl8BuHU2X0vUnnWGzEbBeBC3Gn6_-m_-1pIwYblmGVm4ur2eaz9zwpZ0x6rZF6n3oZmLZ8n-HHZPSZcQOElBfReRP19aRABUFBWrMfP-XOK7vmYDfQBD0fMvQDdS5OrE"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì—¬ê¸°ì„œ fetchTodos í•¨ìˆ˜ì—ì„œ res.json() í•¨ìˆ˜ ë§ê³  res.text() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë³¼ê¹Œìš”?</p>
<p>json ê°ì²´ë¥¼ ì²˜ë¦¬í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ í…ìŠ¤íŠ¸í™”í•´ì„œ ëŒë ¤ ì¤„ ê²ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchTodos</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;http://localhost:3000/todos&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ ì²˜ë¦¬í•˜ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ JSON ê°ì²´ê°€ í…ìŠ¤íŠ¸ë¡œ ì²˜ë¦¬ë ê²ë‹ˆë‹¤.</p>
<p>ì´ê±¸ JSON.parse í•˜ë©´ ë˜‘ê°™ì•„ ì§€ëŠ”ê±°ì£ .</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjhQYnSvqLUAxQk_vFseRTlTsoZ17mo_HKXjVsyZHz4UbjT2v3bTYdc2sd_QVdbLVOx3s0EX7kmcKWTAeNd_mBQDSMU2onjBFVbfM8z5S6AUP-iVqHx1v5xb8C4ERW7obUZGqRLvYyk_AEeIG06_bg35jQZPBQKFehJLN-R08m916AwsmwNuruutkd2hcI"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì–´ë–¤ê°€ìš”?</p>
<p>ì´ë ‡ê²Œ í•˜ë©´ ë¦¬ì•¡íŠ¸ ì½”ë“œì—ì„œ isError ê°’ì„ ì²´í¬í•˜ëŠ” ì½”ë“œì— ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="sb">`Error: </span><span class="si">${</span><span class="nx">text</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ ê³ ì¹˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¬ ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjeTUSpB_wAKzP38tW3OMsXq6Sx5rQ2ZuRIprjgbMANWvZCCNy-a_Hg_a6FHcpGl8BuHU2X0vUnnWGzEbBeBC3Gn6_-m_-1pIwYblmGVm4ur2eaz9zwpZ0x6rZF6n3oZmLZ8n-HHZPSZcQOElBfReRP19aRABUFBWrMfP-XOK7vmYDfQBD0fMvQDdS5OrE"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<hr>
<h2 id="9-axiosë¥¼-ì‚¬ìš©í•œ-ê²½ìš°">9. <a name='axios'></a>axiosë¥¼ ì‚¬ìš©í•œ ê²½ìš°</h2>
<p>ìš°ë¦¬ëŠ” fetchTodos í•¨ìˆ˜ì—ì„œ fetch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆëŠ”ë°ìš”.</p>
<p>axios í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²½ìš° ì–´ë–»ê²Œ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í• ê¹Œìš”?</p>
<p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë¦¬ì•¡íŠ¸ ê°œë°œ ì„œë²„ë¥¼ ë„ê³  axiosë¥¼ ì„¤ì¹˜í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i axios</span></span></code></pre></div>
  </figure>
</div>
<p>ê¸°ì¡´ fetchTodos í•¨ìˆ˜ë¥¼ axiosë¥¼ ì‚¬ìš©í•œ ì½”ë“œë¡œ ë°”ê¿”ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@tanstack/react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchTodos</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3000/todos&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span></span></span></code></pre></div>
  </figure>
</div>
<p>ê·¼ë° ìœ„ ì½”ë“œì—ì„œëŠ” res.ok ë¶€ë¶„ì„ ì²´í¬í•˜ëŠ” ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
<p>ì¼ë‹¨ ì•„ë˜ì™€ ê°™ì´ isError ë¶€ë¶„ì„ ê³ ì³ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nb">Error</span><span class="o">:</span> <span class="p">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/span&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ê²°ê³¼ë¥¼ ë³´ì‹œë©´ ì•„ë˜ì™€ ê°™ì€ë°ìš”.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgj5tKtRGsKD60vimLOIQUopyY3i0P_Gtibu7TadfTslsJe3vTd4WmFjZeRs6saiVOtf7ofYmEnt4lAiCOxxdW-zB036DisGBae0tIdRqTryPjHrtAZtk0N8InURoYxjUJs14g5vHylgRKeqhOuuyAUnK0Zvo-fiegKJMJPA76a0jahdbctUZsauB9yHc0"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>errorê°€ AxiosError ê°ì²´ë¡œ ë¦¬í„´ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ ìš°ë¦¬ê°€ ë¦¬í„´í•œ ì—ëŸ¬ë©”ì‹œì§€ëŠ” ì–´ë”” ìˆì„ê¹Œìš”?</p>
<p>ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ AxiosError ê°ì²´ì˜ response ê°ì²´ ë°‘ì— data ê°ì²´ì— ê·¸ ê°’ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhQsXygJOTi7bMwFEdQwS7U04zAEUgw7fA98Tmu0udAZs7ZQ08xDGrtXaxyxyT9GkGzm52RxIvwdFnGEMCptbq7QUKu51aZAI2Quz6UjFm2ERUMKM3d0C2UKZ-wm-bH7_aUOI8aD4O5aY_3kGfXfomK5WuxZjfRJp4XNgg56FQaovmy8TRQf_fmPfuRcGc"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ê·¸ë˜ì„œ ë¦¬ì•¡íŠ¸ ìƒì˜ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nb">Error</span><span class="o">:</span> <span class="p">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/span&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìµœì¢…ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ ìš°ë¦¬ê°€ ì§€ì •í•œ ì—ëŸ¬ì½”ë“œê°€ ê·¸ëŒ€ë¡œ ë‚˜ì˜µë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjeTUSpB_wAKzP38tW3OMsXq6Sx5rQ2ZuRIprjgbMANWvZCCNy-a_Hg_a6FHcpGl8BuHU2X0vUnnWGzEbBeBC3Gn6_-m_-1pIwYblmGVm4ur2eaz9zwpZ0x6rZF6n3oZmLZ8n-HHZPSZcQOElBfReRP19aRABUFBWrMfP-XOK7vmYDfQBD0fMvQDdS5OrE"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>axiosê°€ í›¨ì”¬ ë” ì¢‹ì€ ê±° ê°™ë„¤ìš”.</p>
<hr>
<h2 id="10-tanstack-query-ê¸°ëŠ¥ì€">10. <a name='TanStackQuery'></a>TanStack Query ê¸°ëŠ¥ì€?</h2>
<p>ì§€ê¸ˆê¹Œì§€ TanStack Queryë¥¼ ì´ìš©í•´ì„œ &lsquo;Loading&hellip;&rsquo; ë¬¸êµ¬ë¥¼ ë³´ì—¬ì£¼ê±°ë‚˜, ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆëŠ”ë°ìš”.</p>
<p>ì´ëŸ° ê¸°ëŠ¥ì€ ê·¸ëƒ¥ ë‹¨ìˆœí•˜ê²Œ fetch í•¨ìˆ˜ë‚˜ axios íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•´ë„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤ì…ë‹ˆë‹¤.</p>
<p>TanStack Query ë§Œì˜ íŠ¹ë³„í•œ ê¸°ëŠ¥ì„ ì¢€ ë” ì•Œì•„ë³¼ê¹Œìš”?</p>
<hr>
<h2 id="11-window-focus-refetching">11. <a name='WindowFocusRefetching'></a>Window Focus Refetching</h2>
<p>Windows Focus Refetchingì´ë¼ëŠ” ê¸°ëŠ¥ì´ ìˆëŠ”ë°ìš”.</p>
<p>ê¸°ë³¸ì ìœ¼ë¡œ trueë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ê¸°ëŠ¥ì€ ì˜ˆë¥¼ ë“¤ì–´ ë¸Œë¼ìš°ì €ì˜ ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì´ë™í–ˆë‹¤ê°€ ë‹¤ì‹œ í•´ë‹¹ íƒ­ìœ¼ë¡œ ëŒì•„ê°€ë©´ Queryê°€ ë‹¤ì‹œ ì‘ë™í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>
<p>ì‘ë™ ì—¬ë¶€ëŠ” í¬ë¡¬ ê°œë°œ ì°½ì˜ ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì¼ë‹¨ express ì„œë²„ë¥¼ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ê°•ì œë¡œ ë°œìƒì‹œì¼°ë˜ ì˜ˆì „ ì½”ë“œë¥¼ ì§€ìš°ê³  ì›ë˜ ì½”ë“œë¡œ ì›ìƒ ë³µêµ¬í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/todos&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">3000</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">findMany</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// return res.status(500).json({ message: &#34;ê°•ì œ ì„œë²„ ì—ëŸ¬&#34; });
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEikJQC53YfZPMvBcFB2xd-sIW7E8TavH5bNhBM2Cg211s5n9UvYZf1RIhG7orLxt-7vYnnu0U34ZcAvaODthSw37NhknH8ULIGHHRiQEMEgkGTDa5GazCLZF3-KbPhZ6J1-Ylyicw8c2r-ZNEhZvSU6cil_53e_d3m_-Zh8KhuhDEPNJ6lxc47oiaJY5Gg"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ ê·¸ë¦¼ì„ ë³´ì‹œë©´ í¬ë¡¬ ê°œë°œ ì°½ì˜ ë„¤íŠ¸ì›Œí¬ íƒ­ì¸ë°ìš”.</p>
<p>ë¦¬ì•¡íŠ¸ ê°œë°œì„œë²„ë¼ ë§ì€ ê²Œ ë¡œë“œë©ë‹ˆë‹¤.</p>
<p>í˜„ì¬ ë§ˆì§€ë§‰ì— ìˆëŠ”ë° &lsquo;vite.svg&rsquo; íŒŒì¼ ë¡œë“œì¸ë°ìš”.</p>
<p>ì´ì œ íƒ­ì„ ì´ë™í–ˆë‹¤ê°€ ë‹¤ì‹œ ë“¤ì–´ì™€ ë³´ì‹­ì‹œì˜¤.</p>
<p>ë„¤íŠ¸ì›Œí¬ íƒ­ì´ ì•„ë˜ì™€ ê°™ì´ ë°”ë€” ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhOWxGkXgHIGTEzBRLGg4SIGIzS-YJUYoWyyl7HBcyz61y0Lkmd-fPhfkkQEog26uT5Dbu1mMl7pFKgPFOfuwws_opcpWL8BTPqbrskgw_IaEBUC66CRtQi-0h0Svol5jyqcJpxTflNGjCNWEUGT8WLwQlcPStSS58Ot5Bevh_qO2f9EFYqHYbgoMryKSI"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ì™€ ê°™ì´ &lsquo;vite.svg&rsquo; ë‹¤ìŒìœ¼ë¡œ todosë¼ëŠ” xhr íƒ€ì…ì´ ë‹¤ì‹œ ìƒê²¼ì£ ?</p>
<p>ì´ê²Œ ë°”ë¡œ TanStack Queryê°€ ë‹¤ì‹œ ìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ì— todos ë¼ìš°íŒ…ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•´ ë‹¤ì‹œ ì ‘ê·¼í•œ ê²ë‹ˆë‹¤.</p>
<p>ì´ê²Œ ë°”ë¡œ Window Focus Refetching ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>
<p>ì ê¹ ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì´ë™í–ˆë‹¤ê°€ë„ ë‹¤ì‹œ ì˜¤ë©´ í•­ìƒ ìµœì‹  ë°ì´í„°ë¡œ í™”ë©´ì´ ì±„ì›Œì ¸ ìˆì–´ ìœ ì € ì…ì¥ì—ì„œëŠ” ì•„ì£¼ ì¢‹ì€ UXë¥¼ ëŠë‚„ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.</p>
<p>ì´ ê¸°ëŠ¥ì„ ë„ë ¤ë©´ ë‹¨ìˆœí•˜ê²Œ ì•„ë˜ì²˜ëŸ¼ false ê°’ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todos&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchOnWindowFocus</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<h2 id="12-refetchinterval-ì„¤ì •">12. <a name='refetchInterval'></a>refetchInterval ì„¤ì •</h2>
<p>ì•„ê¹Œ refetchOnWindowFocus ê°’ì´ trueì´ë©´ íƒ­ ì „í™˜ì— ë”°ë¼ ìë™ìœ¼ë¡œ ë°ì´í„° ë¦¬í˜ì¹˜ê°€ ì´ë£¨ì–´ì§„ë‹¤ê³  ì•Œì•˜ëŠ”ë°ìš”.</p>
<p>ë§Œì•½, íƒ­ ì „í™˜ì´ ì•„ë‹ˆë¼ ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ ë¦¬í˜ì¹˜ë¥¼ ì›í•  ê²½ìš° ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?</p>
<p>ì´ ê¸°ëŠ¥ë„ TanStack Queryê°€ ì œê³µí•´ ì¤ë‹ˆë‹¤.</p>
<p>ë°”ë¡œ refetchInterval ê°’ì„ ì§€ì •í•˜ëŠ” ê²ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todos&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">refetchInterval</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ refetchInterval ê°’ë§ˆë‹¤ ë¦¬í˜ì¹˜ê°€ ì¼ì–´ë‚ ê²ë‹ˆë‹¤.</p>
<p>ë‹¹ì—°íˆ refetchInterval ì€ ë°€ë¦¬ì„¸ì»¨ë“œ ì¦‰ ë°€ë¦¬ì´ˆì…ë‹ˆë‹¤.</p>
<p>1000 ê°’ì´ 1ì´ˆê°€ ë˜ëŠ” ê±°ì£ .</p>
<hr>
<h2 id="13-staletime-ì„¤ì •">13. <a name='staleTime'></a>staleTime ì„¤ì •</h2>
<p>ë¨¼ì €, stale ì´ë¼ëŠ” ì˜ì–´ ë‹¨ì–´ê°€ ìƒì†Œí•œë°ìš”.</p>
<p>ChatGPTë¡œ ë¬¼ì–´ë´¤ìŠµë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s2">&#34;Stale&#34;</span>ì€ ë‹¤ì–‘í•œ ì˜ë¯¸ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ë‹¨ì–´ì…ë‹ˆë‹¤. ì£¼ë¡œ í˜•ìš©ì‚¬ë¡œ ì‚¬ìš©ë˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1. **ë…¸í›„í•œ, ì‹ ì„ í•˜ì§€ ì•Šì€:** ì‹í’ˆì´ë‚˜ ê³µê¸° ë“±ì´ ì˜¤ë«ë™ì•ˆ ì €ì¥ë˜ê±°ë‚˜ ì‚¬ìš©ë˜ì–´ ì‹ ì„ í•˜ì§€ ì•Šì€ ê²½ìš°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <span class="s2">&#34;stale bread&#34;</span>ëŠ” ë” ì´ìƒ ì‹ ì„ í•˜ì§€ ì•Šì€ ë¹µì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. **í”ë“¤ë¦°, ìƒˆë¡œì›Œì§€ì§€ ì•Šì€:** ìƒí™©, ì•„ì´ë””ì–´, ìœ í–‰ ë“±ì´ ìƒˆë¡œì›Œì§€ê±°ë‚˜ ë³€í™”ê°€ ì—†ì–´ì„œ í”ë“¤ë¦¼ì´ ì—†ëŠ” ê²½ìš°ë¥¼ ë‚˜íƒ€ë‚¼ ë•Œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <span class="s2">&#34;stalemate&#34;</span>ì€ ì–´ë–¤ ìƒí™©ì—ì„œ ì–´ë–¤ ìª½ë„ ì§„ì „ì´ ì—†ëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3. **ìƒìŠ¤ëŸ¬ìš´, ì§„ë¶€í•œ:** ì–´ë–¤ ê²½í—˜ì´ë‚˜ ìƒí™©ì´ ë” ì´ìƒ í¥ë¯¸ë¡œìš°ì§€ ì•Šê±°ë‚˜ ì§„ë¶€í•œ ê²½ìš°ë¥¼ ë‚˜íƒ€ë‚¼ ë•Œë„ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ë”°ë¼ì„œ <span class="s2">&#34;stale&#34;</span>ì€ ë‹¤ì–‘í•œ ë§¥ë½ì—ì„œ ì‚¬ìš©ë˜ì–´ ë‹¤ì–‘í•œ ì˜ë¯¸ë¥¼ ê°–ìŠµë‹ˆë‹¤.</span></span></code></pre></div>
  </figure>
</div>
<p>ì‹ ì„ í•˜ì§€ ì•Šì€ ì´ë€ ëœ»ì´ ëŒ€í‘œì ì¸ë°ìš”.</p>
<p>Queryë¡œ ë³´ë©´ stale ì´ë€ ëœ»ì€ ë°ì´í„°ê°€ ì˜¤ë˜ëë‹¤ëŠ” ëœ»ì´ê² ë„¤ìš”.</p>
<p>ê·¸ëŸ¬ë©´ staleTime ê°’ì„ ì„¤ì •í•˜ë©´ ê·¸ ê°’ì— ë”°ë¼ ë‹¤ì‹œ ë¦¬í˜ì¹˜ê°€ ì´ë£¨ì–´ì§€ë”ë¼ê³  ì¶”ì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ê±´ ì•„ë‹ˆê³ ìš”.</p>
<p>staleTimeì€ refetchOnWindowFocus ê°’ì´ trueì¼ ê²½ìš° ë¦¬í˜ì¹˜ í• ì§€ ë§ì§€ ê¸°ì¤€ì´ ë˜ëŠ” ê²ë‹ˆë‹¤.</p>
<p>staleTimeì€ ë””í´íŠ¸ ê°’ìœ¼ë¡œ 0 ì´ë¼ëŠ” ê°’ì„ ê°€ì§‘ë‹ˆë‹¤.</p>
<p>ì´ ëœ»ì€ í•œë²ˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ ê·¸ ë°ì´í„°ëŠ” ë°”ë¡œ ì‹ ì„ í•˜ì§€ ì•Šë‹¤ëŠ” ëœ»ì´ ë˜ëŠ” ê±°ì£ .</p>
<p>ê·¸ëŸ¬ë©´ refetchOnWindowFocus ê°’ì´ true ì¼ ê²½ìš° íƒ­ ê°„ ì „í™˜ ì‹œ ë¦¬í˜ì¹˜ê°€ ë˜ëŠëƒ ë§ˆëŠëƒëŠ” ë°”ë¡œ staleTime ê°’ì„ ì²´í¬í•´ì„œ ë°ì´í„°ê°€ stale í•˜ì§€ ì•„ë‹Œì§€ ì²´í¬í•´ì„œ ë¦¬í˜ì¹˜ê°€ ì¼ì–´ë‚˜ëŠ” ê²ë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ staleTimeì„ ì˜¤ë˜ ì‹œê°„ìœ¼ë¡œ ì„¤ì •í•˜ê³  í…ŒìŠ¤íŠ¸í•´ ë³´ì‹­ì‹œì˜¤.</p>
<p>ì•„ë§ˆë„ ì•„ë¬´ëŸ° ë¦¬í˜ì¹˜ê°€ ì¼ì–´ë‚˜ì§€ ì•Šì„ ê²ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todos&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">staleTime</span><span class="o">:</span> <span class="mi">50000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìœ„ì™€ ê°™ì´ staleTimeì„ 50ì´ˆë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¬ë©´ íƒ­ ê°„ ì´ë™ì—ë„ ì „í˜€ ë¦¬í˜ì¹˜ê°€ ì´ë£¨ì–´ ì§€ì§€ ì•Šì„ ê²ë‹ˆë‹¤.</p>
<p>ë‹¨, staleTimeì€ refetchInterval ê°’ ì„¤ì •ê³¼ëŠ” ë”°ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>
<hr>
<h2 id="14-gctime--ì„¤ì •">14. <a name='gcTime'></a>gcTime  ì„¤ì •</h2>
<p>gcTimeì˜ gcëŠ” ë¬´ì—‡ì„ ëœ»í• ê¹Œìš”?</p>
<p>gcëŠ” Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜)ì…ë‹ˆë‹¤.</p>
<p>gcTimeì€ ë§ ê·¸ëŒ€ë¡œ InActive/UnUsedì˜ ìºì‹œ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ìƒì— ë‚¨ê²¨ ë‘ëŠ” ì‹œê°„ì…ë‹ˆë‹¤.</p>
<p>ê¸°ë³¸ì ìœ¼ë¡œ 5ë¶„ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ê·¸ ì‚¬ì´ì— ë™ì¼í•œ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ë©´ ìºì‹œëœ ë°ì´í„°ë¥¼ í™œìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<p>gcTimeì˜ ì„¤ì •ì´ ë¦¬ì•¡íŠ¸ ì½”ë“œìƒì—ì„œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ ì¡°ê±´ì„ ê¾¸ë©°ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ì•„ë˜ì™€ ê°™ì´ App.jsx íŒŒì¼ì„ ìˆ˜ì •í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Todo</span> <span class="nx">from</span> <span class="s1">&#39;./components/Todo&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;./App.css&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">show</span><span class="p">,</span> <span class="nx">setShow</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setShow</span><span class="p">(</span><span class="o">!</span><span class="nx">show</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Todo</span> <span class="nx">Toggle</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">show</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">Todo</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>ê·¸ë¦¬ê³  ë°±ì—”ë“œ ì„œë²„ì— ë‹¤ì‹œ 3ì´ˆê°„ì˜ ì§€ì—° ì½”ë“œë¥¼ ì¶”ê°€í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/todos&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">3000</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">todo</span><span class="p">.</span><span class="nx">findMany</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// return res.status(500).json({ message: &#34;ê°•ì œ ì„œë²„ ì—ëŸ¬&#34; });
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ë¨¼ì €, gcTime ì„¤ì • ì—†ì´ í…ŒìŠ¤íŠ¸í•´ ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;todos&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjvi5yPb2KgUVN9fc00enqMZSEe29OB12JkAFLWiT0C0jEvBGePr9-kQ3bbwwLlpmTsBeWoR6jY4nnYsLKYxFijKJ_yL91dhSyFpi1cOBCyxe2WtqggHzuuuf3pW3lKfoAjxuLfRjRqvhXqiEIXVOI-oLwv3HyE94PugwnKxayUAP9DhWXuMFTUYO5a6gY"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì¼ë‹¨ ìœ„ì™€ ê°™ì´ ë‚˜ì˜µë‹ˆë‹¤.</p>
<p>ë„¤íŠ¸ì›Œí¬ íƒ­ì„ ìì„¸íˆ ë³´ì…”ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ì´ì œ í† ê¸€ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ Todo ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ¨ê²¨ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>ë„¤íŠ¸ì›Œí¬ íƒ­ì€ ì•„ë˜ì™€ ê°™ì´ ë³€ë™ì´ ì—†ìŠµë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg7sYFgACVhlmXyQPmd6D2iFVcnTQYXgKcYolLRbAMwU2hc0waGLk3x5SPKl2tPnhVWZ7dQHT6BVpnFEAf5A4hoE7S37olWGtccs49Hp8oHZfO6XWelk_UANcFmEAsWKvaDsL6SFMniO7x140l_hTGcEgG-3s1tcTBj0fHqLEiqBTTdSBa1kIeSP74PZjg"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ì™€ ê°™ì´ ì•„ë¬´ëŸ° ë³€í™”ê°€ ì—†ë„¤ìš”.</p>
<p>ì´ì œ ë‹¤ì‹œ í† ê¸€ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³¼ê¹Œìš”?</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhDpefULz9tGxjQETjunZJQm76etcI4I3SeroqNZvG9CkIJchiD8KxERUnKCfCdCVvMvM5Gk4MvU-uNeniq-g1rjr6H2A5xXi1IgmVtZTxZ-u7WhZ5fTbO_OdH5RoMJD7zJ5J7GPtRI5p8jdsMNxMIPDFWpDdYORLRZs81xpBiHTOyJ9LEP1b5jirzRo_I"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ì™€ ê°™ì´ &lsquo;Loading&hellip;&rsquo; ë¬¸êµ¬ëŠ” ë³´ì´ì§€ ì•Šê³  ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œëŠ” todos ë¼ìš°íŒ…ìœ¼ë¡œ ë¦¬í€˜ìŠ¤íŠ¸ê°€ ìš”ì²­ë˜ì–´ì§‘ë‹ˆë‹¤.</p>
<p>3ì´ˆê°„ ì‰¬ë¼ê³  í–ˆê¸° ë•Œë¬¸ì— 3ì´ˆê°„ (pending)ì´ë¼ê³  í‘œì‹œë˜ê³  ìˆì£ .</p>
<hr>
<h2 id="15-gctime-ì„¤ì •ì„-0ìœ¼ë¡œ-í•˜ê¸°">15. <a name='gcTime0'></a>gcTime ì„¤ì •ì„ 0ìœ¼ë¡œ í•˜ê¸°</h2>
<p>ì´ì œ gcTimeì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ê³  í…ŒìŠ¤íŠ¸ í•´ ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todos&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">gcTime</span><span class="o">:</span>ã€€<span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ì„ ëˆ„ë¥´ê³  ë³´ì‹œë©´ ì²«ë²ˆì§¸ëŠ” &lsquo;Loading&hellip;&rsquo; ë¬¸êµ¬ê°€ ë³´ì´ê³ , í† ê¸€ ë²„íŠ¼ì„ ëˆŒë €ë‹¤ê°€ ë‹¤ì‹œ ëˆŒëŸ¬ë„ &lsquo;Loading&hellip;&rsquo; ë¬¸êµ¬ê°€ ë³´ì¼ ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjmbuNmxCyzFfvfAJcSap3XZM8T8_fj6jSksc6gPKji99E6S8l5rp2p70WsdW4NDGVK0Cx1frFrmFnimawASqklMozwoSVVHOSnBqlx2p44k9DfaC_yuw-3qvG_ylEuFALpMQDRnEnaowYyENq0RZYPif7Wzt7Q9FxIrrI4znoG5GOxhrojvnLb_bQMFIY"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ë³´ì¼ê±´ë°ìš”.</p>
<p>ì´ê²Œ ì™œ ê·¸ëŸ°ê±°ëƒë©´ ë°”ë¡œ gcTimeì´ 0ìœ¼ë¡œ ì„¸íŒ…ë˜ì–´ ê·¸ëŸ° ê²ë‹ˆë‹¤.</p>
<p>gcTimeì´ 0ìœ¼ë¡œ ì„¸íŒ…ë˜ë©´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ ê·¸ ì¦‰ì‹œë¡œ ìºì‹œ ë°ì´í„°ê°€ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ë˜ë¯€ë¡œ ìºì‹œ ë°ì´í„°ì— ì˜ì¡´í•˜ì§€ ëª»í•˜ê³  ë‹¤ì‹œ ì„œë²„ì— ë¦¬í€˜ìŠ¤íŠ¸í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ &lsquo;Loading&hellip;&rsquo; ë¬¸êµ¬ê°€ ë³´ì´ê²Œ ë˜ëŠ” ê²ë‹ˆë‹¤.</p>
<hr>
<h2 id="16-devtools-ì„¤ì •">16. <a name='Devtools'></a>Devtools ì„¤ì •</h2>
<p>TanStack Query ì „ìš©ìœ¼ë¡œ Devtoolsê°€ ì¤€ë¹„ë˜ì–´ ìˆì–´ ë””ë²„ê·¸í•˜ê¸° ì•„ì£¼ ì‰¬ìš´ë°ìš”.</p>
<p>ì¼ë‹¨ Devtools íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm i @tanstack/react-query-devtools</span></span></code></pre></div>
  </figure>
</div>
<p>Devtoolsë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ main.jsx íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ê³ ì³ì•¼ í•©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom/client&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.jsx&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">QueryClient</span><span class="p">,</span> <span class="nx">QueryClientProvider</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@tanstack/react-query&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ReactQueryDevtools</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@tanstack/react-query-devtools&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// import &#39;./index.css&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">queryClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QueryClient</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">createRoot</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)).</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">StrictMode</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">QueryClientProvider</span> <span class="nx">client</span><span class="o">=</span><span class="p">{</span><span class="nx">queryClient</span><span class="p">}</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">ReactQueryDevtools</span> <span class="nx">initialIsOpen</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/QueryClientProvider&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/React.StrictMode&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span></span></span></code></pre></div>
  </figure>
</div>
<p>ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ í™”ë©´ í•˜ë‹¨ ì˜¤ë¥¸ìª½ì— ì•„ë˜ì™€ ê°™ì€ ì•„ì´ì½˜ì´ ë‚˜íƒ€ë‚  ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgkAdg7RnXLHmAr7UEvHKHw866d9nYJh_0QG1bppSlA3dAvpBec0u7LoZdjBmpaTTsT89ZyiPLL29JwkR0nROX2BnAWbJJhpcj7p4eMyDdlp-BLmsoIzDPNi8Y6nRHtEYk1f4bp0blFyMcoBaoPrZnQmbUASaFKxrKzPuQB3d77Q_8WSRRqR4EXS2JwbUk"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>í´ë¦­í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgZGld5YuKpL6zT-CgShFdaPEmAQpQ-6IPUBDSo4iKobKf8j1yvE21ZCEpQm4VIi2StEPbJhd8QqAaCUlMwzD_HpIHW3gAXcvURx1VZj-q7c298LI5Z7i1QfYAtTLB6mWgsmmS4duSuk3uwScrqMATrzRz-UDk9csKcyLgunuaA-pBS-3WBombQ8GhW2io"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ìœ„ì™€ ê°™ì´ Devtoolsê°€ ë‚˜íƒ€ë‚  ê²ë‹ˆë‹¤.</p>
<p>ìœ„ í™”ë©´ì„ ë³´ì‹œë©´ ì•„ê¹Œ useQueryì— ë„£ì—ˆë˜ &lsquo;queryKey&rsquo; ê°’ì¸ &rsquo;todos&rsquo; ê°’ì´ ë³´ì´ê³ ìš”.</p>
<p>ê·¸ë¦¬ê³  Fresh, Fetching, Paused, Stale, Inacive ë“±ì˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ ì—¬ëŸ¬ ê°€ì§€ ì˜µì…˜ì„ ë‘ì–´ Fresh, Fetching, Paused, Stale, Inacive ë“±ì„ ì‰½ê²Œ ê´€ì°°í•  ìˆ˜ ìˆëŠ”ê²ë‹ˆë‹¤.</p>
<p>ëª¨ë“  ì˜µì…˜ì„ ì§€ìš°ê³  ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ë©´ Fetching ê°’ì´ 1ë¡œ ë³€í•˜ë‹¤ê°€ ë‹¤ì‹œ 0ìœ¼ë¡œ ë°”ë€ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;todos&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ê·¸ë¦¬ê³  Stale ê°’ì´ 1ë¡œ ë°”ë€Œì£ .</p>
<p>ì´ì œ í† ê¸€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ Inactive ê°’ì´ 1ë¡œ ë°”ë€Œê²Œ ë©ë‹ˆë‹¤.</p>
<p>ë‹¹ì—°í•œê±°ì£ . í™”ë©´ì— ì•ˆ ë³´ì´ë‹ˆê¹Œìš”.</p>
<p>ì´ì œ ë‹¤ì‹œ í† ê¸€ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³¼ê¹Œìš”?</p>
<p>Fetching ê°’ì´ 1ë¡œ ë³€í•˜ë‹¤ê°€ ë‹¤ì‹œ 0ìœ¼ë¡œ ë³€í•˜ê³ , Stale ê°’ì´ 0ì—ì„œ 1ë¡œ ë³€í•©ë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ê¹Œì§€ ì „ë¶€ ì˜ˆì¸¡í•  ìˆ˜ ìˆëŠ”ê±´ë°ìš”.</p>
<p>ì¦‰, Devtoolsê°€ ì•„ì£¼ ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œë‹¤ëŠ” ëœ»ì´ì£ .</p>
<hr>
<h2 id="17-staletimeì„-ì„¤ì •í•œ-ê²½ìš°">17. <a name='staleTime-1'></a>staleTimeì„ ì„¤ì •í•œ ê²½ìš°</h2>
<p>ì´ì œ ì•„ë˜ì™€ ê°™ì´ staleTimeì„ 5ì´ˆë¡œ ì„¤ì •í•´ ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todos&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">staleTime</span><span class="o">:</span> <span class="mi">5000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ì œ ë¸Œë¼ìš°ì €ë¥¼   Fetching ê°’ì´ 1ì—ì„œ 0ìœ¼ë¡œ ë³€í•˜ê³  ê·¸ ë‹¤ìŒìœ¼ë¡œ Fresh ê°’ì´ 0ì—ì„œ 1ë¡œ ë³€í•  ê²ë‹ˆë‹¤.</p>
<p>ê·¸ë¦¬ê³  5ì´ˆê°€ ì§€ë‚˜ë©´ ë‹¤ì‹œ Stale ê°’ì´ 1ë¡œ ë³€í•  ê²ë‹ˆë‹¤.</p>
<p>ì¦‰, staleTime ê°’ì„ 5ì´ˆë¡œ ë‘ì—ˆê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ê°€ ìƒˆë¡œê³ ì¹¨í•˜ê³  fetchingì´ ëë‚  ë•Œ ì¿¼ë¦¬ê°€ fresh í•˜ë‹¤ëŠ” ëœ»ì´ì£ .</p>
<p>ê·¸ë¦¬ê³  5ì´ˆê°€ ì§€ë‚˜ë©´ ì‹ ì„ í•˜ì§€ ì•Šì€ stale ìƒíƒœê°€ ë˜ëŠ” ê±°ì£ .</p>
<p>ì•„ì£¼ ì§ê´€ì ì´ë©° ì´í•´í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°ë¡œ ë˜ì–´ ìˆì–´ TanStack Queryë¥¼ ì¢€ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.</p>
<hr>
<h2 id="18-gctimeì„-0ìœ¼ë¡œ-ì„¤ì •í•˜ë©´">18. <a name='gcTime0-1'></a>gcTimeì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ë©´</h2>
<p>staleTime ì˜µì…˜ì„ ì§€ìš°ê³  gcTime ì„ 0ìœ¼ë¡œ ì„¤ì •í•´ ë³¼ê¹Œìš”?</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">todos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;todos&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchTodos</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">gcTime</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ë©´ fetching ê°’ì´ 1ì—ì„œ 0ìœ¼ë¡œ ë°”ë€Œê³  ê·¸ë‹¤ìŒ stale ê°’ì´ 0ì—ì„œ 1ë¡œ ë°”ë€ë‹ˆë‹¤.</p>
<p>ì´ ìƒíƒœì—ì„œ í† ê¸€ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³¼ê¹Œìš”?</p>
<p>ì‹ ê¸°í•˜ê²Œë„ DevToolsì—ëŠ” ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ &rsquo;todos&rsquo; ì¿¼ë¦¬í‚¤ê°€ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEiMjOLU4RQtWc_AzQVDdTGvNw0ljJN3wh0HM9A8PhJEB6TrQ5yUaYVy2M_pxN40D0PNZacYvSOTulIxucmzCJympt2mcs2dvuqgJpC2yUeEXTECY0H7AfphoKYVcOUCxoUkxiSuRpKtZ8lsc5lzuDPtdR8sowLGyRaOtLO2wRzV4MGU0EIUPLa0TPH23rY"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì™œëƒí•˜ë©´ gcTimeì´ 0ì´ë¼ëŠ” ëœ»ì´ì£ . ë‹¤ì‹œ ë§í•´ ê°€ë¹„ì‹œ ì»¬ë ‰íŠ¸ê°€ ë°”ë¡œ ìˆ˜í–‰ëœë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.</p>
<p>ì¦‰, í† ê¸€ ë²„íŠ¼ìœ¼ë¡œ Todo ì»´í¬ë„ŒíŠ¸ë¥¼ ì—†ì• ë²„ë¦¬ë©´ Query ìºì‹œê°€ ë°”ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰íŠ¸ ë˜ê¸° ë•Œë¬¸ì— ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ &rsquo;todos&rsquo; ì¿¼ë¦¬ ìì²´ê°€ ì—†ì–´ì ¸ ë²„ë¦° ê²ë‹ˆë‹¤.</p>
<p>gcTimeì„ ì¢€ ë” ì§ê´€ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë„¤ìš”.</p>
<p>gcTimeì„ 5,000(5ì´ˆ)ìœ¼ë¡œ ì„¤ì •í•œ ê²½ìš°ì—ëŠ” í† ê¸€ ë²„íŠ¼ì„ ëˆ„ë¥¸ í›„ 5ì´ˆ í›„ì— <code>[â€œtodosâ€]</code>ê°€ ì‚¬ë¼ì§ˆ ê²ë‹ˆë‹¤.</p>
<hr>
<h2 id="19-ì—¬ëŸ¬-usequery-ì„¤ì •">19. <a name='useQuery-1'></a>ì—¬ëŸ¬ useQuery ì„¤ì •</h2>
<p>ì§€ê¸ˆê¹Œì§€ëŠ” todos ì¿¼ë¦¬ ë°–ì— ì—†ì—ˆëŠ”ë°ìš”.</p>
<p>Prismaë¥¼ ì´ìš©í•´ì„œ User ëª¨ë¸ì„ ì¶”ê°€í•˜ê³  users ì¿¼ë¦¬ë„ ì¶”ê°€í•´ ë´…ì‹œë‹¤.</p>
<p>ì¼ë‹¨ ëª¨ë“  ê°œë°œ ì„œë²„ë¥¼ ë•ì‹œë‹¤.</p>
<p>ë°±ì—”ë“œ í´ë”ì˜ prisma í´ë”ì—ì„œ schema.prisma íŒŒì¼ì— ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">model Users <span class="o">{</span>
</span></span><span class="line"><span class="cl">    id          Int @id @default<span class="o">(</span>autoincrement<span class="o">())</span>
</span></span><span class="line"><span class="cl">    name        String
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>Usersë¼ëŠ” ëª¨ë¸ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ ë‹¤ì‹œ db push í•´ì•¼í•©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx prisma db push</span></span></code></pre></div>
  </figure>
</div>
<p>Prisma Studioë¥¼ í†µí•´ users í…Œì´ë¸”ì— ë”ë¯¸ ë°ì´í„° ëª‡ ê°œ ì¶”ê°€í•´ ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npx prisma studio</span></span></code></pre></div>
  </figure>
</div>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgn1zQQxZX-Dj_SySqatIPT1wU8haImKtwAAqF2duDmiPyV339pczm-bWsLFOXwdXEWClGEeHEepxH4UHxD5gSB8yQ-D_hkQGDpl7EadOXjLybycKChOASRb0Z0eOfE6MWHyKWPKu8U2kSBPXyypDoMs0Hxp_uTzztWc18z9cHyUX_mJ3Q9wMR8Tj2mhN4"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì´ì œ express ì„œë²„ì— &lsquo;/users&rsquo; ë¼ìš°íŒ…ì„ ì¶”ê°€í•©ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/users&#34;</span><span class="p">,</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">3000</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">prisma</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">findMany</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
<p>ë°±ì—”ë“œ ê°œë°œ ì„œë²„ë¥¼ ëŒë ¤ í…ŒìŠ¤íŠ¸í•´ ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl http://localhost:3000/users
</span></span><span class="line"><span class="cl"><span class="o">[{</span><span class="s2">&#34;id&#34;</span>:1,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;john&#34;</span><span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;id&#34;</span>:2,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;jane&#34;</span><span class="o">}]</span></span></span></code></pre></div>
  </figure>
</div>
<p>ìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ëŠ” ì œëŒ€ë¡œ ì‘ë™í•˜ë„¤ìš”.</p>
<p>ì´ì œ ë¦¬ì•¡íŠ¸ ì½”ë“œì— users í…Œì´ë¸”ì„ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ë¥¼ ì¶”ê°€í•´ ë´…ì‹œë‹¤.</p>
<p>components í´ë”ì— Users.tsx íŒŒì¼ì„ ë§Œë“¤ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s2">&#34;axios&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@tanstack/react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">fetchUsers</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;http://localhost:3000/users&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isPending</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isError</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span> <span class="nx">users</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">error</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;users&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryFn</span><span class="o">:</span> <span class="nx">fetchUsers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">isPending</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="p">...</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nb">Error</span><span class="o">:</span> <span class="p">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/span&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Users</span> <span class="nx">List</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">users</span> <span class="o">&amp;&amp;</span> <span class="nx">users</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;)}</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">Users</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>Todo ì»´í¬ë„ŒíŠ¸ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.</p>
<p>ì´ì œ ë‹¤ì‹œ App.jsx íŒŒì¼ì—ì„œ Users ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì™€ ë´…ì‹œë‹¤.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Todo</span> <span class="nx">from</span> <span class="s2">&#34;./components/Todo&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Users</span> <span class="nx">from</span> <span class="s2">&#34;./components/Users&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;./App.css&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">show</span><span class="p">,</span> <span class="nx">setShow</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setShow</span><span class="p">(</span><span class="o">!</span><span class="nx">show</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Todo</span> <span class="nx">Toggle</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">show</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">Todo</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">show</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">Users</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>ì´ì œ ë¸Œë¼ìš°ì €ì—ì„œ ë³´ì‹œë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°ìš”.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgVXskarjCe2XYbObr55wryNyJNKz0NiJ_p9a7SIVujLZ65riCvjApDyvKiiX_AINWMbkdgYMcOsIUsngljayqC17LwGyT0lSqmepVFi6D89mopjurCsO77nB0RGA7Zphp1pmM2Lf4R4eUk6RkIic00TxWMBe7FjHvBSCnbyi0gULrGKkTfycGg_X9Hg6U"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì¿¼ë¦¬ ë‘ ê°œê°€ Devtoolsì—ì„œ ë³´ì…ë‹ˆë‹¤.</p>
<p>ì¿¼ë¦¬ ê°ê°ì„ í•˜ë‚˜ì”© í´ë¦­í•˜ë©´ í•´ë‹¹ ì¿¼ë¦¬ì˜ ì„¸ë¶€ì‚¬í•­ì„ ë³¼ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.</p>
<p>
  <figure>
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjRUoYlaI8r7XepN0PihjEYUcagkEEN5sl1Z4Zdqz62ikQ2xVyZ01e3s5QQyCWviGEPFfFLSXB8tlvyNrbgxGArWZPgJgqUXwyBsyBBa7xZ9YSSsjtBh7wG1LN_BhCEVQETm6uiO3OTYkEiEC9o3CRRNq7SyNNCGYGC4lsAHe-nI0YtSvUhT2yUmMcNe4g"
         alt=""
         
         class="img-fluid"
         loading="lazy"
         decoding="async" />
    
  </figure></p>
<p>ì´ë ‡ë“¯ Devtoolsë§Œ ìˆìœ¼ë©´ ì•„ì£¼ ì‰½ê²Œ ì¿¼ë¦¬ë¥¼ ë””ë²„ê·¸ í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œìš”.</p>
<p>ê¼­ ê°œë°œí• ë•ŒëŠ” ê°™ì´ ì„¤ì¹˜í•´ì„œ ì‚¬ìš©í•˜ì‹­ì‹œìš”.</p>
<p>ì•„ì£¼ í¸í•©ë‹ˆë‹¤.</p>
<p>ì§€ê¸ˆê¹Œì§€ TanStack Queryì— ëŒ€í•´ ì‚´í´ë³´ì•˜ëŠ”ë°ìš”.</p>
<p>ì œê°€ ë§›ë³´ê¸°ë¡œ ì„¤ëª…í•œ ê¸°ëŠ¥ ë§ê³  ì •ë§ ë§ì€ ê¸°ëŠ¥ì´ ìˆìœ¼ë‹ˆê¹Œìš”, ê¼­ ê³µì‹ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ë.</p>

      <div class="tag-list-single">
        <a class="btn btn-light" href="/tags/tanstack-query/" role="button">tanstack query</a>
        <a class="btn btn-light" href="/tags/tanstack-query/" role="button">tanstack-query</a>
        <a class="btn btn-light" href="/tags/react/" role="button">react</a>
        </div>
      
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-format="autorelaxed"
          data-ad-client="ca-pub-7748316956330968"
          data-ad-slot="4495825428"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>
</article>

      
      </div>
    </div>
    
    
<div class="bg-light">
    <section class="section section-related container">
      <div class="row justify-content-center">
        <div class="col-md-12 col-lg-12">
          <h2 class="section-title text-center">Related posts</h2>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2024-07-16-use-tanstack-react-query-as-global-state-management/">React Queryë¡œ êµ¬í˜„í•˜ëŠ” ê°„ë‹¨í•˜ê³  ê°•ë ¥í•œ ìƒíƒœ ê´€ë¦¬ ì†”ë£¨ì…˜</a></h2>
                  <p>React Queryë¥¼ í™œìš©í•˜ì—¬ Reduxë‚˜ Zustand ëŒ€ì‹  ê°„ë‹¨í•˜ê³  ê°•ë ¥í•œ ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤. ê¸°ì¡´ ë°ì´í„° í˜ì¹­ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ë¹„ë™ê¸° ìƒíƒœ ê´€ë¦¬ë„ í•¨ê»˜ ë‹¤ë£¨ì–´ë´…ë‹ˆë‹¤.</p>
                  <p>
  <small>July 16, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>9&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2024-12-29-nextjs-supabase-tutorial-1-making-template-and-omit-middleware/">Next.js 15, Supabase ê°•ì¢Œ 1í¸. ìœ ì € ì¸ì¦(Auth)ì„ ìœ„í•œ Next.js 15ì™€ Supabase í…œí”Œë¦¿ ë§Œë“¤ê¸°</a></h2>
                  <p>nextjs</p>
                  <p>
  <small>December 29, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>7&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2024-12-29-ssr-login-with-react-router-and-supabase/">React Router V7ì—ì„œ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§(SSR) ë°©ì‹ìœ¼ë¡œ ì™„ë²½í•˜ê²Œ Supabase ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸°</a></h2>
                  <p>Supabaseì˜ ë¡œê·¸ì¸ ë¶€ë¶„ì„ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œìª½ ë§ê³  ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ ë´…ì‹œë‹¤.</p>
                  <p>
  <small>December 29, 2024<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>7&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          </div>
      </div>
    </section>
    <script src="https://utteranc.es/client.js"
      repo="cpro95/utterances_mycodings_fly_dev"
      issue-term="pathname"
      theme="github-light"
      label="blog-comment"
      crossorigin="anonymous"
    async>
    </script>
  </div>
  
    <footer class="footer text-muted">
  <div class="container-lg">
    <div class="row">
      <div class="col-lg-8 text-center text-lg-start">
        <ul class="list-inline">
          <li class="list-inline-item"><a class="text-muted" href="/about/">about</a></li>
        </ul>
      </div>
      <div class="col-lg-8 text-center text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item">Copyright (c) All Right Reserved.</li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    

<script async
  src="/js/app.19b73e0182301dd61c9211c2f6890104740e2eb9eb12fe4ba8d4f31435b22ed6.js"
  integrity="sha256-Gbc&#43;AYIwHdYckhHC9okBBHQOLrnrEv5LqNTzFDWyLtY=">
</script>





<script async
  src="/js/flexsearch.5dd6433c29c3e043627f046054aed58ff3790f58fdb8423f45125bbafdcad335.js"
  integrity="sha256-XdZDPCnD4ENifwRgVK7Vj/N5D1j9uEI/RRJbuv3K0zU=">
</script>
<script async
  src="/js/search-modal.96e662d8f691fe25c859a3437074b485f2d7bed0bca612725028c6cf4322e2f2.js"
  integrity="sha256-luZi2PaR/iXIWaNDcHS0hfLXvtC8phJyUCjGz0Mi4vI=">
</script>

    <div class="d-inline-flex fixed-bottom-right pb-4 pe-4">
  <button id="toTop" type="button" class="btn btn-primary rounded-circle ms-auto p-2"><span class="visually-hidden">Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 15l6 -6l6 6"></path></svg></button>
</div>

    
  </body>
</html>
