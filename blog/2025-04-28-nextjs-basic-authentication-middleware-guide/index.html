<!doctype html>
<html lang="ko" data-bs-theme="auto">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://mycodingshub.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<script 
  src="/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js"
  integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg=">
</script>


<link rel="stylesheet" href="/main.86b7305f5a96b7dd3a46fa6277d87b125af3bf13f48c4cfcc269be84fa9e8fb75375d45a5fe9056ce9190644b7a6e5f13f917f12d853ed38bb76d8856898f755.css" integrity="sha512-hrcwX1qWt906Rvpid9h7ElrzvxP0jEz8wmm+hPqej7dTddRaX+kFbOkZBkS3puXxP5F/EthT7Ti7dtiFaJj3VQ==" crossorigin="anonymous">

<noscript><style>img.lazyload { display: none; }</style></noscript><title>Next.js 프로젝트로 Basic Auth(기본 인증) 구현해 보기</title>
<meta name="description" content="Next.js 프로젝트에 간단하면서도 효과적인 보호막을 치는 방법, 바로 기본 인증(Basic Authentication) 설정에 대해 알아보려고 합니다." />
<link rel="canonical" href="https://mycodingshub.github.io/blog/2025-04-28-nextjs-basic-authentication-middleware-guide/" />
<meta name="robots" content="index, follow" />

<meta property="og:type" content="article" />
<meta property="og:title" content="Next.js 프로젝트로 Basic Auth(기본 인증) 구현해 보기" />
<meta property="og:description" content="Next.js 프로젝트에 간단하면서도 효과적인 보호막을 치는 방법, 바로 기본 인증(Basic Authentication) 설정에 대해 알아보려고 합니다." />
<meta property="og:url" content="https://mycodingshub.github.io/blog/2025-04-28-nextjs-basic-authentication-middleware-guide/" />
<meta property="og:site_name" content="Home" />
<meta property="og:image" content="https://mycodingshub.github.io/cover.png" />
<meta property="og:locale" content="en" />
<meta property="article:published_time" content="2025-04-28T10:41:05Z" />
<meta property="article:modified_time" content="2025-04-28T10:41:05Z" />
<meta property="article:tag" content="next.js" />
<meta property="article:tag" content="기본 인증" />
<meta property="article:tag" content="Basic Authentication" />
<meta property="article:tag" content="미들웨어" />
<meta property="article:tag" content="웹 보안" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Next.js 프로젝트로 Basic Auth(기본 인증) 구현해 보기" />
<meta name="twitter:description" content="Next.js 프로젝트에 간단하면서도 효과적인 보호막을 치는 방법, 바로 기본 인증(Basic Authentication) 설정에 대해 알아보려고 합니다." />
<meta name="twitter:image" content="https://mycodingshub.github.io/cover.png" />

<meta name="author" content="cpro95@gmail.com" />

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"Next.js 프로젝트로 Basic Auth(기본 인증) 구현해 보기\"",
  "description": "\"Next.js 프로젝트에 간단하면서도 효과적인 보호막을 치는 방법, 바로 기본 인증(Basic Authentication) 설정에 대해 알아보려고 합니다.\"",
  "datePublished": "\"2025-04-28T10:41:05Z\"",
  "dateModified": "\"2025-04-28T10:41:05Z\"",
  "author": {
    "@type": "Person",
    "name": "\"cpro95@gmail.com\""
  },
  "image": "\"https://mycodingshub.github.io/cover.png\"",
  "url": "\"https://mycodingshub.github.io/blog/2025-04-28-nextjs-basic-authentication-middleware-guide/\"",
  "publisher": {
    "@type": "Organization",
    "name": "\"Home\""
  }
}
</script>




<script async src="https://www.googletagmanager.com/gtag/js?id=G-C7SBETWEJ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C7SBETWEJ0');
</script>


<script
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7748316956330968"
  crossOrigin="anonymous"
></script>


</head>

  
  <body class="single section blog" data-bs-spy="scroll" data-bs-target="#toc" data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll="true" tabindex="0">
    <div class="sticky-top">
<header class="navbar navbar-expand-sm">
  <div class="container-lg">
  <div class="d-flex flex-grow-1 justify-content-between">
    <div class="d-flex flex-row navbar-nav justify-content-between align-items-start gap-2">
    
    <a class="nav-link fw-bold fs-4" href="/">Home</a>

    
    
            <a class="nav-link fs-4  active" href="https://mycodingshub.github.io/blog/" aria-current="true">Blog</a>
          
        
            <a class="nav-link fs-4 " href="https://mycodingshub.github.io/life/">Life</a>
          
        
    </div>
    <div class="d-flex flex-row justify-content-between align-items-center">
      
      
      <button type="button" id="searchToggleMobile" class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      
      <button type="button" id="searchToggleDesktop" class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <circle cx="10" cy="10" r="7"></circle>
          <line x1="21" y1="21" x2="15" y2="15"></line>
        </svg>
      </button>
      
      <button id="buttonColorMode" class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type="button" aria-label="Toggle theme">
        <svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
        </svg>
        <svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0m-5 0h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
        </svg>
      </button>
      </div>
        
        
        
        
        </div>
    </div>

    
    </div>
</header>
</div>

<div class="modal" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 visually-hidden" id="searchModalLabel">Search</h1>
        <button type="button" class="btn-close visually-hidden" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="search-input flex-grow-1 d-none">
          <form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search">
            <label for="query" class="visually-hidden">Search</label>
            <div class="d-flex">
              <input type="search" id="query" name="query" class="search-text form-control form-control-lg" placeholder="Search" aria-label="Search" maxlength="128" autocomplete="off">
              <button type="button" class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-body">
        <p class="search-loading status message d-none mt-3 text-center">Loading search index…</p>
        <p class="search-no-recent message d-none mt-3 text-center">No recent searches</p>
        <p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class="query-no-results">Query here</span></strong>"</p>
        <div id="searchResults" class="search-results"></div>
        <template>
          <article class="search-result list-view">
            <div class="card my-3">
              <div class="card-body">
                <header>
                  <h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href="#">Title here</a></h2>
                  <div class="submitted d-none"><time class="created-date">Date here</time></div>
                </header>
                <div class="content">Summary here</div>
              </div>
            </div>
          </article>
        </template>
      </div>
      <div class="modal-footer">
        <ul class="list-inline me-auto d-none d-md-block">
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd><span class="DocSearch-Label">to select</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd><span class="DocSearch-Label">to navigate</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd><span class="DocSearch-Label">to close</span></li>
        </ul>
        <p class="d-md-none">Search by <a class="text-decoration-none" href="https://github.com/nextapps-de/flexsearch">FlexSearch</a></p>
      </div>
    </div>
  </div>
</div>


    <div class="wrap container-lg" role="document">
      <div class="content">
      
        
<article>
  <div class="row justify-content-center">
    <div class="col-md-12 col-lg-12">
      
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-7748316956330968"
        data-ad-slot="2971373181"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      <div class="blog-header">
        <h1>Next.js 프로젝트로 Basic Auth(기본 인증) 구현해 보기</h1>
        <p>
  <small>April 28, 2025<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>7&nbsp;minutes</span></small>
</p>

      </div>
    </div>
      <div class="col-md-12 col-lg-12">
      
      <p>안녕하세요!</p>
<p>오늘은 Next.js 프로젝트에 간단하면서도 효과적인 보호막을 치는 방법, 바로 기본 인증(Basic Authentication) 설정에 대해 알아보려고 합니다.</p>
<p>웹사이트의 특정 페이지들을 아무나 들어오지 못하게 막고 싶을 때, 예를 들어 아직 개발 중인 페이지나 내부 관리자 페이지만 허가된 사용자에게 보여주고 싶을 때 유용하게 사용할 수 있는 방법입니다.</p>
<p>마치 우리 집 현관문에 간단한 도어락을 설치하는 것과 비슷하다고 생각하면 이해하기 쉬울 것 같습니다.</p>
<p>이 글에서는 Next.js의 강력한 기능 중 하나인 미들웨어(Middleware)를 활용해서 어떻게 기본 인증(Basic Authentication)을 구현하는지, 마치 옆에서 알려주듯 차근차근 설명해 드릴 예정입니다.</p>
<h3 id="1-기본-인증basic-authentication이란-무엇일까요">1. 기본 인증(Basic Authentication)이란 무엇일까요?</h3>
<p>먼저 기본 인증(Basic Authentication)이 정확히 무엇인지부터 짚고 넘어가야 하는데요.</p>
<p>이것은 웹 통신 규약인 HTTP(Hypertext Transfer Protocol)에서 정의된 가장 기본적인 사용자 인증 방식 중 하나입니다.</p>
<p>작동 원리는 생각보다 간단합니다.</p>
<ol>
<li>사용자가 보호된 페이지에 접속하려고 하면, 웹 서버는 &ldquo;이봐요, 여기는 아무나 들어올 수 없으니 신분증(아이디와 비밀번호)을 보여주세요!&ldquo;라는 의미의 신호(401 Unauthorized 응답 코드와 함께 <code>WWW-Authenticate</code> 헤더)를 브라우저에게 보냅니다.</li>
<li>이 신호를 받은 웹 브라우저는 사용자에게 아이디와 비밀번호를 입력하라는 작은 팝업창을 띄워줍니다.</li>
<li>사용자가 아이디와 비밀번호를 입력하고 확인을 누르면, 브라우저는 이 정보를 <code>아이디:비밀번호</code> 형식으로 합친 뒤, 베이스64(Base64)라는 방식으로 간단하게 인코딩(부호화)합니다. <strong>중요한 점은 베이스64(Base64)는 암호화가 아니라는 것입니다!</strong> 그냥 특정 규칙에 따라 글자들을 잠시 다른 모습으로 바꾸는 것뿐이라서, 누구든 쉽게 원래의 아이디와 비밀번호로 되돌릴 수 있습니다.</li>
<li>이렇게 인코딩된 값 앞에 &ldquo;Basic &ldquo;이라는 접두사를 붙여서 <code>Authorization</code>이라는 이름표가 붙은 HTTP 헤더(HTTP Header)에 담아 웹 서버로 다시 요청을 보냅니다.</li>
<li>웹 서버는 이 <code>Authorization</code> 헤더를 받아서 베이스64(Base64) 인코딩된 값을 다시 원래의 <code>아이디:비밀번호</code>로 디코딩(해독)한 후, 미리 저장된 정확한 아이디/비밀번호와 일치하는지 비교합니다.</li>
<li>일치하면 &ldquo;오케이, 들어오세요!&rdquo; 하고 페이지 접근을 허용하고(200 OK 응답), 일치하지 않으면 다시 1번 과정처럼 신분증을 요구하는 신호를 보냅니다.</li>
</ol>
<p>이처럼 기본 인증(Basic Authentication)은 구현이 매우 간단하다는 장점이 있지만, 아이디와 비밀번호가 암호화되지 않고 단순히 인코딩만 되어 전송되기 때문에 보안 수준이 높지는 않습니다.</p>
<p>따라서 민감한 정보가 오가는 실제 서비스의 메인 로그인 시스템으로 사용하기에는 부적합합니다.</p>
<p>하지만 앞서 말했듯이, <strong>개발 중인 사이트의 임시 접근 제한</strong>이나 <strong>내부 관리 도구 접근 제어</strong> 등 가벼운 보안이 필요한 상황에서는 아주 유용하게 쓰일 수 있습니다.</p>
<h3 id="2-nextjs-미들웨어middleware-왜-사용할까요">2. Next.js 미들웨어(Middleware), 왜 사용할까요?</h3>
<p>그렇다면 왜 우리는 Next.js의 미들웨어(Middleware)를 사용해서 기본 인증(Basic Authentication)을 구현해야 할까요?</p>
<p>미들웨어(Middleware)는 Next.js에서 특정 페이지 요청이 실제 페이지 로직에 도달하기 <em>전에</em> 먼저 실행되는 코드 조각입니다.</p>
<p>마치 건물의 출입구에 서 있는 보안 요원과 같다고 생각할 수 있습니다. 방문객(웹 요청)이 건물 안(페이지)으로 들어가기 전에 보안 요원(미들웨어)이 먼저 신분증을 확인하거나 방문 목적을 묻는 등의 절차를 거치는 것과 비슷합니다.</p>
<p>이 미들웨어(Middleware)를 사용하면 다음과 같은 장점들이 있습니다.</p>
<ul>
<li><strong>중앙 집중 관리:</strong> 인증 로직을 여러 페이지에 각각 구현할 필요 없이, 미들웨어(Middleware) 파일 하나에서 통합적으로 관리할 수 있습니다. 코드가 깔끔해지고 유지보수가 쉬워집니다.</li>
<li><strong>선제적 대응:</strong> 페이지 콘텐츠가 렌더링되기 전에 미리 인증 체크를 수행하므로, 인증되지 않은 사용자의 불필요한 접근 시도를 원천적으로 차단할 수 있습니다.</li>
<li><strong>유연한 경로 설정:</strong> 어떤 경로(페이지들)에 이 미들웨어(Middleware)를 적용할지 유연하게 설정할 수 있습니다. 예를 들어 <code>/admin</code>으로 시작하는 모든 경로에만 인증을 적용하거나, 특정 페이지만 보호하는 것이 가능합니다.</li>
</ul>
<p>따라서 넥스트JS(Next.js)에서 기본 인증(Basic Authentication)과 같은 요청 전처리 로직을 구현할 때는 미들웨어(Middleware)가 아주 이상적인 선택지입니다.</p>
<h3 id="3-차근차근-따라-해보는-기본-인증-구현">3. 차근차근 따라 해보는 기본 인증 구현</h3>
<p>자, 이제 이론 설명은 충분히 한 것 같으니 직접 코드를 작성하며 기본 인증(Basic Authentication)을 구현해 보도록 하겠습니다.</p>
<p>Next.js 프로젝트가 이미 준비되어 있다고 가정하고 진행하겠습니다.</p>
<p>(만약 없다면 <code>npx create-next-app@latest</code> 명령어로 간단히 생성할 수 있습니다.)</p>
<p><strong>프로젝트 구조 및 파일 생성</strong></p>
<p>Next.js 프로젝트의 루트 디렉토리(최상위 폴더)나 <code>src</code> 폴더(만약 사용 중이라면) 바로 아래에 <code>middleware.ts</code> 라는 이름의 파일을 생성합니다.</p>
<p>타입스크립트(TypeScript)를 사용하지 않는다면 <code>middleware.js</code>로 생성해도 괜찮습니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <pre tabindex="0"><code>my-next-app/
├── src/                 &lt;-- src 폴더를 사용한다면 이 안에
│   └── middleware.ts    &lt;-- 여기에 미들웨어 파일 생성!
├── pages/
├── public/
├── package.json
└── ... (기타 파일들)

또는

my-next-app/
├── middleware.ts        &lt;-- src 폴더가 없다면 루트에 생성!
├── pages/
├── public/
├── package.json
└── ... (기타 파일들)</code></pre>
  </figure>
</div>
<p><strong>미들웨어 코드 작성 (<code>middleware.ts</code>)</strong></p>
<p>이제 생성한 <code>middleware.ts</code> 파일 안에 다음 코드를 입력합니다.</p>
<p>코드 각 줄이 어떤 역할을 하는지 주석과 함께 자세히 설명해 드리겠습니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// 필요한 모듈들을 가져옵니다. Next.js 서버 기능과 요청/응답 타입을 사용합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">NextResponse</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/server&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">NextRequest</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/server&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 미들웨어 함수를 정의합니다. 모든 미들웨어 로직은 이 함수 안에 작성됩니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kd">function</span> <span class="nx">middleware</span><span class="p">(</span><span class="nx">req</span>: <span class="kt">NextRequest</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 1. 요청 헤더에서 &#39;authorization&#39; 값을 가져옵니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//    브라우저가 보내주는 아이디/비밀번호 정보가 여기에 담겨 있을 수 있습니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">basicAuth</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s1">&#39;authorization&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 2. &#39;authorization&#39; 헤더가 존재하는지 확인합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">basicAuth</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 3. 헤더 값은 보통 &#34;Basic &lt;인코딩된 값&gt;&#34; 형태이므로, &#34;Basic &#34; 부분을 제외한
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    실제 인코딩된 값만 추출합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">authValue</span> <span class="o">=</span> <span class="nx">basicAuth</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 4. 베이스64(Base64)로 인코딩된 값을 디코딩하여 원래의 &#39;아이디:비밀번호&#39; 문자열로 변환합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    Node.js의 내장 Buffer 객체를 사용합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    디코딩된 문자열을 &#39;:&#39; 기준으로 분리하여 아이디와 비밀번호를 각각 변수에 저장합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    만약 &#39;:&#39; 문자가 없다면 분리되지 않고 하나만 반환될 수 있으므로 주의가 필요합니다. (이 예제에서는 기본적인 경우만 다룹니다)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="p">[</span><span class="nx">user</span><span class="p">,</span> <span class="nx">pwd</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">authValue</span><span class="p">,</span> <span class="s1">&#39;base64&#39;</span><span class="p">).</span><span class="nx">toString</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 5. 디코딩된 아이디와 비밀번호가 우리가 설정한 값과 일치하는지 확인합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    ★★★ 중요 ★★★
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    실제 프로젝트에서는 아이디와 비밀번호를 코드에 직접 작성하면 절대 안 됩니다!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    보안상 매우 취약하므로, 반드시 환경 변수(.env 파일 등)를 사용해야 합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//    아래는 환경 변수를 사용하는 예시입니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">expectedUser</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">BASIC_AUTH_USER</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">expectedPassword</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">BASIC_AUTH_PASSWORD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 환경 변수가 설정되었는지 먼저 확인하는 것이 좋습니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">expectedUser</span> <span class="o">||</span> <span class="o">!</span><span class="nx">expectedPassword</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&#34;기본 인증 환경 변수(BASIC_AUTH_USER, BASIC_AUTH_PASSWORD)가 설정되지 않았습니다.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 이 경우, 인증 실패로 처리하거나 서버 에러를 반환할 수 있습니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// 여기서는 간단히 인증 실패로 처리하겠습니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Authentication required.&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">status</span>: <span class="kt">401</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="s1">&#39;WWW-Authenticate&#39;</span><span class="o">:</span> <span class="s1">&#39;Basic realm=&#34;Secure Area&#34;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 사용자가 입력한 정보와 환경 변수에 설정된 정보가 모두 일치하는지 비교합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">user</span> <span class="o">===</span> <span class="nx">expectedUser</span> <span class="o">&amp;&amp;</span> <span class="nx">pwd</span> <span class="o">===</span> <span class="nx">expectedPassword</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// 6. 아이디와 비밀번호가 모두 일치하면, 요청을 그대로 통과시킵니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">//    즉, 사용자가 요청한 페이지로 접근을 허용합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="nx">NextResponse</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 7. &#39;authorization&#39; 헤더가 없거나, 아이디/비밀번호가 일치하지 않으면
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//    인증이 필요하다는 응답(401 Unauthorized)을 보냅니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//    &#39;WWW-Authenticate&#39; 헤더는 브라우저에게 기본 인증 팝업창을 띄우라고 알려주는 역할을 합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Authentication required.&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">status</span>: <span class="kt">401</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;WWW-Authenticate&#39;</span><span class="o">:</span> <span class="s1">&#39;Basic realm=&#34;Secure Area&#34;&#39;</span><span class="p">,</span> <span class="c1">// &#34;Secure Area&#34;는 팝업창에 표시될 영역 이름입니다. 자유롭게 변경 가능합니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 미들웨어를 어떤 경로에 적용할지 설정하는 부분입니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// matcher 배열 안에 지정된 경로 패턴에만 위 middleware 함수가 실행됩니다.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 예: &#39;/about&#39; 페이지와 그 하위 모든 페이지, &#39;/dashboard&#39; 페이지와 그 하위 모든 페이지에 적용
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">matcher</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;/about/:path*&#39;</span><span class="p">,</span> <span class="s1">&#39;/dashboard/:path*&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 예: &#39;/admin&#39;으로 시작하는 모든 경로에 적용하려면: matcher: [&#39;/admin/:path*&#39;]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// 예: 특정 페이지만 보호하려면: matcher: [&#39;/secret-page&#39;]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span></span></span></code></pre></div>
  </figure>
</div>
<p><strong>환경 변수 설정 (<code>.env.local</code>)</strong></p>
<p>위 코드에서 강조했듯이, 아이디와 비밀번호를 코드에 직접 넣는 것은 매우 위험합니다.</p>
<p>대신 프로젝트 루트 디렉토리에 <code>.env.local</code> 파일을 만들고 그 안에 다음과 같이 실제 사용할 아이디와 비밀번호를 환경 변수로 저장합니다.</p>
<p><code>.env.local</code> 파일은 보통 버전 관리 시스템(예: Git)에 포함되지 않도록 <code>.gitignore</code> 파일에 추가하는 것이 좋습니다.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <pre tabindex="0"><code># .env.local 파일 내용

BASIC_AUTH_USER=여기에_사용할_아이디를_입력하세요
BASIC_AUTH_PASSWORD=여기에_사용할_비밀번호를_입력하세요</code></pre>
  </figure>
</div>
<p>이렇게 설정하면 <code>middleware.ts</code> 코드 안의 <code>process.env.BASIC_AUTH_USER</code> 와 <code>process.env.BASIC_AUTH_PASSWORD</code> 부분에서 <code>.env.local</code> 파일에 정의된 값을 안전하게 가져와 사용할 수 있습니다.</p>
<p><strong>서버를 다시 시작해야 환경 변수 변경 사항이 적용됩니다.</strong></p>
<h3 id="4-제대로-작동하는지-확인해봅시다">4. 제대로 작동하는지 확인해봅시다!</h3>
<p>이제 모든 설정이 끝났습니다! 터미널에서 <code>npm run dev</code> (또는 <code>yarn dev</code>) 명령어를 실행하여 Next.js 개발 서버를 시작합니다.</p>
<p>그리고 웹 브라우저를 열어 <code>config</code>의 <code>matcher</code>에 설정한 경로(예: <code>http://localhost:3000/about</code> 또는 <code>http://localhost:3000/dashboard</code>)로 접속해 보세요.</p>
<ul>
<li>정상적으로 설정되었다면, 아이디와 비밀번호를 묻는 작은 팝업창이 나타날 것입니다.</li>
<li><code>.env.local</code> 파일에 설정한 아이디와 비밀번호를 정확히 입력하면 해당 페이지로 이동합니다.</li>
<li>만약 잘못된 정보를 입력하거나 취소를 누르면 &ldquo;Authentication required.&rdquo; 라는 메시지가 보이거나 계속 팝업창이 뜰 것입니다.</li>
<li><code>matcher</code>에 설정하지 않은 다른 페이지(예: 홈페이지 <code>/</code>)는 아무런 제약 없이 바로 접근될 것입니다.</li>
</ul>
<h3 id="주의할-점-및-보안-고려-사항">주의할 점 및 보안 고려 사항</h3>
<p>기본 인증(Basic Authentication)은 구현이 간단하지만, 몇 가지 중요한 주의사항이 있습니다.</p>
<ul>
<li><strong>베이스64(Base64)는 암호화가 아닙니다:</strong> 앞서 강조했듯이, 베이스64(Base64)는 누구나 쉽게 원래 값으로 되돌릴 수 있는 인코딩 방식일 뿐입니다. 따라서 네트워크 통신 중간에 누군가 데이터를 가로챈다면 아이디와 비밀번호가 그대로 노출될 위험이 있습니다.</li>
<li><strong>반드시 HTTPS 사용:</strong> 이 문제를 해결하는 가장 중요한 방법은 웹사이트 전체에 HTTPS(SSL/TLS 암호화)를 적용하는 것입니다. HTTPS는 브라우저와 서버 간의 모든 통신 내용을 암호화하므로, 기본 인증(Basic Authentication) 헤더 정보도 암호화된 상태로 전송되어 중간에서 가로채더라도 내용을 알아볼 수 없게 만듭니다. <strong>HTTPS 없이 HTTP 환경에서 기본 인증을 사용하는 것은 매우 위험합니다.</strong></li>
<li><strong>적절한 사용처:</strong> 보안 강도가 낮기 때문에, 외부에 완전히 공개되는 서비스의 메인 로그인 기능으로는 절대 사용하면 안 됩니다. 대신, 내부 테스트 환경, 개발 버전 미리보기, 간단한 관리자 페이지 접근 제한 등 <strong>신뢰할 수 있는 소수의 사용자만 접근</strong>하고 <strong>민감 정보 유출 위험이 적은 곳</strong>에 제한적으로 사용하는 것이 바람직합니다.</li>
</ul>
<h3 id="마무리하며">마무리하며</h3>
<p>오늘은 넥스트JS(Next.js)의 미들웨어(Middleware)를 활용하여 기본 인증(Basic Authentication)을 설정하는 방법에 대해 자세히 알아보았습니다.</p>
<p>간단한 설정만으로도 특정 페이지에 대한 접근을 효과적으로 제어할 수 있다는 것을 확인하셨을 텐데요.</p>
<p>핵심은 <strong>미들웨어(Middleware) 파일을 생성</strong>하고, 요청 헤더에서 <strong><code>Authorization</code> 정보를 확인</strong>한 뒤, <strong>베이스64(Base64) 디코딩</strong>을 통해 얻은 아이디/비밀번호를 <strong>환경 변수에 저장된 값과 비교</strong>하는 것입니다.</p>
<p>그리고 보안을 위해 <strong>아이디/비밀번호는 반드시 환경 변수로 관리</strong>하고, <strong>HTTPS 사용을 필수</strong>로 해야 한다는 점을 꼭 기억해 주시길 바랍니다.</p>
<p>이제 여러분의 넥스트JS(Next.js) 프로젝트에도 필요에 따라 간단한 보호 장치를 마련할 수 있게 되었습니다!</p>
<p>물론 더 강력한 보안이 필요하다면 OAuth, JWT(JSON Web Token) 등 다른 인증 방식들을 알아보는 것이 좋겠지만, 기본 인증(Basic Authentication)은 특정 상황에서 아주 빠르고 간편하게 적용할 수 있는 유용한 도구임은 틀림없습니다.</p>

      <div class="tag-list-single">
        <a class="btn btn-light" href="/tags/next.js/" role="button">next.js</a>
        <a class="btn btn-light" href="/tags/%EA%B8%B0%EB%B3%B8-%EC%9D%B8%EC%A6%9D/" role="button">기본 인증</a>
        <a class="btn btn-light" href="/tags/basic-authentication/" role="button">Basic Authentication</a>
        <a class="btn btn-light" href="/tags/%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/" role="button">미들웨어</a>
        <a class="btn btn-light" href="/tags/%EC%9B%B9-%EB%B3%B4%EC%95%88/" role="button">웹 보안</a>
        </div>
      
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-format="autorelaxed"
          data-ad-client="ca-pub-7748316956330968"
          data-ad-slot="4495825428"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>
</article>

      
      </div>
    </div>
    
    
<div class="bg-light">
    <section class="section section-related container">
      <div class="row justify-content-center">
        <div class="col-md-12 col-lg-12">
          <h2 class="section-title text-center">Related posts</h2>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2025-10-12-nextjs-16-major-update-features-summary/">Next.js 16 업데이트, 단순한 버전업이 아닌 이유 (핵심 기능 완벽 정리)</a></h2>
                  <p>Next.js 16의 핵심 업데이트 내용을 완벽하게 정리했습니다. 안정화된 터보팩부터 새로운 캐싱 API, React 컴파일러 지원까지 개발자라면 꼭 알아야 할 모든 변경 사항을 확인해 보세요.</p>
                  <p>
  <small>October 12, 2025<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>6&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2025-09-06-nextjs-15-upgrade-guide-core-changes-and-future-of-app-router/">Next.js 15 업데이트 완벽 가이드, 핵심 변경 사항과 앱 라우터의 미래</a></h2>
                  <p>Next.js 15로 업데이트하는 전체 과정과 주요 변경 사항, 그리고 그 배경에 있는 App Router의 새로운 렌더링 패러다임을 심층 분석합니다. Partial Pre-rendering과 use cache로 변화하는 Next.js의 미래를 미리 만나보세요.</p>
                  <p>
  <small>September 7, 2025<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>9&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          <div class="card">
              <div class="card-body">
                <article>
                  <h2 class="h3"><a class="stretched-link text-body" href="/blog/2025-07-25-tutorial-gorm-gin-api-app-pathc-put-and-howto-jwt-authentication/">Golang, Gin, GORM 실전 API 개발 2편 - 사용자 인증과 데이터 수정 기능 구현</a></h2>
                  <p>1편에 이어 Golang, Gin, GORM을 사용하여 기존 메모 API에 PATCH를 이용한 데이터 수정 기능과 JWT 기반의 안전한 사용자 인증 미들웨어를 추가하는 방법을 다룹니다.</p>
                  <p>
  <small>July 26, 2025<span class="stretched-link position-relative reading-time text-nowrap" title="Estimated reading time"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
        <path d="M12 7v5l3 3"></path>
      </svg>7&nbsp;minutes</span></small>
</p>
</article>
              </div>
            </div>
          </div>
      </div>
    </section>
    <script src="https://utteranc.es/client.js"
      repo="cpro95/utterances_mycodings_fly_dev"
      issue-term="pathname"
      theme="github-light"
      label="blog-comment"
      crossorigin="anonymous"
    async>
    </script>
  </div>
  
    <footer class="footer text-muted">
  <div class="container-lg">
    <div class="row">
      <div class="col-lg-8 text-center text-lg-start">
        <ul class="list-inline">
          <li class="list-inline-item"><a class="text-muted" href="/about/">about</a></li>
        </ul>
      </div>
      <div class="col-lg-8 text-center text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item">Copyright (c) All Right Reserved.</li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    

<script async
  src="/js/app.19b73e0182301dd61c9211c2f6890104740e2eb9eb12fe4ba8d4f31435b22ed6.js"
  integrity="sha256-Gbc&#43;AYIwHdYckhHC9okBBHQOLrnrEv5LqNTzFDWyLtY=">
</script>





<script async
  src="/js/flexsearch.5dd6433c29c3e043627f046054aed58ff3790f58fdb8423f45125bbafdcad335.js"
  integrity="sha256-XdZDPCnD4ENifwRgVK7Vj/N5D1j9uEI/RRJbuv3K0zU=">
</script>
<script async
  src="/js/search-modal.96e662d8f691fe25c859a3437074b485f2d7bed0bca612725028c6cf4322e2f2.js"
  integrity="sha256-luZi2PaR/iXIWaNDcHS0hfLXvtC8phJyUCjGz0Mi4vI=">
</script>

    <div class="d-inline-flex fixed-bottom-right pb-4 pe-4">
  <button id="toTop" type="button" class="btn btn-primary rounded-circle ms-auto p-2"><span class="visually-hidden">Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 15l6 -6l6 6"></path></svg></button>
</div>

    
  </body>
</html>
